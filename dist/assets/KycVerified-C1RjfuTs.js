import{j as e,r as l,s as T,h as I,d as V,e as R}from"./index-BrJE6Ruv.js";import{a as y,E as j,T as A}from"./DashboardLayout-CbQpQ2VH.js";import{B as b}from"./Button-NP5qGopO.js";import{C as L}from"./ConfirmationModal-CR03D5EN.js";import{X as U}from"./x-89xIXrzd.js";import{S as M}from"./shield-Dym4Nj1d.js";import{B as P}from"./building-gQWnzb3h.js";import{U as E}from"./user-BoLJHLaW.js";import{C as q}from"./credit-card-De6BP3Px.js";import{C as N}from"./circle-check-big-CzdoeDj5.js";import{C as K}from"./circle-x-uQfptDzR.js";import{C as Y}from"./clock-B8URdOLJ.js";import"./Logo-yv9J0Zw_.js";import"./house-B5NBqIRK.js";import"./createLucideIcon-DTbf89oH.js";import"./users-Btkg261Z.js";import"./file-check-BlT-5aXD.js";import"./circle-question-mark-DdVU0ul4.js";import"./star-D0UWI2kz.js";import"./message-circle-CfRGLCSX.js";import"./file-text-DhmWdPlz.js";import"./info-D8IKXDkN.js";import"./BackgroundArt-Cv4ql44m.js";const c=({label:t,value:n,children:a,className:i=""})=>e.jsxs("div",{className:i,children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:t}),a||e.jsx("p",{className:"text-sm text-gray-900",children:n||"Not provided"})]}),x=({title:t,icon:n,children:a,className:i=""})=>e.jsxs("div",{className:`bg-white rounded-xl shadow-xs border border-gray-100 p-6 mb-6 ${i}`,children:[e.jsxs("div",{className:"flex items-center mb-6",children:[e.jsx(n,{className:"w-6 h-6 text-gray-400 mr-3"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:t})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:a})]}),F=[{key:"businessName",label:"Business Name"},{key:"businessType",label:"Business Type"},{key:"businessPhone",label:"Business Phone"},{key:"businessAddress",label:"Business Address"},{key:"state",label:"State"},{key:"city",label:"City"},{key:"businessBio",label:"Business Bio",span:"md:col-span-2"}],O=[{key:"fullName",label:"Full Name"},{key:"email",label:"Email"},{key:"phoneNumber",label:"Phone Number"},{key:"gender",label:"Gender"},{key:"state",label:"State"}],$=[{key:"accountHolderName",label:"Account Holder Name"},{key:"accountType",label:"Account Type",transform:(t,n)=>n[t]},{key:"bankName",label:"Bank Name"},{key:"accountNumber",label:"Account Number"}],H=({isOpen:t,onClose:n,documentUrl:a,title:i="View Document"})=>{if(!t)return null;const u=()=>{if(!a)return e.jsx("p",{className:"text-gray-600",children:"No document URL provided."});const m=a.split(".").pop().toLowerCase();return["jpg","jpeg","png","gif","webp"].includes(m)?e.jsx("img",{src:a,alt:i,className:"w-full h-full object-contain"}):m==="pdf"?e.jsx("embed",{src:a,type:"application/pdf",className:"w-full h-full"}):e.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-center p-10",children:[e.jsxs("p",{className:"text-gray-700 mb-4 text-lg",children:["This file type (.",m,") cannot be previewed directly."]}),e.jsx(b,{as:"a",href:a,target:"_blank",rel:"noopener noreferrer",children:"Download Document"})]})};return e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-[rgba(0,0,0,.8)] transition-opacity",onClick:n,children:e.jsxs("div",{className:"relative bg-white rounded-lg shadow-xl w-full max-w-4xl h-full max-h-[90vh] flex flex-col overflow-hidden m-8",onClick:m=>m.stopPropagation(),children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-200",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:i}),e.jsx("button",{onClick:n,className:"text-gray-400 hover:text-gray-600",children:e.jsx(U,{className:"w-6 h-6"})})]}),e.jsx("div",{className:"flex-1 h-full overflow-y-auto bg-[rgba(0,0,0,.95)]",children:u()})]})})},X=t=>{if(!t)return"N/A";try{return new Date(t).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"})}catch{return t}},z=({status:t})=>{const n={approved:{icon:N,text:"Approved",className:"bg-green-100 text-green-700"},pending:{icon:Y,text:"Pending",className:"bg-yellow-100 text-yellow-700"},rejected:{icon:K,text:"Rejected",className:"bg-red-100 text-red-700"},unsubmitted:{icon:A,text:"Not Submitted",className:"bg-gray-100 text-gray-700"}},a=n[t]||n.unsubmitted;return e.jsxs("div",{className:`flex items-center gap-2 px-3 py-1.5 rounded-full text-sm font-medium ${a.className}`,children:[e.jsx(a.icon,{className:"w-5 h-5"}),e.jsx("span",{children:a.text})]})},ye=()=>{const[t,n]=l.useState(!1),[a,i]=l.useState(!1),[u,m]=l.useState(""),[o,G]=l.useState(T.getUserData()),[v,p]=l.useState(!1),[w,f]=l.useState(""),[k,h]=l.useState(""),r=l.useMemo(()=>{const s=o?.data?.seller?.latest_kyc;return s||{status:"unsubmitted",submitted_at:null,verified_at:null,admin_notes:null,document_type:null,document_file:null,cover_image:null}},[o]),C=l.useMemo(()=>{const s=o?.data?.seller;return{businessName:s?.store_name,businessType:s?.business_type?.name,businessPhone:s?.business_phone_number,businessAddress:s?.address,state:s?.state,city:s?.city,businessBio:s?.business_bio}},[o]),_=l.useMemo(()=>{const s=o?.data,d=o?.data?.seller;return{fullName:`${s?.first_name||""} ${s?.last_name||""}`,email:s?.email,phoneNumber:s?.phone_number,gender:d?.gender,state:d?.state}},[o]),D=l.useMemo(()=>{const s=o?.data?.seller;return{accountHolderName:s?.name_on_account,accountType:"N/A",bankName:s?.bank_name,accountNumber:s?.bank_account_number}},[o]),S=async()=>{if(!u.trim()){V("Please provide a reason for the update.");return}n(!0),setTimeout(()=>{n(!1),i(!1),m(""),R("Your update request has been submitted.")},1500)},g=(s,d)=>{p(!0),f(s),h(d)},B=()=>{p(!1),f(""),h("")};return o?e.jsxs(y,{children:[e.jsx("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between mb-8 gap-4",children:e.jsxs("div",{children:[e.jsx("h2",{className:"text-3xl font-bold text-gray-900",children:"Business Verification (KYC)"}),e.jsx("p",{className:"text-gray-600 mt-2",children:"View your current verification status and business details."})]})}),e.jsxs(x,{title:"Verification Status",icon:M,className:"mb-6",children:[e.jsx(c,{label:"Current Status",children:e.jsx(z,{status:r.status})}),e.jsx(c,{label:"Verification Date",value:X(r.status==="approved"?r.verified_at:r.submitted_at)}),e.jsx(c,{label:"Document Type",value:r.document_type}),r.admin_notes&&e.jsx(c,{label:"Admin Notes",value:r.admin_notes,className:"md:col-span-2"}),r.document_file&&e.jsx(c,{label:"View Document",className:"self-end",children:e.jsxs(b,{variant:"outline",onClick:()=>g(r.document_file,"KYC Document"),children:[e.jsx(j,{className:"w-4 h-4 mr-2"})," View File"]})}),r.cover_image&&e.jsx(c,{label:"View Cover Image",className:"self-end",children:e.jsxs(b,{variant:"outline",onClick:()=>g(r.cover_image,"Cover Image"),children:[e.jsx(j,{className:"w-4 h-4 mr-2"})," View Image"]})})]}),e.jsx(x,{title:"Business Information",icon:P,children:F.map(s=>e.jsx(c,{label:s.label,value:C[s.key],className:s.span},s.key))}),e.jsx(x,{title:"Owner Information",icon:E,children:O.map(s=>e.jsx(c,{label:s.label,value:_[s.key],className:s.span},s.key))}),e.jsx(x,{title:"Bank Details",icon:q,children:$.map(s=>e.jsx(c,{label:s.label,value:D[s.key],className:s.span},s.key))}),e.jsx(L,{isOpen:a,onClose:()=>i(!1),onConfirm:S,title:"Request Information Update",confirmText:t?"Submitting...":"Submit Request",isConfirmLoading:t,children:e.jsxs("div",{children:[e.jsx("label",{htmlFor:"updateReason",className:"block text-sm font-medium text-gray-700 mb-2",children:"What information do you need to update and why?"}),e.jsx("textarea",{id:"updateReason",value:u,onChange:s=>m(s.target.value),placeholder:"e.g., I need to update my bank account number...",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-hidden focus:ring-2 focus:ring-brand-500 focus:border-transparent",rows:4,disabled:t}),e.jsx("p",{className:"text-sm text-gray-500 mt-2",children:"Our team will review your request within 24 hours."})]})}),r.status==="approved"&&e.jsx("div",{className:"mt-6 p-4 bg-green-50 border border-green-200 rounded-lg",children:e.jsxs("div",{className:"flex",children:[e.jsx(N,{className:"w-5 h-5 text-green-600 mr-3 shrink-0"}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium text-green-800",children:"Verification Complete"}),e.jsx("p",{className:"text-sm text-green-700",children:"Your business has been successfully verified."})]})]})}),e.jsx(H,{isOpen:v,onClose:()=>{B()},documentUrl:w,title:k})]}):e.jsx(y,{children:e.jsx("div",{className:"flex items-center justify-center h-full",children:e.jsx(I,{})})})};export{ye as default};
