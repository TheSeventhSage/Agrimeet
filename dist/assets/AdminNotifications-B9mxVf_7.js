import{r as d,j as e,b as N,e as b,d as p}from"./index-BOLkSH9S.js";import{D as w,B as f,W as u,h as l}from"./DashboardLayout-BvCakflT.js";import{A as y}from"./arrow-down-left-T8mqy2lx.js";import{C as v}from"./clock-ClWTmPxa.js";import{E as k}from"./external-link-DiXLABne.js";import{C as S}from"./shield-check-BosUqYmL.js";import{T as _}from"./trash-2-Euhy1XCH.js";import"./Logo-g0xKsfJ_.js";import"./x-C2LEswAj.js";import"./createLucideIcon-Df3o3GTg.js";import"./package-CKJSu7qp.js";import"./house-CbQ0kLy2.js";import"./users-B4SWA-Gw.js";import"./file-check-CwXOnyIx.js";import"./circle-question-mark-CVrBAAd0.js";import"./star-C1ESBnNj.js";import"./message-circle-BHYE61eq.js";import"./file-text-CticlOFV.js";import"./user-CozA4sKy.js";import"./BackgroundArt-ChQV54k0.js";const C=()=>{const[i,n]=d.useState([]),[o,s]=d.useState(!0),[c,j]=d.useState(1),x=async()=>{s(!0);try{const a=await l.getNotifications(c),r=a.data?.notifications||a.data?.data||[];n(r)}catch(a){console.error(a)}finally{s(!1)}};d.useEffect(()=>{x()},[c]);const h=async a=>{try{await l.markAsRead(a),n(r=>r.map(m=>m.id===a?{...m,read_at:new Date().toISOString()}:m))}catch{p("Failed to mark as read")}},g=async()=>{try{await l.markAllAsRead(),x(),b("All marked as read")}catch{p("Failed to update")}},t=async a=>{if(window.confirm("Delete this notification?"))try{await l.deleteNotification(a),n(r=>r.filter(m=>m.id!==a)),b("Deleted")}catch{p("Failed to delete")}};return e.jsxs("div",{className:"space-y-4 animate-in fade-in zoom-in duration-200",children:[e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{onClick:g,className:"text-sm text-brand-600 hover:text-brand-700 font-medium",children:"Mark all as read"})}),o?e.jsx("div",{className:"p-8 text-center",children:e.jsx("div",{className:"animate-spin h-8 w-8 border-2 border-brand-500 rounded-full border-t-transparent mx-auto"})}):i.length===0?e.jsx("div",{className:"text-center p-8 bg-gray-50 rounded-lg text-gray-500",children:"No notifications found."}):e.jsx("div",{className:"space-y-3",children:i.map(a=>e.jsxs("div",{className:`p-4 rounded-lg border ${a.read_at?"bg-white border-gray-100":"bg-blue-50 border-blue-100"} flex justify-between items-start gap-4 transition-all hover:shadow-sm`,children:[e.jsxs("div",{className:"flex gap-3",children:[e.jsx("div",{className:`mt-1 p-2 h-fit rounded-full ${a.read_at?"bg-gray-100 text-gray-400":"bg-blue-100 text-blue-600"}`,children:e.jsx(f,{className:"w-4 h-4"})}),e.jsxs("div",{children:[e.jsx("h4",{className:`text-sm font-semibold ${a.read_at?"text-gray-700":"text-gray-900"}`,children:a.data?.title||"Notification"}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:a.data?.message||a.data?.body||"No content"}),e.jsx("p",{className:"text-xs text-gray-400 mt-2",children:new Date(a.created_at).toLocaleString()})]})]}),e.jsxs("div",{className:"flex gap-2",children:[!a.read_at&&e.jsx("button",{onClick:()=>h(a.id),title:"Mark Read",className:"p-1.5 hover:bg-white rounded-md text-blue-600",children:e.jsx(S,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>t(a.id),title:"Delete",className:"p-1.5 hover:bg-white rounded-md text-red-400 hover:text-red-600",children:e.jsx(_,{className:"w-4 h-4"})})]})]},a.id))})]})},A=()=>{const[i,n]=d.useState([]),[o,s]=d.useState(!0),[c,j]=d.useState(1),x=N(),h=async()=>{s(!0);try{const t=await l.getWithdrawalNotifications(c),a=t.data?.data||t.data?.notifications||t.data||[];n(a)}catch(t){console.error(t)}finally{s(!1)}};d.useEffect(()=>{h()},[c]);const g=async t=>{try{await l.markAsRead(t),n(a=>a.map(r=>r.id===t?{...r,read_at:new Date().toISOString()}:r))}catch{}};return e.jsxs("div",{className:"space-y-4 animate-in fade-in zoom-in duration-200",children:[e.jsxs("div",{className:"bg-green-50 border border-green-100 p-4 rounded-lg flex items-center gap-3 text-green-800 mb-6",children:[e.jsx(u,{className:"w-5 h-5"}),e.jsx("p",{className:"text-sm font-medium",children:"These notifications represent financial withdrawal requests requiring attention."})]}),o?e.jsx("div",{className:"p-8 text-center",children:e.jsx("div",{className:"animate-spin h-8 w-8 border-2 border-brand-500 rounded-full border-t-transparent mx-auto"})}):i.length===0?e.jsxs("div",{className:"text-center p-12 bg-gray-50 rounded-xl border border-gray-100",children:[e.jsx("div",{className:"bg-white w-12 h-12 rounded-full flex items-center justify-center mx-auto mb-3 shadow-sm",children:e.jsx(u,{className:"w-6 h-6 text-gray-300"})}),e.jsx("p",{className:"text-gray-500 font-medium",children:"No withdrawal requests found."})]}):e.jsx("div",{className:"space-y-3",children:i.map(t=>e.jsxs("div",{className:`p-5 rounded-xl border ${t.read_at?"bg-white border-gray-100":"bg-white border-brand-200 shadow-sm ring-1 ring-brand-50"} flex justify-between items-start gap-4 transition-all group`,children:[e.jsxs("div",{className:"flex gap-4",children:[e.jsx("div",{className:`mt-1 p-3 rounded-full flex-shrink-0 ${t.read_at?"bg-gray-100 text-gray-400":"bg-green-100 text-green-600"}`,children:e.jsx(y,{className:"w-5 h-5"})}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("h4",{className:`text-sm font-bold ${t.read_at?"text-gray-700":"text-gray-900"}`,children:t.data?.title||"Withdrawal Request"}),!t.read_at&&e.jsx("span",{className:"w-2 h-2 rounded-full bg-red-500"})]}),e.jsx("p",{className:"text-sm text-gray-600 leading-relaxed max-w-2xl",children:t.data?.message||t.data?.body}),e.jsxs("div",{className:"flex items-center gap-3 mt-3",children:[e.jsxs("p",{className:"text-xs text-gray-400 flex items-center gap-1",children:[e.jsx(v,{className:"w-3 h-3"}),new Date(t.created_at).toLocaleString()]}),e.jsxs("button",{onClick:()=>x("/admin/commissions"),className:"text-xs font-medium text-brand-600 hover:text-brand-700 flex items-center gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:["View Finance ",e.jsx(k,{className:"w-3 h-3"})]})]})]})]}),e.jsx("div",{className:"flex gap-2",children:!t.read_at&&e.jsx("button",{onClick:()=>g(t.id),className:"px-3 py-1.5 text-xs font-medium bg-gray-100 text-gray-600 rounded-lg hover:bg-gray-200 transition-colors",children:"Mark Read"})})]},t.id))})]})},D=[{id:"inbox",label:"My Inbox",icon:f},{id:"withdrawals",label:"Withdrawal Requests",icon:u}],U=()=>{const[i,n]=d.useState("inbox"),o=()=>{switch(i){case"inbox":return e.jsx(C,{});case"withdrawals":return e.jsx(A,{});default:return null}};return e.jsx(w,{children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Notifications Center"}),e.jsx("p",{className:"text-gray-500",children:"Manage system alerts, withdrawals, and broadcasts."})]}),e.jsx("div",{className:"flex border-b border-gray-200 overflow-x-auto",children:D.map(s=>e.jsxs("button",{onClick:()=>n(s.id),className:`relative flex items-center gap-2 px-4 py-3 text-sm font-medium transition-colors whitespace-nowrap
                                ${i===s.id?"text-brand-600":"text-gray-500 hover:text-gray-700"}`,children:[e.jsx(s.icon,{className:"w-5 h-5"}),e.jsx("span",{children:s.label}),i===s.id&&e.jsx("div",{className:"absolute bottom-[-1px] left-0 right-0 h-0.5 bg-brand-600"})]},s.id))}),e.jsx("div",{className:"mt-6",children:o()})]})})};export{U as default};
