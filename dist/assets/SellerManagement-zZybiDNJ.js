import{D as w,j as e,r as d,d as _,e as F}from"./index-BOLkSH9S.js";import{T as ge,E as he,D as pe}from"./DashboardLayout-BvCakflT.js";import{u as be,s as je,U as q,a as X,S as fe}from"./SuspendUserModal-BltW7UW1.js";import{C as O}from"./ConfirmationModal-cvEjaG2Q.js";import{S as k}from"./store-DAu4H_1r.js";import{C as f}from"./circle-check-big-DahogGvV.js";import{C as G}from"./clock-ClWTmPxa.js";import{S as ye}from"./search-Ckn77Lrt.js";import{B as Ne}from"./building-CBavZwhF.js";import{U as W}from"./user-CozA4sKy.js";import{M as H}from"./map-pin-BY2_uCYu.js";import{P as ve}from"./phone-DkC1kBQq.js";import{C as V}from"./star-C1ESBnNj.js";import{S as we}from"./shield-check-BosUqYmL.js";import{C as v}from"./circle-x-Bxs6Jh5B.js";import{M as C}from"./Modal-f8OUSp_L.js";import{B as N}from"./Button-DPYyXRjf.js";import{F as J}from"./file-text-CticlOFV.js";import{E as M}from"./external-link-DiXLABne.js";import{L as Q}from"./loader-circle-MnlzbvQH.js";import{X as Se}from"./x-C2LEswAj.js";import{C as _e}from"./credit-card-ZC6Uwims.js";import{P as Ce}from"./Pagination-8iEX1b1X.js";import{I as ke}from"./image-CTXW8DrQ.js";import"./Logo-g0xKsfJ_.js";import"./package-CKJSu7qp.js";import"./createLucideIcon-Df3o3GTg.js";import"./house-CbQ0kLy2.js";import"./users-B4SWA-Gw.js";import"./file-check-CwXOnyIx.js";import"./circle-question-mark-CVrBAAd0.js";import"./message-circle-BHYE61eq.js";import"./BackgroundArt-ChQV54k0.js";import"./chevron-left-B0iQB9Pm.js";const Ae=async(s=1,n=20,l={})=>{try{const c={page:s,per_page:n},t=l||{};return t.search_global&&t.search_global.trim().length>0&&(c.search_global=t.search_global.trim()),t.status&&t.status!=="all"&&(c.status=t.status),t.business_type&&t.business_type!=="all"&&(c.business_type=t.business_type),t.sortBy&&(c.sortBy=t.sortBy),t.sortOrder&&(c.sortOrder=t.sortOrder),(await w.get("/admin/allsellers",{query:c})).data}catch(c){throw console.error("Error fetching sellers:",c),c}},Ke=async s=>{try{return await w.get(`/admin/sellers/${s}`)}catch(n){throw console.error(`Error fetching seller ${s}:`,n),n}},$e=je,De=be,Ye=async()=>{try{return await w.get("/admin/allsellers",{query:{per_page:1}})}catch(s){throw console.error("Error fetching seller stats:",s),s}},Be=async()=>{try{return await w.get("/admin/business_types")}catch(s){return console.error("Error fetching business types:",s),{data:[]}}},Ue=async(s,n)=>{try{return(await w.post(`/admin/kyc/${s}/review`,n)).data}catch(l){throw console.error(`Error reviewing KYC ${s}:`,l),l}},j={getAllSellers:Ae,getSellerById:Ke,suspendSeller:$e,unsuspendSeller:De,getSellerStats:Ye,getBusinessTypes:Be,reviewKyc:Ue},Fe=({stats:s,sellers:n})=>{const c=(()=>{if(!n||n.length===0)return{total:s.total||0,verified:0,pending:0,rejected:0,suspended:0};const a=n.filter(m=>m.latest_kyc?.status==="approved").length,x=n.filter(m=>m.latest_kyc?.status==="pending"||!m.latest_kyc).length,i=n.filter(m=>m.latest_kyc?.status==="rejected").length,o=n.filter(m=>m.user?.user_status==="suspended"||m.user?.user_status==="banned").length;return{total:s.total||n.length,verified:a,pending:x,rejected:i,suspended:o}})(),t=[{title:"Total Sellers",value:c.total,icon:k,color:"bg-blue-500"},{title:"KYC Approved",value:c.verified,icon:f,color:"bg-green-500"},{title:"KYC Pending",value:c.pending,icon:G,color:"bg-yellow-500"},{title:"Suspended",value:c.suspended,icon:ge,color:"bg-red-500"}];return e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:t.map((a,x)=>e.jsx("div",{className:"bg-white rounded-xl shadow-xs border border-gray-100 p-6 hover:shadow-md transition-shadow",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:a.title}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 mt-2",children:a.value.toLocaleString()})]}),e.jsx("div",{className:`p-3 rounded-lg ${a.color}`,children:e.jsx(a.icon,{className:"w-6 h-6 text-white"})})]})},x))})},Me=({filters:s,onFilterChange:n,businessTypes:l=[]})=>{const[c,t]=d.useState(s.search_global||""),a=i=>{i.key==="Enter"&&(i.preventDefault(),n({...s,search_global:c.trim(),page:1}))},x=()=>{t(""),n({...s,search_global:"",page:1})};return e.jsx("div",{className:"bg-white rounded-xl shadow-xs border border-gray-100 p-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"md:col-span-1",children:[e.jsxs("div",{className:"relative",children:[e.jsx(ye,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),e.jsx("input",{type:"text",placeholder:"Search sellers... (Press Enter)",value:c,onChange:i=>t(i.target.value),onKeyPress:a,className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:outline-hidden focus:ring-2 focus:ring-brand-500"}),c&&e.jsx("button",{onClick:x,className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600",children:"×"})]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Press Enter to search"})]}),e.jsx("div",{children:e.jsxs("select",{value:s.status||"",onChange:i=>n({...s,status:i.target.value,page:1}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-hidden focus:ring-2 focus:ring-brand-500",children:[e.jsx("option",{value:"all",children:"All KYC Status"}),e.jsx("option",{value:"pending",children:"Pending"}),e.jsx("option",{value:"approved",children:"Approved"}),e.jsx("option",{value:"rejected",children:"Rejected"})]})}),e.jsx("div",{children:e.jsxs("select",{value:s.business_type||"",onChange:i=>n({...s,business_type:i.target.value,page:1}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-hidden focus:ring-2 focus:ring-brand-500",children:[e.jsx("option",{value:"all",children:"All Business Types"}),l.map(i=>e.jsx("option",{value:i.name,children:i.name},i.id))]})})]})})},Pe=({seller:s,onViewDetails:n,onSuspendSeller:l,onUnsuspendSeller:c,onReviewKYC:t})=>{const a=()=>{if(s.latest_kyc){const u=s.latest_kyc.status;if(u==="approved")return e.jsxs("span",{className:"inline-flex items-center gap-1 px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800",children:[e.jsx(f,{className:"w-3 h-3"}),"Approved"]});if(u==="pending")return e.jsxs("span",{className:"inline-flex items-center gap-1 px-2.5 py-0.5 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800",children:[e.jsx(G,{className:"w-3 h-3"}),"Pending"]});if(u==="rejected")return e.jsxs("span",{className:"inline-flex items-center gap-1 px-2.5 py-0.5 rounded-full text-xs font-medium bg-red-100 text-red-800",children:[e.jsx(v,{className:"w-3 h-3"}),"Rejected"]})}return e.jsxs("span",{className:"inline-flex items-center gap-1 px-2.5 py-0.5 rounded-full text-xs font-medium bg-gray-100 text-gray-800",children:[e.jsx(V,{className:"w-3 h-3"}),"No KYC"]})},x=()=>{const u=s.user?.user_status||"active";return u==="suspended"||u==="banned"?e.jsxs("span",{className:"inline-flex items-center gap-1 px-2.5 py-0.5 rounded-full text-xs font-medium bg-red-100 text-red-800",children:[e.jsx(v,{className:"w-3 h-3"}),"Suspended"]}):e.jsxs("span",{className:"inline-flex items-center gap-1 px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800",children:[e.jsx(f,{className:"w-3 h-3"}),"Active"]})},i=s.user?.user_status==="suspended"||s.user?.user_status==="banned",o=s.user?.suspension_count||0,m=s.latest_kyc?.status==="pending";return e.jsxs("div",{className:"bg-white rounded-xl shadow-xs border border-gray-100 p-6 hover:shadow-md transition-shadow",children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-12 h-12 bg-brand-100 rounded-full flex items-center justify-center",children:s.user?.profile_photo?e.jsx("img",{src:s.user.profile_photo,alt:s.store_name,className:"w-12 h-12 rounded-full object-cover"}):e.jsx(k,{className:"w-6 h-6 text-brand-700"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:s.store_name||"N/A"}),e.jsx("p",{className:"text-sm text-gray-600",children:s.user?`${s.user.first_name} ${s.user.last_name}`:"N/A"})]})]}),e.jsxs("div",{className:"flex flex-col gap-1 items-end",children:[a(),x()]})]}),e.jsxs("div",{className:"space-y-2 mb-4",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[e.jsx(Ne,{className:"w-4 h-4"}),e.jsx("span",{children:s.business_type?.name||"N/A"})]}),e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[e.jsx(W,{className:"w-4 h-4"}),e.jsx("span",{children:s.user?.email||"N/A"})]}),e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[e.jsx(H,{className:"w-4 h-4"}),e.jsx("span",{className:"truncate",children:s.city&&s.state?`${s.city}, ${s.state}`:s.address||"N/A"})]}),e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[e.jsx(ve,{className:"w-4 h-4"}),e.jsx("span",{children:s.business_phone_number||s.user?.phone_number||"N/A"})]})]}),o>0&&e.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-3 mb-4",children:e.jsxs("p",{className:"text-xs text-red-700 flex items-center gap-2",children:[e.jsx(V,{className:"w-4 h-4"}),"Suspended ",o," ",o===1?"time":"times"]})}),s.bank_name&&e.jsxs("div",{className:"bg-gray-50 rounded-lg p-3 mb-4",children:[e.jsx("p",{className:"text-xs text-gray-500 mb-1",children:"Bank Details"}),e.jsx("p",{className:"text-sm font-medium text-gray-900",children:s.bank_name}),e.jsx("p",{className:"text-sm text-gray-600",children:s.bank_account_number}),e.jsx("p",{className:"text-xs text-gray-500",children:s.name_on_account})]}),e.jsxs("div",{className:"flex items-center gap-2 pt-4 border-t border-gray-200 mt-auto",children:[e.jsxs("button",{onClick:()=>n(s),className:"flex-1 flex items-center justify-center gap-2 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors w-full text-sm md:text-base",children:[e.jsx(he,{className:"w-4 h-4"}),"View Details"]}),m&&e.jsxs("button",{onClick:()=>{console.log("Seller being reviewed:",s),t(s)},className:"flex-1 flex items-center justify-center gap-2 px- py-2 bg-brand-600 text-white rounded-lg hover:bg-brand-700 transition-colors text-sm font-medium w-full md:mt-0",title:"Review KYC Documents",children:[e.jsx(we,{className:"w-4 h-4"}),"Review"]}),i?e.jsx("button",{onClick:()=>c(s),className:"flex items-center justify-center gap-2 px-4 py-2 bg-green-500 text-white rounded-lg hover:bg-green-600 transition-colors",title:"Unsuspend Seller",children:e.jsx(q,{className:"w-4 h-4"})}):e.jsx("button",{onClick:()=>l(s),className:"flex items-center justify-center gap-2 px-4 py-2 bg-red-500 text-white rounded-lg hover:bg-red-600 transition-colors",title:"Suspend Seller",children:e.jsx(X,{className:"w-4 h-4"})})]})]})},Ee=({isOpen:s,onClose:n,submission:l,onConfirm:c,isLoading:t})=>{const[a,x]=d.useState(null),[i,o]=d.useState("");if(!l)return null;const m=()=>{c(l.id,{status:a,admin_notes:i})};return e.jsx(C,{isOpen:s,onClose:n,title:"Review KYC Submission",size:"lg",children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg border border-gray-200",children:[e.jsxs("h4",{className:"text-sm font-semibold text-gray-700 mb-3 flex items-center gap-2",children:[e.jsx(J,{className:"w-4 h-4"})," Submitted Documents"]}),e.jsxs("div",{className:"flex items-center justify-between bg-white p-3 rounded border border-gray-100 shadow-sm",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-900 capitalize",children:l.document_type}),e.jsxs("p",{className:"text-xs text-gray-500",children:["Submitted on ",new Date(l.submitted_at).toLocaleDateString()]})]}),e.jsxs("a",{href:l.document_file,target:"_blank",rel:"noopener noreferrer",className:"text-brand-600 hover:text-brand-700 text-sm font-medium flex items-center gap-1",children:["View File ",e.jsx(M,{className:"w-3 h-3"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("button",{onClick:()=>x("approved"),className:`flex flex-col items-center justify-center p-4 rounded-xl border-2 transition-all ${a==="approved"?"border-green-600 bg-green-50":"border-gray-100 bg-white hover:border-gray-200"}`,children:[e.jsx(f,{className:`w-8 h-8 mb-2 ${a==="approved"?"text-green-600":"text-gray-400"}`}),e.jsx("span",{className:`font-semibold ${a==="approved"?"text-green-800":"text-gray-600"}`,children:"Approve"})]}),e.jsxs("button",{onClick:()=>x("rejected"),className:`flex flex-col items-center justify-center p-4 rounded-xl border-2 transition-all ${a==="rejected"?"border-red-600 bg-red-50":"border-gray-100 bg-white hover:border-gray-200"}`,children:[e.jsx(v,{className:`w-8 h-8 mb-2 ${a==="rejected"?"text-red-600":"text-gray-400"}`}),e.jsx("span",{className:`font-semibold ${a==="rejected"?"text-red-800":"text-gray-600"}`,children:"Reject"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Admin Notes / Feedback"}),e.jsx("textarea",{className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-brand-500 min-h-[100px]",placeholder:"Explain your decision (required if rejecting)...",value:i,onChange:u=>o(u.target.value)})]}),e.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t",children:[e.jsx(N,{variant:"outline",onClick:n,children:"Cancel"}),e.jsx(N,{onClick:m,disabled:!a||t||a==="rejected"&&!i,className:a==="approved"?"bg-green-600 hover:bg-green-700":"bg-red-600 hover:bg-red-700",children:t?e.jsx(Q,{className:"w-4 h-4 animate-spin"}):"Confirm Decision"})]})]})})},Le=({seller:s,onClose:n,onSuspendSeller:l,onUnsuspendSeller:c})=>{if(!s)return null;const t=s.user,a=t?.user_status==="suspended"||t?.user_status==="banned",x=t?.suspension_count||0;return e.jsx("div",{className:"ml-0 lg:ml-64 fixed inset-0 bg-[rgba(0,0,0,.8)] flex items-center justify-center z-50 px-3 md:px-12 py-4",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-xl max-w-5xl w-full max-h-[90vh] overflow-y-auto",children:[e.jsx("div",{className:"p-6 border-b border-gray-200 sticky top-0 bg-white z-10",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-semibold text-gray-900",children:"Seller Details"}),e.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:["Seller ID: ",s.id," | User ID: ",t?.id]})]}),e.jsx("button",{onClick:n,className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:e.jsx(Se,{className:"w-5 h-5 text-gray-500"})})]})}),e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsx("div",{className:`p-4 rounded-lg ${a?"bg-red-50 border border-red-200":"bg-green-50 border border-green-200"}`,children:e.jsxs("div",{className:"flex flex-col gap-3 md:flex-row md:items-center justify-between",children:[e.jsx("div",{className:"flex items-center gap-3",children:a?e.jsxs(e.Fragment,{children:[e.jsx(v,{className:"w-6 h-6 text-red-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-red-900",children:"Account Suspended"}),e.jsx("p",{className:"text-sm text-red-700",children:"This seller's account is currently suspended"}),x>0&&e.jsxs("p",{className:"text-xs text-red-600 mt-1",children:["Suspended ",x," ",x===1?"time":"times"]})]})]}):e.jsxs(e.Fragment,{children:[e.jsx(f,{className:"w-6 h-6 text-green-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-green-900",children:"Account Active"}),e.jsx("p",{className:"text-sm text-green-700",children:"This seller's account is active"})]})]})}),e.jsx("div",{children:a?e.jsxs("button",{onClick:()=>c(s),className:"inline-flex items-center gap-2 px-4 py-2 bg-green-500 text-white rounded-lg hover:bg-green-600 transition-colors",children:[e.jsx(q,{className:"w-4 h-4"}),"Unsuspend Seller"]}):e.jsxs("button",{onClick:()=>l(s),className:"inline-flex items-center gap-2 px-4 py-2 bg-red-500 text-white rounded-lg hover:bg-red-600 transition-colors",children:[e.jsx(X,{className:"w-4 h-4"}),"Suspend Seller"]})})]})}),e.jsxs("div",{children:[e.jsxs("h4",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center gap-2",children:[e.jsx(W,{className:"w-5 h-5 text-brand-600"}),"User Information"]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-600",children:"Full Name"}),e.jsx("p",{className:"text-gray-900",children:t?`${t.first_name} ${t.last_name}`:"N/A"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-600",children:"Email"}),e.jsx("p",{className:"text-gray-900",children:t?.email||"N/A"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-600",children:"Phone Number"}),e.jsx("p",{className:"text-gray-900",children:t?.phone_number||"N/A"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-600",children:"Roles"}),e.jsx("div",{className:"flex gap-2 mt-1",children:t?.roles?.map((i,o)=>e.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:i},o))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-600",children:"Wallet Balance"}),e.jsxs("p",{className:"text-gray-900",children:["₦",parseFloat(t?.wallet||0).toLocaleString()]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-600",children:"Account Status"}),e.jsx("p",{className:"text-gray-900 capitalize",children:t?.user_status||"N/A"})]})]})]}),e.jsxs("div",{children:[e.jsxs("h4",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center gap-2",children:[e.jsx(k,{className:"w-5 h-5 text-brand-600"}),"Store Information"]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-600",children:"Store Name"}),e.jsx("p",{className:"text-gray-900",children:s.store_name||"N/A"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-600",children:"Business Type"}),e.jsx("p",{className:"text-gray-900",children:s.business_type?.name||"N/A"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-600",children:"Gender"}),e.jsx("p",{className:"text-gray-900 capitalize",children:s.gender||"N/A"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-600",children:"Business Phone"}),e.jsx("p",{className:"text-gray-900",children:s.business_phone_number||"N/A"})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{className:"text-sm font-medium text-gray-600",children:"Business Bio"}),e.jsx("p",{className:"text-gray-900",children:s.business_bio||"N/A"})]})]})]}),e.jsxs("div",{children:[e.jsxs("h4",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center gap-2",children:[e.jsx(H,{className:"w-5 h-5 text-brand-600"}),"Location"]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{className:"text-sm font-medium text-gray-600",children:"Address"}),e.jsx("p",{className:"text-gray-900",children:s.address||"N/A"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-600",children:"City"}),e.jsx("p",{className:"text-gray-900",children:s.city||"N/A"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-600",children:"State"}),e.jsx("p",{className:"text-gray-900",children:s.state||"N/A"})]})]})]}),e.jsxs("div",{children:[e.jsxs("h4",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center gap-2",children:[e.jsx(_e,{className:"w-5 h-5 text-brand-600"}),"Bank Details"]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-600",children:"Bank Name"}),e.jsx("p",{className:"text-gray-900",children:s.bank_name||"N/A"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-600",children:"Account Number"}),e.jsx("p",{className:"text-gray-900",children:s.bank_account_number||"N/A"})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{className:"text-sm font-medium text-gray-600",children:"Account Name"}),e.jsx("p",{className:"text-gray-900",children:s.name_on_account||"N/A"})]})]})]}),e.jsx("div",{children:e.jsx(Ee,{seller:s})})]})]})})},Re=({isOpen:s,onClose:n,submission:l,onConfirm:c,isLoading:t})=>{const[a,x]=d.useState(null),[i,o]=d.useState(""),[m,u]=d.useState(null);if(console.log(l),!l)return e.jsx(C,{isOpen:s,onClose:n,title:"Review KYC Submission",size:"lg",children:e.jsx("div",{className:"text-center py-8",children:e.jsx("p",{className:"text-gray-600",children:"No KYC submission found for this seller."})})});const b=()=>{c(l.id,{status:a,admin_notes:i})};return e.jsxs(e.Fragment,{children:[e.jsx(C,{isOpen:s,onClose:n,title:"Review KYC Submission",size:"lg",children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg border border-gray-200 space-y-4",children:[e.jsxs("div",{children:[e.jsxs("h4",{className:"text-sm font-semibold text-gray-700 mb-3 flex items-center gap-2",children:[e.jsx(J,{className:"w-4 h-4"})," Submitted Document"]}),e.jsxs("div",{className:"flex items-center justify-between bg-white p-3 rounded border border-gray-100 shadow-sm",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-900 capitalize",children:l.document_type}),e.jsxs("p",{className:"text-xs text-gray-500",children:["Submitted on ",new Date(l.submitted_at).toLocaleDateString()]})]}),e.jsxs("button",{onClick:()=>u(l.document_file),className:"text-brand-600 hover:text-brand-700 text-sm font-medium flex items-center gap-1",children:["View File ",e.jsx(M,{className:"w-3 h-3"})]})]})]}),l.cover_image&&e.jsxs("div",{children:[e.jsxs("h4",{className:"text-sm font-semibold text-gray-700 mb-3 flex items-center gap-2",children:[e.jsx(ke,{className:"w-4 h-4"})," Cover Image"]}),e.jsxs("div",{className:"flex items-center justify-between bg-white p-3 rounded border border-gray-100 shadow-sm",children:[e.jsx("div",{children:e.jsx("p",{className:"text-sm font-medium text-gray-900",children:"Cover Image"})}),e.jsxs("button",{onClick:()=>u(l.cover_image),className:"text-brand-600 hover:text-brand-700 text-sm font-medium flex items-center gap-1",children:["View Image ",e.jsx(M,{className:"w-3 h-3"})]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("button",{onClick:()=>x("approved"),className:`flex flex-col items-center justify-center p-4 rounded-xl border-2 transition-all ${a==="approved"?"border-green-600 bg-green-50":"border-gray-100 bg-white hover:border-gray-200"}`,children:[e.jsx(f,{className:`w-8 h-8 mb-2 ${a==="approved"?"text-green-600":"text-gray-400"}`}),e.jsx("span",{className:`font-semibold ${a==="approved"?"text-green-800":"text-gray-600"}`,children:"Approve"})]}),e.jsxs("button",{onClick:()=>x("rejected"),className:`flex flex-col items-center justify-center p-4 rounded-xl border-2 transition-all ${a==="rejected"?"border-red-600 bg-red-50":"border-gray-100 bg-white hover:border-gray-200"}`,children:[e.jsx(v,{className:`w-8 h-8 mb-2 ${a==="rejected"?"text-red-600":"text-gray-400"}`}),e.jsx("span",{className:`font-semibold ${a==="rejected"?"text-red-800":"text-gray-600"}`,children:"Reject"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Admin Notes / Feedback"}),e.jsx("textarea",{className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-brand-500 min-h-[100px]",placeholder:"Explain your decision (required if rejecting)...",value:i,onChange:A=>o(A.target.value)})]}),e.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t",children:[e.jsx(N,{variant:"outline",onClick:n,children:"Cancel"}),e.jsx(N,{onClick:b,disabled:!a||t||a==="rejected"&&!i,className:a==="approved"?"bg-green-600 hover:bg-green-700":"bg-red-600 hover:bg-red-700",children:t?e.jsx(Q,{className:"w-4 h-4 animate-spin"}):"Confirm Decision"})]})]})}),m&&e.jsxs(C,{isOpen:!!m,onClose:()=>u(null),title:"Document Preview",size:"xl",children:[e.jsx("div",{className:"h-[70vh] w-full bg-gray-100 rounded-lg overflow-hidden flex items-center justify-center",children:e.jsx("iframe",{src:m,className:`w-full h-full border-0 \r
                scrollbar-thin \r
                scrollbar-thumb-gray-300 \r
                scrollbar-track-transparent \r
                hover:scrollbar-thumb-gray-400\r
                [&::-webkit-scrollbar]:w-2\r
                [&::-webkit-scrollbar-track]:bg-transparent\r
                [&::-webkit-scrollbar-thumb]:bg-gray-300\r
                [&::-webkit-scrollbar-thumb]:rounded-full\r
                [&::-webkit-scrollbar-thumb]:border-2\r
                [&::-webkit-scrollbar-thumb]:border-transparent\r
                [&::-webkit-scrollbar-thumb]:bg-clip-content`,title:"Document Viewer"})}),e.jsx("div",{className:"mt-4 flex justify-end",children:e.jsx(N,{variant:"outline",onClick:()=>u(null),children:"Close Viewer"})})]})]})},Ns=()=>{const[s,n]=d.useState([]),[l,c]=d.useState({}),[t,a]=d.useState([]),[x,i]=d.useState(!0),[o,m]=d.useState(null),[u,b]=d.useState(!1),[A,K]=d.useState(!1),[Z,$]=d.useState(!1),[P,S]=d.useState(!1),[ee,D]=d.useState(!1),[se,E]=d.useState(!1),[y,L]=d.useState(null),[te,Y]=d.useState(!1),R=r=>{console.log("Seller data:",r),console.log("Latest KYC:",r.latest_kyc),m(r),D(!0)},[h,T]=d.useState({search_global:"",status:"all",business_type:"all",sortBy:"created_at",sortOrder:"desc"}),[re,ae]=d.useState({current_page:1,last_page:1,from:0,to:0,total:0,per_page:20});d.useEffect(()=>{B()},[h]),d.useEffect(()=>{U(),ne()},[]);const B=async()=>{try{i(!0);const r=await j.getAllSellers(h.page,20,{search_global:h.search_global,status:h.status,business_type:h.business_type}),g=r.data?.data||r.data||[],p=r.meta||{};n(g),ae({current_page:p.current_page||1,last_page:p.last_page||1,from:p.from||0,to:p.to||0,total:p.total||0,per_page:p.per_page||20})}catch(r){console.error("Failed to load sellers:",r),_("Failed to load sellers"),n([])}finally{i(!1)}},U=async()=>{try{const g=(await j.getSellerStats()).data?.meta||{};c({total:g.total||0})}catch(r){console.error("Failed to load stats:",r)}},ne=async()=>{try{const r=await j.getBusinessTypes();a(r.data?.data||[])}catch(r){console.error("Failed to load business types:",r)}},le=(r,g)=>{L({submissionId:r,reviewData:g}),Y(!0)},ie=async()=>{if(!y)return;const{submissionId:r,reviewData:g}=y;E(!0);try{await j.reviewKyc(r,g),F(`KYC ${g.status} successfully`),Y(!1),D(!1),location.reload()}catch(p){_(p.message||"Failed to process KYC review")}finally{E(!1),L(null)}},ce=r=>{T(r)},oe=r=>{T({...h,page:r})},de=r=>{m(r),b(!0)},I=r=>{m(r),K(!0)},z=r=>{m(r),$(!0)},me=async r=>{if(o?.user?.id)try{S(!0),await j.suspendSeller(o.user.id,r),F("Seller suspended successfully"),K(!1),b(!1),B(),U()}catch(g){console.error("Failed to suspend seller:",g),_("Failed to suspend seller")}finally{S(!1)}},xe=async()=>{if(o?.user?.id)try{S(!0),await j.unsuspendSeller(o.user.id),F("Seller unsuspended successfully"),$(!1),b(!1),B(),U()}catch(r){console.error("Failed to unsuspend seller:",r),_("Failed to unsuspend seller")}finally{S(!1)}},ue=r=>{if(!r)return null;const g=r.user;return{...g,name:`${g?.first_name||""} ${g?.last_name||""}`.trim()||r.store_name||"Unknown"}};return e.jsxs(pe,{children:[e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Seller Management"}),e.jsx("p",{className:"text-gray-600 mt-2",children:"Manage and monitor all sellers on the platform"})]}),e.jsx(Fe,{stats:l,sellers:s}),e.jsx(Me,{filters:h,onFilterChange:ce,businessTypes:t}),e.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:x?e.jsx("div",{className:"lg:col-span-2 flex items-center justify-center py-12",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-brand-500"})}):s.length===0?e.jsxs("div",{className:"lg:col-span-2 bg-white rounded-xl shadow-xs border border-gray-100 p-12 text-center",children:[e.jsx(k,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"No sellers found"}),(h.search_global||h.status!==""||h.business_type!=="")&&e.jsx("p",{className:"text-sm text-gray-500 mt-2",children:"Try adjusting your filters"})]}):s.map(r=>e.jsx(Pe,{seller:r,onViewDetails:de,onSuspendSeller:I,onUnsuspendSeller:z,onReviewKYC:R},r.id))}),s.length>0&&e.jsx(Ce,{pagination:re,onPageChange:oe})]}),u&&o&&e.jsx(Le,{seller:o,onClose:()=>b(!1),onSuspendSeller:I,onUnsuspendSeller:z,onReviewKYC:R}),e.jsx(fe,{user:ue(o),isOpen:A,onClose:()=>K(!1),onConfirm:me,isLoading:P}),e.jsx(O,{isOpen:Z,onClose:()=>$(!1),onConfirm:xe,title:"Unsuspend Seller",message:`Are you sure you want to unsuspend ${o?.user?`${o.user.first_name} ${o.user.last_name}`:o?.store_name}? This will restore their access to the platform.`,confirmText:"Unsuspend",confirmButtonClass:"bg-green-600 hover:bg-green-700",isLoading:P}),e.jsx(Re,{isOpen:ee,onClose:()=>D(!1),submission:o?.latest_kyc,onConfirm:le,isLoading:!1}),e.jsx(O,{isOpen:te,onClose:()=>Y(!1),onConfirm:ie,title:`${y?.reviewData?.status==="approved"?"Approve":"Reject"} KYC Submission`,message:`Are you sure you want to ${y?.reviewData?.status} this KYC submission? This action cannot be undone.`,confirmText:"Confirm Decision",confirmButtonClass:y?.reviewData?.status==="approved"?"bg-green-600 hover:bg-green-700":"bg-red-600 hover:bg-red-700",isLoading:se})]})};export{Ns as default};
