import{r as n,f as g,j as e,L as m}from"./index-C7G52Pl0.js";import{A as u}from"./AuthLayout-BRca9sUv.js";import{T as j}from"./TextFields-2VSZusUE.js";import{B as y}from"./Button-rTuh0BPh.js";import{f as b}from"./validation-BVSLfvBr.js";import{A as v}from"./arrow-left-Crwr5rsD.js";import"./Logo-DmsMbJO2.js";import"./BackgroundArt-Ct9Pe-Iv.js";import"./house-D2YIMOjc.js";import"./createLucideIcon-BK9ndVRo.js";function P(){const[t,x]=n.useState(""),[a,s]=n.useState({}),[h,c]=n.useState(!1),[o,d]=n.useState(null),{forgotPassword:f}=g(),p=async l=>{l.preventDefault();const i=b(t);if(Object.keys(i).length>0){s(i);return}c(!0),s({});try{const r=await f(t);localStorage.setItem("reset_email",t),d(r)}catch(r){r.errors?s(r.errors):r.message?s({general:r.message}):s({general:"Request failed. Please try again."})}finally{c(!1)}};return o?e.jsx(u,{title:"Check your email",subtitle:`We sent a recovery link to ${t}`,footer:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("p",{className:"text-sm text-gray-500",children:["Didn't receive the email?"," ",e.jsx("button",{onClick:()=>d(null),className:"text-brand-700 font-medium hover:underline focus:outline-none",children:"Click to resend"})]}),e.jsx("p",{children:e.jsx(m,{to:"/login",className:"text-gray-900 font-medium hover:underline",children:"â† Back to sign in"})})]}),children:e.jsxs("div",{className:"text-center space-y-6",children:[e.jsx("div",{className:"flex justify-center",children:e.jsx("div",{className:"bg-green-100 p-4 rounded-full",children:e.jsx("svg",{className:"w-8 h-8 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})})})}),e.jsxs("div",{className:"bg-gray-50 p-5 rounded-xl border border-gray-100 text-left",children:[e.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:"Instructions"}),e.jsx("p",{className:"text-gray-600 text-sm leading-relaxed",children:o.instructions||"Follow the link in your email to reset your password."}),o.expires_in&&e.jsxs("div",{className:"mt-4 pt-3 border-t border-gray-200 flex items-center text-xs text-amber-700 font-medium",children:[e.jsx("svg",{className:"w-4 h-4 mr-1.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),"Link expires in ",o.expires_in]})]})]})}):e.jsx(u,{title:"Reset password?",subtitle:"Enter your email to receive a reset link",footer:e.jsx("p",{children:e.jsxs(m,{to:"/login",className:"text-brand-700 font-medium hover:underline",children:[e.jsx(v,{className:"w-4 h-4 inline-block mr-1"}),"Back to sign in"]})}),children:e.jsxs("form",{onSubmit:p,className:"space-y-5",children:[a.general&&e.jsx("div",{className:"text-sm text-red-600 bg-red-50 p-3 rounded-lg border border-red-100",children:a.general}),e.jsx(j,{label:"Email Address",name:"email",type:"email",placeholder:"you@example.com",value:t,onChange:l=>{x(l.target.value),a.email&&s(i=>({...i,email:""}))},error:a.email}),e.jsx(y,{type:"submit",loading:h,className:"w-full",children:"Send Reset Link"})]})})}export{P as default};
