import{r as i,b as z,s as f,j as e,i as A,e as R,d as N}from"./index-BrJE6Ruv.js";import{a as B,B as O,L as G}from"./DashboardLayout-CbQpQ2VH.js";import{I as x}from"./Input-BSrsX0uX.js";import{D as $}from"./DocumentUpload-C7ZkA6yK.js";import{B as w}from"./Button-NP5qGopO.js";import{U as c}from"./user-BoLJHLaW.js";import{c as Y}from"./createLucideIcon-DTbf89oH.js";import{S as q}from"./save-CUv4tCeF.js";import{S as J}from"./shield-Dym4Nj1d.js";import{K}from"./key-BLKGw7SC.js";import"./Logo-yv9J0Zw_.js";import"./x-89xIXrzd.js";import"./house-B5NBqIRK.js";import"./users-Btkg261Z.js";import"./file-check-BlT-5aXD.js";import"./circle-question-mark-DdVU0ul4.js";import"./star-D0UWI2kz.js";import"./message-circle-CfRGLCSX.js";import"./file-text-DhmWdPlz.js";import"./info-D8IKXDkN.js";import"./BackgroundArt-Cv4ql44m.js";import"./trash-2-DWTUZwMs.js";/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],_=Y("lock",V),ge=()=>{const[d,S]=i.useState("profile"),[P,u]=i.useState(!1),[C,g]=i.useState(!1),D=z(),[o,h]=i.useState(null),[n,b]=i.useState(null),[l,y]=i.useState({first_name:"",last_name:"",email:"",phone_number:""});i.useEffect(()=>{const a=f.getUserData();if(a){const s=a.data||a;b(s),y({first_name:s.first_name||"",last_name:s.last_name||"",email:s.email||"",phone_number:s.phone_number||""})}},[]);const m=a=>{const{name:s,value:r}=a.target;y(t=>({...t,[s]:r}))},U=a=>{a&&a.length>0?h(a[0].file):h(null)},j=(a,s,r)=>{if(s&&typeof s=="object"&&!(s instanceof Date)&&!(s instanceof File))Object.keys(s).forEach(t=>{const v=s[t],p=r?`${r}[${t}]`:t;j(a,v,p)});else if(s!=null){const t=typeof s=="boolean"?s?"1":"0":s;a.append(r,t)}},F=async a=>{a.preventDefault(),g(!0);try{if(!n||!n.id)throw new Error("User data not loaded properly. Please refresh or log in.");const s=n.id,r={...n,first_name:l.first_name,last_name:l.last_name,email:l.email,phone_number:l.phone_number},t=new FormData;t.append("_method","PUT");const{profile_photo:v,...p}=r;j(t,p,""),o&&t.append("profile_photo",o),await A(s,t);const M={data:r};f.setUserData(M),b(r),h(null),R("Profile updated successfully")}catch(s){if(console.error(s),s.response?.data?.errors){const r=Object.values(s.response.data.errors).flat().join(`
`);N(r)}else N(s.message||"Failed to update profile")}finally{g(!1)}},k=()=>{u(!0)},E=()=>{u(!1),f.clearAll(),D("/forgot-password")},L=()=>e.jsx("form",{onSubmit:F,className:"space-y-6",children:e.jsxs("div",{className:"flex flex-col md:flex-row gap-8",children:[e.jsxs("div",{className:"w-full md:w-1/3 flex flex-col space-y-4",children:[!o&&n?.profile_photo&&typeof n.profile_photo=="string"&&e.jsxs("div",{className:"flex flex-col items-center mb-2",children:[e.jsx("span",{className:"text-sm font-medium text-gray-700 mb-2",children:"Current Photo"}),e.jsx("img",{src:n.profile_photo,alt:"Current Profile",className:"w-32 h-32 rounded-full object-cover border border-gray-200"})]}),e.jsx($,{label:"Upload Profile Photo",maxSizeMB:2,maxFiles:1,acceptedTypes:".jpg,.jpeg,.png,.gif",helperText:"JPG, GIF or PNG. Max size 2MB",value:o?[{name:o.name,size:o.size,type:o.type,file:o,id:"temp-id",preview:URL.createObjectURL(o)}]:[],onChange:U})]}),e.jsxs("div",{className:"w-full md:w-2/3 space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(x,{label:"First Name",name:"first_name",value:l.first_name,onChange:m,icon:c,placeholder:"Enter your first name"}),e.jsx(x,{label:"Last Name",name:"last_name",value:l.last_name,onChange:m,icon:c,placeholder:"Enter your last name"})]}),e.jsx(x,{label:"Email Address",name:"email",type:"email",value:l.email,onChange:m,icon:c,placeholder:"name@example.com",disabled:!0,className:"bg-gray-50"}),e.jsx(x,{label:"Phone Number",name:"phone_number",type:"tel",value:l.phone_number,onChange:m,icon:c,placeholder:"+1 (555) 000-0000"}),e.jsx("div",{className:"pt-4 flex justify-end",children:e.jsx(w,{type:"submit",isLoading:C,icon:q,children:"Save Changes"})})]})]})}),T=()=>e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Security Settings"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Manage your password and account security."})]}),e.jsx("div",{className:"h-10 w-10 bg-orange-50 rounded-full flex items-center justify-center",children:e.jsx(J,{className:"h-5 w-5 text-orange-600"})})]}),e.jsx("div",{className:"bg-white border border-gray-200 rounded-lg p-6 hover:border-gray-300 transition-colors",children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"p-3 bg-blue-50 rounded-lg hidden sm:block",children:e.jsx(K,{className:"w-6 h-6 text-blue-600"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"text-base font-semibold text-gray-900",children:"Change Password"}),e.jsx("p",{className:"text-sm text-gray-500 mt-1 mb-4",children:"To ensure the highest level of security, we require you to verify your identity before changing your password. Proceeding will log you out and redirect you to the password reset page."}),e.jsx(w,{type:"button",variant:"outline",onClick:k,className:"border-blue-200 text-blue-700 hover:bg-blue-50 hover:border-blue-300",children:"Change Password"})]})]})}),e.jsx("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-6 opacity-75",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-gray-200 rounded-md",children:e.jsx(_,{className:"w-5 h-5 text-gray-500"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-semibold text-gray-900",children:"Two-Factor Authentication"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Add an extra layer of security to your account."})]})]}),e.jsx("span",{className:"text-xs font-medium bg-gray-200 text-gray-600 px-2 py-1 rounded",children:"Coming Soon"})]})})]}),I=[{id:"profile",label:"Profile Settings",icon:c},{id:"security",label:"Security",icon:_},{id:"notifications",label:"Notifications",icon:O}];return e.jsxs(B,{children:[e.jsxs("div",{className:"max-w-6xl mx-auto",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Settings"}),e.jsx("p",{className:"text-gray-600",children:"Manage your account settings and preferences."})]}),e.jsxs("div",{className:"flex flex-col lg:flex-row gap-6",children:[e.jsx("div",{className:"lg:w-64 shrink-0",children:e.jsx("nav",{className:"space-y-1",children:I.map(a=>e.jsxs("button",{onClick:()=>S(a.id),className:`w-full flex items-center gap-3 px-4 py-3 text-left rounded-lg transition-colors ${d===a.id?"bg-brand-100 text-brand-700 border border-brand-200":"text-gray-600 hover:bg-gray-100"}`,children:[e.jsx(a.icon,{className:"w-5 h-5"}),a.label]},a.id))})}),e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-xs border border-gray-100 p-6",children:[d==="profile"&&L(),d==="security"&&T(),d==="notifications"&&e.jsx("div",{className:"text-center text-gray-500 py-12",children:"Notification settings coming soon"})]})})]})]}),P&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-2xl max-w-md w-full p-6 animate-in fade-in zoom-in duration-200",children:[e.jsx("div",{className:"flex items-center justify-center w-12 h-12 bg-orange-100 rounded-full mx-auto mb-4",children:e.jsx(G,{className:"w-6 h-6 text-orange-600"})}),e.jsx("h3",{className:"text-lg font-bold text-gray-900 text-center mb-2",children:"Change Password?"}),e.jsx("p",{className:"text-gray-500 text-center mb-6 text-sm",children:"You are about to be logged out to securely reset your password via the Forgot Password page. Are you sure you want to proceed?"}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:()=>u(!1),className:"flex-1 px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 font-medium transition-colors",children:"Cancel"}),e.jsx("button",{onClick:E,className:"flex-1 px-4 py-2 bg-brand-600 text-white rounded-lg hover:bg-brand-700 font-medium transition-colors",children:"Yes, Proceed"})]})]})})]})};export{ge as default};
