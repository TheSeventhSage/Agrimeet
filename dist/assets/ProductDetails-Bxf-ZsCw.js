import{a as D,b as V,r as i,j as e,h as I,d as E}from"./index-BOLkSH9S.js";import{D as g}from"./DashboardLayout-BvCakflT.js";import{h as F,t as B}from"./productsApi-Binhdwhq.js";import{A as q}from"./arrow-left-Cgff3Zyj.js";import{S as _}from"./square-pen-0mVU6Zf5.js";import{P as M}from"./package-CKJSu7qp.js";import{S as R}from"./shield-COY4tII9.js";import{c as H}from"./createLucideIcon-Df3o3GTg.js";import"./Logo-g0xKsfJ_.js";import"./x-C2LEswAj.js";import"./house-CbQ0kLy2.js";import"./users-B4SWA-Gw.js";import"./file-check-CwXOnyIx.js";import"./shield-check-BosUqYmL.js";import"./circle-question-mark-CVrBAAd0.js";import"./star-C1ESBnNj.js";import"./message-circle-BHYE61eq.js";import"./file-text-CticlOFV.js";import"./user-CozA4sKy.js";import"./BackgroundArt-ChQV54k0.js";/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],z=H("rotate-ccw",T),xe=()=>{const{id:l}=D(),h=V(),[s,v]=i.useState(null),[w,n]=i.useState(!0),[u,d]=i.useState(null),[b,p]=i.useState(0),[c,k]=i.useState("description"),[o,x]=i.useState(null),[O,S]=i.useState(1);i.useEffect(()=>{(async()=>{if(!l){d("Product ID not found"),n(!1);return}try{n(!0),d(null);const r=await F(l);console.log(r);const a=B(r.data);v(a),Array.isArray(a?.variants)&&a.variants.length>0?x(a.variants[0].id):x(null),Array.isArray(a?.images)&&a.images.length>0&&p(0)}catch(r){console.error("Error fetching product:",r),d(r.message||"Failed to load product details"),E(r.message||"Failed to load product details")}finally{n(!1)}})()},[l]);const P=()=>{h(`/products/edit/${l}`)},j=()=>{h("/products")},m=Array.isArray(s?.variants)&&o?s.variants.find(t=>t.id===o)??null:null,$=Number(m?.stock_quantity??m?.stock??0)||0,y=Number(s?.stock??0),C=s?.price;console.log(s?.price);const f=({status:t})=>{const r={active:{bg:"bg-green-100",text:"text-green-800",label:"Active"},inactive:{bg:"bg-red-100",text:"text-red-800",label:"Inactive"},draft:{bg:"bg-gray-100",text:"text-gray-800",label:"Draft"}},a=r[(t||"").toLowerCase()]||r.draft;return e.jsx("span",{className:`px-3 py-1 rounded-full text-sm font-medium ${a.bg} ${a.text}`,children:a.label})},A=({stock:t,selectedStock:r=null})=>{let a;return t>50?a={dot:"bg-green-500",text:"In Stock",color:"text-green-600"}:t>10?a={dot:"bg-yellow-500",text:"Low Stock",color:"text-yellow-600"}:t>0?a={dot:"bg-orange-500",text:"Very Low",color:"text-orange-600"}:a={dot:"bg-red-500",text:"Out of Stock",color:"text-red-600"},e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`w-3 h-3 rounded-full ${a.dot}`}),e.jsxs("div",{children:[e.jsx("div",{className:`text-sm font-medium ${a.color}`,children:a.text}),e.jsxs("div",{className:"text-xs text-gray-500",children:[t," ",s.unit,"s ",r!=null?` • selected: ${r} units`:""]})]})]})};return w?e.jsx(g,{children:e.jsx("div",{className:"max-w-7xl mx-auto",children:e.jsx("div",{className:"flex items-center justify-center min-h-96",children:e.jsx(I,{})})})}):u||!s?e.jsx(g,{children:e.jsx("div",{className:"max-w-7xl mx-auto",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-xs border border-gray-100 p-8 text-center",children:[e.jsx("div",{className:"text-red-500 mb-4",children:e.jsx("svg",{className:"w-16 h-16 mx-auto mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.732-.833-2.5 0L4.268 18.5c-.77.833.192 2.5 1.732 2.5z"})})}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Failed to load product"}),e.jsx("p",{className:"text-gray-500 mb-4",children:u||"Product not found"}),e.jsx("button",{onClick:j,className:"px-6 py-2 bg-brand-500 text-white rounded-lg hover:bg-brand-600 transition-colors",children:"Back to Products"})]})})}):e.jsx(g,{children:e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsx("div",{className:"mb-8",children:e.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[e.jsxs("button",{onClick:j,className:"flex items-center gap-2 px-4 py-2 text-gray-600 hover:text-gray-900 hover:bg-gray-50 rounded-lg transition-colors",children:[e.jsx(q,{className:"w-5 h-5"}),"Back to Products"]}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Product Details"}),e.jsx("p",{className:"text-gray-600",children:"View and manage product information"})]}),e.jsxs("button",{onClick:P,className:"flex items-center gap-2 px-6 py-2 bg-brand-500 text-white rounded-lg hover:bg-brand-600 transition-colors",children:[e.jsx(_,{className:"w-4 h-4"}),"Edit Product"]})]})}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8 mb-8",children:[e.jsx("div",{className:"bg-white rounded-xl shadow-xs border border-gray-100 p-6",children:e.jsxs("div",{className:"flex flex-col gap-6",children:[e.jsx("div",{className:"aspect-square rounded-xl bg-gray-100 overflow-hidden",children:e.jsx("img",{src:Array.isArray(s?.images)&&s.images[b]||s?.image||s?.thumbnail||"",alt:s?.name,className:"w-full h-full object-cover transition-opacity duration-300",onError:t=>{t.target.src=`data:image/svg+xml;base64,${btoa(`
                                            <svg width="400" height="400" viewBox="0 0 400 400" fill="none" xmlns="http://www.w3.org/2000/svg">
                                                <rect width="400" height="400" fill="#f3f4f6"/>
                                                <path d="M200 100L160 140H120C110 140 100 150 100 160V260C100 270 110 280 120 280H280C290 280 300 270 300 260V160C300 150 290 140 280 140H240L200 100ZM200 250C172 250 150 228 150 200C150 172 172 150 200 150C228 150 250 172 250 200C250 228 228 250 200 250Z" fill="#9ca3af"/>
                                            </svg>
                                        `)}`}})}),Array.isArray(s?.images)&&s.images.length>1&&e.jsx("div",{className:"flex gap-3 overflow-x-auto pb-2",children:s.images.map((t,r)=>e.jsx("button",{onClick:()=>p(r),className:`flex-shrink-0 w-20 h-20 rounded-lg overflow-hidden border-2 transition-all ${b===r?"border-brand-500 ring-2 ring-brand-100":"border-gray-200 hover:border-gray-300"}`,children:e.jsx("img",{src:t,alt:`${s.name} ${r+1}`,className:"w-full h-full object-cover"})},r))})]})}),e.jsx("div",{className:"bg-white rounded-xl shadow-xs border border-gray-100 p-6",children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:s.name}),e.jsx(f,{status:s.status})]}),e.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-500",children:[e.jsxs("span",{children:["Slug: ",s.slug||"N/A"]}),e.jsxs("span",{children:["SKU: ",s.sku||"N/A"]}),e.jsx("span",{children:"•"}),e.jsxs("span",{children:["Category: ",s.category??"—"]})]})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("span",{className:"text-3xl font-bold text-gray-900",children:["$",Number(C??0).toFixed(2)]}),s.originalPrice&&s.originalPrice>(s.discountedPrice||s.price)&&e.jsxs(e.Fragment,{children:[e.jsxs("span",{className:"text-xl text-gray-500 line-through",children:["$",s.originalPrice]}),e.jsxs("span",{className:"px-2 py-1 bg-red-100 text-red-800 text-sm font-medium rounded-full",children:[s.discount,"% OFF"]})]}),e.jsxs("span",{className:"text-sm text-gray-500",children:["per ",s.unitSymbol||s.unit||s.unit?.symbol||""]})]}),e.jsx(A,{stock:y,selectedStock:m?$:null}),Array.isArray(s?.variants)&&s.variants.length>0&&e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium text-gray-700 mb-2",children:"Varieties"}),e.jsx("div",{className:"flex gap-2 overflow-x-auto pb-2",children:s.variants.map(t=>{const r=Number(t?.stock_quantity??t?.stock??0)||0,a=r<=0,L=o===t.id;return e.jsxs("button",{onClick:()=>{x(t.id),S(1)},disabled:a,className:`flex-shrink-0 px-3 py-2 rounded-lg border transition-all text-left min-w-[150px]
                                                        ${L?"border-brand-500 bg-brand-50":"border-gray-200 hover:border-gray-300"}
                                                        ${a?"opacity-50 cursor-not-allowed":""}`,children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"text-sm font-medium",children:t.name||t.sku||`Variety ${t.id}`}),e.jsxs("div",{className:"text-sm font-semibold",children:["$",Number(t.price??0).toFixed(2)]})]}),e.jsx("div",{className:"text-xs text-gray-500 mt-1",children:t.attribute_values?t.attribute_values.map(N=>`${N.attribute}: ${N.value}`).join(" • "):""}),e.jsxs("div",{className:"text-xs text-gray-400 mt-1",children:[r," ",t.unit?.symbol??s.unit??""," available"]})]},t.id)})})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Description"}),e.jsx("p",{className:"text-gray-600 line-clamp-3",children:s.description||"No description available."})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"flex items-center gap-3 p-3 bg-gray-50 rounded-lg",children:[e.jsx(M,{className:"w-5 h-5 text-brand-500"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:"Total Stock"}),e.jsx("div",{className:"text-xs text-gray-500",children:s.stock})]})]}),e.jsxs("div",{className:"flex items-center gap-3 p-3 bg-gray-50 rounded-lg",children:[e.jsx(R,{className:"w-5 h-5 text-brand-500"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:"Weight"}),e.jsx("div",{className:"text-xs text-gray-500",children:s.weight})]})]}),e.jsxs("div",{className:"flex items-center gap-3 p-3 bg-gray-50 rounded-lg",children:[e.jsx(z,{className:"w-5 h-5 text-brand-500"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:"Returns"}),e.jsx("div",{className:"text-xs text-gray-500",children:"No Returns"})]})]})]})]})})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-xs border border-gray-100",children:[e.jsx("div",{className:"border-b border-gray-200",children:e.jsx("nav",{className:"flex gap-8 px-6",children:["description","specifications"].map(t=>e.jsx("button",{onClick:()=>k(t),className:`py-4 px-1 border-b-2 font-medium text-sm capitalize transition-colors ${c===t?"border-brand-500 text-brand-600":"border-transparent text-gray-500 hover:text-gray-700"}`,children:t},t))})}),e.jsxs("div",{className:"p-6",children:[c==="description"&&e.jsxs("div",{className:"prose max-w-none",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Product Description"}),e.jsx("p",{className:"text-gray-600 leading-relaxed",children:s.description||"No detailed description available for this product."})]}),c==="specifications"&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Product Details"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between py-2 border-b border-gray-100",children:[e.jsx("span",{className:"text-gray-500",children:"Category"}),e.jsx("span",{className:"font-medium text-gray-900",children:s.category})]}),e.jsxs("div",{className:"flex justify-between py-2 border-b border-gray-100",children:[e.jsx("span",{className:"text-gray-500",children:"Unit"}),e.jsx("span",{className:"font-medium text-gray-900",children:s.unit??s.unitSymbol})]}),e.jsxs("div",{className:"flex justify-between py-2 border-b border-gray-100",children:[e.jsx("span",{className:"text-gray-500",children:"Slug"}),e.jsx("span",{className:"font-medium text-gray-900",children:s.slug||"N/A"})]}),e.jsxs("div",{className:"flex justify-between py-2 border-b border-gray-100",children:[e.jsx("span",{className:"text-gray-500",children:"Status"}),e.jsx(f,{status:s.status})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Pricing & Inventory"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between py-2 border-b border-gray-100",children:[e.jsx("span",{className:"text-gray-500",children:"Base Price"}),e.jsxs("span",{className:"font-medium text-gray-900",children:["$",s.originalPrice??s.price]})]}),s.discount>0&&e.jsxs("div",{className:"flex justify-between py-2 border-b border-gray-100",children:[e.jsx("span",{className:"text-gray-500",children:"Discount Price"}),e.jsxs("span",{className:"font-medium text-green-600",children:["$",s.discount]})]}),e.jsxs("div",{className:"flex justify-between py-2 border-b border-gray-100",children:[e.jsx("span",{className:"text-gray-500",children:"Stock Quantity"}),e.jsxs("span",{className:"font-medium text-gray-900",children:[y," units"]})]}),e.jsxs("div",{className:"flex justify-between py-2 border-b border-gray-100",children:[e.jsx("span",{className:"text-gray-500",children:"Varieties"}),e.jsx("span",{className:"font-medium text-gray-900",children:s.variants.length})]})]})]})]})]})]})]})})};export{xe as default};
