import{s as Ne,r,j as e,e as D,d as V}from"./index-BOLkSH9S.js";import{P as re,f as he,D as we}from"./DashboardLayout-BvCakflT.js";import{C as ie}from"./ConfirmationModal-cvEjaG2Q.js";import{P as le}from"./Pagination-8iEX1b1X.js";import{L as H}from"./loader-circle-MnlzbvQH.js";import{C as de}from"./star-C1ESBnNj.js";import{P as oe}from"./pen-BRCIE4vx.js";import{T as ne}from"./trash-2-Euhy1XCH.js";import{B as pe}from"./briefcase-CFidSbzh.js";import{S as ve}from"./search-Ckn77Lrt.js";import{c as ce}from"./createLucideIcon-Df3o3GTg.js";import{I as Ce}from"./image-CTXW8DrQ.js";import{C as Se}from"./package-CKJSu7qp.js";import{B as xe}from"./Button-DPYyXRjf.js";import{X as Me}from"./x-C2LEswAj.js";import"./Logo-g0xKsfJ_.js";import"./house-CbQ0kLy2.js";import"./users-B4SWA-Gw.js";import"./file-check-CwXOnyIx.js";import"./shield-check-BosUqYmL.js";import"./circle-question-mark-CVrBAAd0.js";import"./message-circle-BHYE61eq.js";import"./file-text-CticlOFV.js";import"./user-CozA4sKy.js";import"./BackgroundArt-ChQV54k0.js";import"./chevron-left-B0iQB9Pm.js";/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ke=[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}]],ge=ce("layout-grid",ke);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Te=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]],Ee=ce("pencil",Te);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ae=[["path",{d:"M13.172 2a2 2 0 0 1 1.414.586l6.71 6.71a2.4 2.4 0 0 1 0 3.408l-4.592 4.592a2.4 2.4 0 0 1-3.408 0l-6.71-6.71A2 2 0 0 1 6 9.172V3a1 1 0 0 1 1-1z",key:"16rjxf"}],["path",{d:"M2 7v6.172a2 2 0 0 0 .586 1.414l6.71 6.71a2.4 2.4 0 0 0 3.191.193",key:"178nd4"}],["circle",{cx:"10.5",cy:"6.5",r:".5",fill:"currentColor",key:"12ikhr"}]],Pe=ce("tags",Ae),g="https://agrimeetbackend.agrimeetconnect.com/api/v1",_e=()=>Ne.getAccessToken()||"",y=(t=!0)=>{const s={Authorization:`Bearer ${_e()}`,Accept:"application/json"};return t&&(s["Content-Type"]="application/json"),s},b=async t=>{if(!t.ok){let s;try{s=await t.json()}catch{s={message:"An unknown error occurred."}}const l=new Error(s.message||`Error ${t.status}`);throw l.status=t.status,l.data=s,l}return t.status===204?null:t.json()},Ie=(t={})=>{const s=Object.fromEntries(Object.entries(t).filter(([c,m])=>m!=null&&m!=="")),l=new URLSearchParams(s).toString();return l?`?${l}`:""},$=t=>t?.data?.errors?Object.values(t.data.errors).flat().join(" "):t?.data?.message?t.data.message:t?.message?t.message:"Something went wrong. Please try again.",te={async getAll(){const t=await fetch(`${g}/admin/units`,{method:"GET",headers:y()});return b(t)},async create(t){const s=await fetch(`${g}/admin/units`,{method:"POST",headers:y(),body:JSON.stringify(t)});return b(s)},async update(t,s){const l=await fetch(`${g}/admin/units/${t}`,{method:"POST",headers:y(),body:JSON.stringify(s)});return b(l)},async delete(t){const s=await fetch(`${g}/admin/units/${t}`,{method:"DELETE",headers:y()});return b(s)}},se={async getAll(){const t=await fetch(`${g}/admin/business_types`,{method:"GET",headers:y()});return b(t)},async create(t){const s=await fetch(`${g}/admin/business_types`,{method:"POST",headers:y(),body:JSON.stringify(t)});return b(s)},async update(t,s){const l=await fetch(`${g}/admin/business_types/${t}`,{method:"PUT",headers:y(),body:JSON.stringify(s)});return b(l)},async delete(t){const s=await fetch(`${g}/admin/business_types/${t}`,{method:"DELETE",headers:y()});return b(s)}},W={async getAll(t={}){t.page&&!t.per_page&&(t.per_page=12);const s=Ie(t),l=await fetch(`${g}/admin/categories${s}`,{method:"GET",headers:y()});return b(l)},async getSubcategories(t){const s=await fetch(`${g}/admin/subcategories/${t}`,{method:"GET",headers:y()});return b(s)},async getOne(t){const s=await fetch(`${g}/admin/categories/${t}`,{method:"GET",headers:y()});return b(s)},async create(t){const s=await fetch(`${g}/admin/categories`,{method:"POST",headers:y(!1),body:t});return b(s)},async update(t,s){s.append("_method","PUT");const l=await fetch(`${g}/admin/categories/${t}`,{method:"POST",headers:y(!1),body:s});return b(l)},async delete(t){const s=await fetch(`${g}/admin/categories/${t}`,{method:"DELETE",headers:y()});return b(s)}},ae={async list(t){const s=await fetch(`${g}/seller/product-attributes`,{method:"GET",headers:y()});return b(s)},async get(t){const s=await fetch(`${g}/admin/product-attributes/${t}`,{method:"GET",headers:y()});return b(s)},async create(t){const s=await fetch(`${g}/admin/product-attributes`,{method:"POST",headers:y(),body:JSON.stringify(t)});return b(s)},async update(t,s){const l=await fetch(`${g}/admin/product-attributes/${t}`,{method:"PUT",headers:y(),body:JSON.stringify(s)});return b(l)},async delete(t){const s=await fetch(`${g}/admin/product-attributes/${t}`,{method:"DELETE",headers:y()});return s.status===204?!0:b(s)}},Y=12,Oe=()=>{const[t,s]=r.useState([]),[l,c]=r.useState(!0),[m,d]=r.useState(null),[u,h]=r.useState(1),v=Math.ceil(t.length/Y),F=r.useMemo(()=>{const a=(u-1)*Y,o=a+Y;return t.slice(a,o)},[t,u]),j={current_page:u,last_page:v,from:t.length>0?(u-1)*Y+1:0,to:Math.min(u*Y,t.length),total:t.length},[k,p]=r.useState(!1),[N,T]=r.useState(!1),[C,S]=r.useState("create"),[L,I]=r.useState(null),[w,n]=r.useState({name:"",symbol:""}),[f,E]=r.useState({}),[P,U]=r.useState({isOpen:!1,itemId:null});r.useEffect(()=>{M()},[]);const M=async()=>{try{c(!0),d(null);const a=await te.getAll();s(a.data||[]),h(1)}catch(a){d($(a))}finally{c(!1)}},A=a=>{h(a)},B=()=>{S("create"),I(null),n({name:"",symbol:""}),E({}),d(null),p(!0)},z=a=>{S("edit"),I(a),n({_method:"PUT",name:a.name,symbol:a.symbol}),E({}),d(null),p(!0)},G=()=>{p(!1),d(null)},O=a=>{const{name:o,value:_}=a.target;n(K=>({...K,[o]:_}))},R=async a=>{a.preventDefault(),T(!0),E({}),d(null);try{C==="create"?await te.create(w):await te.update(L.id,w),M(),G()}catch(o){const _=$(o);d(_),o.data?.errors&&E(o.data.errors)}finally{T(!1)}},Q=a=>{U({isOpen:!0,itemId:a})},q=()=>{U({isOpen:!1,itemId:null})},X=async()=>{if(P.itemId)try{await te.delete(P.itemId),M()}catch(a){const o=$(a);d(o)}finally{q()}};return l?e.jsx("div",{className:"flex justify-center items-center p-10",children:e.jsx(H,{className:"w-8 h-8 animate-spin text-brand-600"})}):m&&!k?e.jsxs("div",{className:"text-center p-10 bg-red-50 border border-red-200 rounded-lg",children:[e.jsx(de,{className:"w-12 h-12 text-red-500 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-red-700",children:"Failed to load data"}),e.jsx("p",{className:"text-red-600 mt-2",children:m}),e.jsx("button",{onClick:M,className:"mt-4 px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700",children:"Try Again"})]}):e.jsxs("div",{className:"bg-white rounded-xl shadow-xs border border-gray-100 p-4 md:p-6",children:[e.jsxs("div",{className:"flex flex-col gap-3 justify-between mb-6 md:flex-row md:items-center",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"All Units"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Manage product measurement units"})]}),e.jsxs("button",{onClick:B,className:"flex items-center justify-center gap-2 px-4 py-2 bg-brand-600 text-white rounded-lg hover:bg-brand-700",children:[e.jsx(re,{className:"w-5 h-5"}),"Create Unit"]})]}),t.length===0?e.jsxs("div",{className:"text-center py-12 border-2 border-dashed border-gray-200 rounded-lg",children:[e.jsx(he,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"No units found"}),e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Get started by creating a new unit."})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"overflow-x-auto border border-gray-200 rounded-lg",children:e.jsxs("table",{className:"w-full text-left",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-xs font-medium text-gray-600 uppercase",children:"Name"}),e.jsx("th",{className:"px-4 py-3 text-xs font-medium text-gray-600 uppercase",children:"Symbol"}),e.jsx("th",{className:"px-4 py-3 text-xs font-medium text-gray-600 uppercase text-right",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:F.map(a=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-4 py-3 text-sm font-medium text-gray-900",children:a.name}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-700",children:a.symbol}),e.jsxs("td",{className:"px-4 py-3 text-sm text-right space-x-2",children:[e.jsx("button",{onClick:()=>z(a),className:"p-2 text-blue-600 hover:text-blue-800",children:e.jsx(oe,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>Q(a.id),className:"p-2 text-red-600 hover:text-red-800",children:e.jsx(ne,{className:"w-4 h-4"})})]})]},a.id))})]})}),e.jsx(le,{pagination:j,onPageChange:A})]}),k&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex justify-center items-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl p-6 w-full max-w-md",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:C==="create"?"Create New Unit":"Edit Unit"}),m&&e.jsx("div",{className:"bg-red-50 text-red-700 p-3 rounded-lg mb-4 text-sm",children:m}),e.jsxs("form",{onSubmit:R,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700",children:"Name"}),e.jsx("input",{type:"text",id:"name",name:"name",value:w.name,onChange:O,className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm",required:!0}),f.name&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:f.name[0]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"symbol",className:"block text-sm font-medium text-gray-700",children:"Symbol"}),e.jsx("input",{type:"text",id:"symbol",name:"symbol",value:w.symbol,onChange:O,className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm"}),f.symbol&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:f.symbol[0]})]}),e.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[e.jsx("button",{type:"button",onClick:G,className:"px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:N,className:"px-4 py-2 bg-brand-600 text-white rounded-lg hover:bg-brand-700 disabled:opacity-50",children:N?e.jsx(H,{className:"w-4 h-4 animate-spin"}):C==="create"?"Create":"Update"})]})]})]})}),e.jsx(ie,{isOpen:P.isOpen,onClose:q,onConfirm:X,title:"Delete Unit",message:"Are you sure you want to delete this unit? This action cannot be undone.",type:"danger",confirmText:"Delete"})]})},ee=12,De=()=>{const[t,s]=r.useState([]),[l,c]=r.useState(!0),[m,d]=r.useState(null),[u,h]=r.useState(1),v=Math.ceil(t.length/ee),F=r.useMemo(()=>{const a=(u-1)*ee,o=a+ee;return t.slice(a,o)},[t,u]),j={current_page:u,last_page:v,from:t.length>0?(u-1)*ee+1:0,to:Math.min(u*ee,t.length),total:t.length},[k,p]=r.useState(!1),[N,T]=r.useState(!1),[C,S]=r.useState("create"),[L,I]=r.useState(null),[w,n]=r.useState({name:"",description:""}),[f,E]=r.useState({}),[P,U]=r.useState({isOpen:!1,itemId:null});r.useEffect(()=>{M()},[]);const M=async()=>{try{c(!0),d(null);const a=await se.getAll();s(a.data||[]),h(1)}catch(a){d($(a))}finally{c(!1)}},A=a=>{h(a)},B=()=>{S("create"),I(null),n({name:"",description:""}),E({}),d(null),p(!0)},z=a=>{S("edit"),I(a),n({name:a.name,description:a.description||""}),E({}),d(null),p(!0)},G=()=>{p(!1),d(null)},O=a=>{const{name:o,value:_}=a.target;n(K=>({...K,[o]:_}))},R=async a=>{a.preventDefault(),T(!0),E({}),d(null);try{C==="create"?(await se.create(w),D("Business Type created successfully!",2500)):(await se.update(L.id,w),D("Business Type updated successfully!",2500)),M(),G()}catch(o){const _=$(o);d(_),o.data?.errors&&E(o.data.errors)}finally{T(!1)}},Q=a=>{U({isOpen:!0,itemId:a})},q=()=>{U({isOpen:!1,itemId:null})},X=async()=>{if(P.itemId)try{await se.delete(P.itemId),D("Business type deleted successfully!",2500),M()}catch(a){const o=$(a);d(o),V(o,2500)}finally{q()}};return l?e.jsx("div",{className:"flex justify-center items-center p-10",children:e.jsx(H,{className:"w-8 h-8 animate-spin text-brand-600"})}):m&&!k?e.jsxs("div",{className:"text-center p-10 bg-red-50 border border-red-200 rounded-lg",children:[e.jsx(de,{className:"w-12 h-12 text-red-500 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-red-700",children:"Failed to load data"}),e.jsx("p",{className:"text-red-600 mt-2",children:m}),e.jsx("button",{onClick:M,className:"mt-4 px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700",children:"Try Again"})]}):e.jsxs("div",{className:"bg-white rounded-xl shadow-xs border border-gray-100 p-3 md:p-6",children:[e.jsxs("div",{className:"flex flex-col gap-3 justify-between mb-6 md:flex-row md:items-center",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"All Business Types"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Manage seller business classifications"})]}),e.jsxs("button",{onClick:B,className:"flex items-center gap-2 px-4 py-2 bg-brand-600 text-white justify-center rounded-lg hover:bg-brand-700",children:[e.jsx(re,{className:"w-5 h-5"}),"Create Type"]})]}),t.length===0?e.jsxs("div",{className:"text-center py-12 border-2 border-dashed border-gray-200 rounded-lg",children:[e.jsx(pe,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"No business types found"}),e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Get started by creating a new type."})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"overflow-x-auto border border-gray-200 rounded-lg mb-5",children:e.jsxs("table",{className:"w-full text-left",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-xs font-medium text-gray-600 uppercase",children:"Name"}),e.jsx("th",{className:"px-4 py-3 text-xs font-medium text-gray-600 uppercase",children:"Description"}),e.jsx("th",{className:"px-4 py-3 text-xs font-medium text-gray-600 uppercase text-right",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:F.map(a=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-4 py-3 text-sm font-medium text-gray-900",children:a.name}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-700 max-w-md truncate",children:a.description||"—"}),e.jsxs("td",{className:"px-4 py-3 text-sm text-right space-x-2",children:[e.jsx("button",{onClick:()=>z(a),className:"p-2 text-blue-600 hover:text-blue-800",children:e.jsx(oe,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>Q(a.id),className:"p-2 text-red-600 hover:text-red-800",children:e.jsx(ne,{className:"w-4 h-4"})})]})]},a.id))})]})}),e.jsx(le,{pagination:j,onPageChange:A})]}),k&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex justify-center items-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl p-6 w-full max-w-md",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:C==="create"?"Create New Business Type":"Edit Business Type"}),m&&e.jsx("div",{className:"bg-red-50 text-red-700 p-3 rounded-lg mb-4 text-sm",children:m}),e.jsxs("form",{onSubmit:R,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700",children:"Name"}),e.jsx("input",{type:"text",id:"name",name:"name",value:w.name,onChange:O,className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm",required:!0}),f.name&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:f.name[0]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"description",className:"block text-sm font-medium text-gray-700",children:"Description"}),e.jsx("textarea",{id:"description",name:"description",rows:"3",value:w.description,onChange:O,className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm"}),f.description&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:f.description[0]})]}),e.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[e.jsx("button",{type:"button",onClick:G,className:"px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:N,className:"px-4 py-2 bg-brand-600 text-white rounded-lg hover:bg-brand-700 disabled:opacity-50",children:N?e.jsx(H,{className:"w-4 h-4 animate-spin"}):C==="create"?"Create":"Update"})]})]})]})}),e.jsx(ie,{isOpen:P.isOpen,onClose:q,onConfirm:X,title:"Delete Business Type",message:"Are you sure you want to delete this business type? This action cannot be undone.",type:"danger",confirmText:"Delete"})]})},$e="/assets/fruits-BmVEZ2Pd.png",ye=({category:t,level:s=0,onEdit:l,onDelete:c,parentCategories:m})=>{const[d,u]=r.useState(!1),h=t.children&&t.children.length>0;return m.find(v=>v.id===t.parent_id),e.jsxs(e.Fragment,{children:[e.jsxs("tr",{className:`hover:bg-gray-50 ${s>0?"bg-gray-50/50":""}`,children:[e.jsx("td",{className:"px-4 py-2 text-sm font-medium text-gray-900",style:{paddingLeft:`${1+s*2}rem`},children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"w-5 flex-shrink-0",children:h&&e.jsx("button",{onClick:()=>u(!d),className:"p-1 rounded-full hover:bg-gray-200",children:e.jsx(Se,{className:`w-4 h-4 transition-transform ${d?"rotate-90":""}`})})}),e.jsx("img",{src:t.image_url||$e,alt:t.name,className:"w-4 h-4 rounded-md object-cover flex-shrink-0"}),e.jsx("span",{className:"truncate",children:t.name})]})}),e.jsx("td",{className:"px-4 py-2 text-sm text-gray-700",children:t?.slug||"—"}),e.jsx("td",{className:"px-4 py-2 text-sm text-gray-700 max-w-sm truncate",children:t.description||"—"}),e.jsxs("td",{className:"px-4 py-2 text-sm text-right space-x-2",children:[e.jsx("button",{onClick:()=>l(t),className:"p-2 text-blue-600 hover:text-blue-800",children:e.jsx(oe,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>c(t.id),className:"p-2 text-red-600 hover:text-red-800",children:e.jsx(ne,{className:"w-4 h-4"})})]})]}),d&&h&&t.children.map(v=>e.jsx(ye,{category:v,level:s+1,onEdit:l,onDelete:c,parentCategories:m},v.id))]})},Fe=()=>{const[t,s]=r.useState([]),[l,c]=r.useState([]),[m,d]=r.useState(!0),[u,h]=r.useState(null),[v,F]=r.useState(null),[j,k]=r.useState({name:"",parent_id:"",page:1,per_page:12}),[p,N]=r.useState(!1),[T,C]=r.useState(!1),[S,L]=r.useState("create"),[I,w]=r.useState(null),[n,f]=r.useState({name:"",description:"",parent_id:""}),[E,P]=r.useState(null),[U,M]=r.useState(null),[A,B]=r.useState({}),[z,G]=r.useState({isOpen:!1,itemId:null});r.useEffect(()=>{O()},[j]),r.useEffect(()=>{R()},[]);const O=async()=>{try{d(!0),h(null);const i=await W.getAll(j);s(i.data||[]),F(i.meta||null)}catch(i){h($(i))}finally{d(!1)}},R=async()=>{try{const i=await W.getAll({per_page:200,parent_id:""});c(i.data.filter(x=>x.parent_id===null)||[])}catch(i){console.error("Failed to load parent categories:",i)}},Q=i=>{const{name:x,value:J}=i.target;k(Z=>({...Z,[x]:J,page:1}))},q=i=>{k(x=>({...x,page:i}))},X=()=>{L("create"),w(null),f({name:"",description:"",parent_id:""}),P(null),M(null),B({}),h(null),N(!0)},a=i=>{L("edit"),w(i),f({name:i.name,description:i.description||"",parent_id:i.parent_id||""}),P(null),M(i.image_url||null),B({}),h(null),N(!0)},o=()=>{N(!1),h(null)},_=i=>{const{name:x,value:J}=i.target;f(Z=>({...Z,[x]:J}))},K=i=>{const x=i.target.files[0];x&&(P(x),M(URL.createObjectURL(x)))},be=async i=>{i.preventDefault(),C(!0),B({}),h(null);const x=new FormData;x.append("name",n.name),x.append("description",n.description||""),n.parent_id&&x.append("parent_id",n.parent_id),E&&x.append("image",E);try{S==="create"?(await W.create(x),D("Category created successfully!",2500)):(await W.update(I.id,x),D("Category updated successfully!",2500)),O(),R(),o()}catch(J){const Z=$(J);h(Z),V(Z,2500),J.data?.errors&&B(J.data.errors)}finally{C(!1)}},fe=i=>{G({isOpen:!0,itemId:i})},me=()=>{G({isOpen:!1,itemId:null})},je=async()=>{if(z.itemId)try{await W.delete(z.itemId),D("Category deleted successfully!",2500),O(),R()}catch(i){const x=$(i);h(x),V(x,2500)}finally{me()}};return m&&!p?e.jsx("div",{className:"flex justify-center items-center p-10",children:e.jsx(H,{className:"w-8 h-8 animate-spin text-brand-600"})}):u&&!p?e.jsxs("div",{className:"text-center p-10 bg-red-50 border border-red-200 rounded-lg",children:[e.jsx(de,{className:"w-12 h-12 text-red-500 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-red-700",children:"Failed to load data"}),e.jsx("p",{className:"text-red-600 mt-2",children:u}),e.jsx("button",{onClick:O,className:"mt-4 px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700",children:"Try Again"})]}):e.jsxs("div",{className:"bg-white rounded-xl shadow-xs border border-gray-100 p-2 md:p-6",children:[e.jsxs("div",{className:"flex flex-col md:flex-row items-center justify-between gap-4 mb-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"All Categories"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Manage product categories and subcategories"})]}),e.jsxs("button",{onClick:X,className:"flex w-full md:w-auto items-center justify-center gap-2 px-4 py-2 bg-brand-600 text-white rounded-lg hover:bg-brand-700",children:[e.jsx(re,{className:"w-5 h-5"}),"Create Category"]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-6",children:[e.jsxs("div",{className:"relative",children:[e.jsx(ve,{className:"w-5 h-5 text-gray-400 absolute left-3 top-1/2 -translate-y-1/2"}),e.jsx("input",{type:"text",name:"name",value:j.name,onChange:Q,placeholder:"Search by name...",className:"pl-10 pr-4 py-2 w-full border border-gray-300 rounded-lg"})]}),e.jsxs("select",{name:"parent_id",value:j.parent_id,onChange:Q,className:"w-full px-4 py-2 border border-gray-300 rounded-lg bg-white",children:[e.jsx("option",{value:"",children:"Filter by Parent Category"}),l.map(i=>e.jsx("option",{value:i.id,children:i.name},i.id))]})]}),t.length===0&&!m?e.jsxs("div",{className:"text-center py-12 border-2 border-dashed border-gray-200 rounded-lg",children:[e.jsx(ge,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"No categories found"}),e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:j.name||j.parent_id?"Try adjusting your filters.":"Get started by creating a new category."})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"overflow-x-auto border border-gray-200 rounded-lg",children:e.jsxs("table",{className:"w-full text-left",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-xs font-medium text-gray-600 uppercase",children:"Name"}),e.jsx("th",{className:"px-4 py-3 text-xs font-medium text-gray-600 uppercase",children:"Parent"}),e.jsx("th",{className:"px-4 py-3 text-xs font-medium text-gray-600 uppercase",children:"Description"}),e.jsx("th",{className:"px-4 py-3 text-xs font-medium text-gray-600 uppercase text-right",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:t.map(i=>e.jsx(ye,{category:i,onEdit:a,onDelete:fe,parentCategories:l},i.id))})]})}),v&&e.jsx(le,{pagination:v,onPageChange:q})]}),p&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex justify-center items-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl p-6 w-full max-w-lg max-h-[90vh] overflow-y-auto",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:S==="create"?"Create New Category":"Edit Category"}),u&&e.jsx("div",{className:"bg-red-50 text-red-700 p-3 rounded-lg mb-4 text-sm",children:u}),e.jsxs("form",{onSubmit:be,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700",children:"Name"}),e.jsx("input",{type:"text",id:"name",name:"name",value:n.name,onChange:_,className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm",required:!0}),A.name&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:A.name[0]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"description",className:"block text-sm font-medium text-gray-700",children:"Description"}),e.jsx("textarea",{id:"description",name:"description",rows:"3",value:n.description,onChange:_,className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm"}),A.description&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:A.description[0]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"parent_id",className:"block text-sm font-medium text-gray-700",children:"Parent Category"}),e.jsxs("select",{id:"parent_id",name:"parent_id",value:n.parent_id,onChange:_,className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm bg-white",children:[e.jsx("option",{value:"",children:"None (Main Category)"}),l.filter(i=>i.id!==I?.id).map(i=>e.jsx("option",{value:i.id,children:i.name},i.id))]}),A.parent_id&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:A.parent_id[0]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Image"}),e.jsxs("div",{className:"mt-1 flex items-center gap-4",children:[U?e.jsx("img",{src:U,alt:"Preview",className:"w-20 h-20 rounded-lg object-cover"}):e.jsx("div",{className:"w-20 h-20 rounded-lg bg-gray-100 flex items-center justify-center",children:e.jsx(Ce,{className:"w-8 h-8 text-gray-400"})}),e.jsx("input",{type:"file",id:"image",name:"image",accept:"image/*",onChange:K,className:`block w-full text-sm text-gray-500\r
                                            file:mr-4 file:py-2 file:px-4\r
                                            file:rounded-lg file:border-0\r
                                            file:text-sm file:font-semibold\r
                                            file:bg-brand-50 file:text-brand-700\r
                                            hover:file:bg-brand-100`})]}),A.image&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:A.image[0]})]}),e.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[e.jsx("button",{type:"button",onClick:o,className:"px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:T,className:"px-4 py-2 bg-brand-600 text-white rounded-lg hover:bg-brand-700 disabled:opacity-50",children:T?e.jsx(H,{className:"w-4 h-4 animate-spin"}):S==="create"?"Create":"Update"})]})]})]})}),e.jsx(ie,{isOpen:z.isOpen,onClose:me,onConfirm:je,title:"Delete Category",message:"Are you sure you want to delete this category? Deleting a parent category may affect subcategories. This action cannot be undone.",type:"danger",confirmText:"Delete"})]})},Le=()=>{const[t,s]=r.useState([]),[l,c]=r.useState(!0),[m,d]=r.useState(""),[u,h]=r.useState(!1),[v,F]=r.useState(!1),[j,k]=r.useState(null),[p,N]=r.useState({name:"",description:""});r.useEffect(()=>{T()},[]);const T=async()=>{try{c(!0);const n=await ae.list();s(n.data||n)}catch(n){console.error("Error fetching attributes:",n)}finally{c(!1)}},C=(n=null)=>{n?(k(n.id),N({name:n.name,description:n.description||""})):(k(null),N({name:"",description:""})),h(!0)},S=()=>{h(!1),k(null),N({name:"",description:""})},L=async n=>{if(n.preventDefault(),!p.name.trim()){V("Attribute name is required");return}try{F(!0),j?(await ae.update(j,p),D("Attribute updated successfully")):(await ae.create(p),D("Attribute created successfully")),T(),S()}catch(f){console.error("Error saving attribute:",f),V(f.message||"Failed to save attribute")}finally{F(!1)}},I=async n=>{if(window.confirm("Are you sure you want to delete this attribute?"))try{await ae.delete(n),D("Attribute deleted successfully"),T()}catch(f){console.error("Error deleting attribute:",f),V("Failed to delete attribute")}},w=t.filter(n=>n.name.toLowerCase().includes(m.toLowerCase())||n.description&&n.description.toLowerCase().includes(m.toLowerCase()));return e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"flex flex-col sm:flex-row justify-end items-start sm:items-center gap-4",children:e.jsxs(xe,{onClick:()=>C(),children:[e.jsx(re,{className:"w-4 h-4 mr-2"}),"Add Attribute"]})}),e.jsx("div",{className:"bg-white border border-gray-200 rounded-xl overflow-hidden shadow-sm",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-left",children:[e.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-4 text-xs font-semibold text-gray-500 uppercase tracking-wider",children:"Name"}),e.jsx("th",{className:"px-6 py-4 text-xs font-semibold text-gray-500 uppercase tracking-wider",children:"Description"}),e.jsx("th",{className:"px-6 py-4 text-xs font-semibold text-gray-500 uppercase tracking-wider text-right",children:"Actions"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200",children:l?e.jsx("tr",{children:e.jsx("td",{colSpan:"3",className:"px-6 py-8 text-center text-gray-500",children:e.jsxs("div",{className:"flex justify-center items-center gap-2",children:[e.jsx("div",{className:"w-4 h-4 border-2 border-brand-600 border-t-transparent rounded-full animate-spin"}),"Loading..."]})})}):w.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:"3",className:"px-6 py-8 text-center text-gray-500",children:"No attributes found."})}):w.map(n=>e.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[e.jsx("td",{className:"px-6 py-4 text-sm font-medium text-gray-900",children:n.name}),e.jsx("td",{className:"px-6 py-4 text-sm text-gray-500",children:n.description||"-"}),e.jsx("td",{className:"px-6 py-4 text-right",children:e.jsxs("div",{className:"flex items-center justify-end gap-2",children:[e.jsx("button",{onClick:()=>C(n),className:"p-1 text-gray-500 hover:text-brand-600 hover:bg-brand-50 rounded transition-colors",children:e.jsx(Ee,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>I(n.id),className:"p-1 text-gray-500 hover:text-red-600 hover:bg-red-50 rounded transition-colors",children:e.jsx(ne,{className:"w-4 h-4"})})]})})]},n.id))})]})})}),u&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 p-4 backdrop-blur-sm",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-md overflow-hidden",children:[e.jsxs("div",{className:"flex items-center justify-between px-6 py-4 border-b border-gray-100",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:j?"Edit Attribute":"Add Attribute"}),e.jsx("button",{onClick:S,className:"text-gray-400 hover:text-gray-600 transition-colors",children:e.jsx(Me,{className:"w-5 h-5"})})]}),e.jsxs("form",{onSubmit:L,className:"p-6 space-y-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Name ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",value:p.name,onChange:n=>N({...p,name:n.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-brand-500/20 focus:border-brand-500 transition-shadow",placeholder:"e.g. Color, Size, Material",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),e.jsx("textarea",{value:p.description,onChange:n=>N({...p,description:n.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-brand-500/20 focus:border-brand-500 transition-shadow resize-none",rows:"3",placeholder:"Brief description of the attribute..."})]}),e.jsxs("div",{className:"flex justify-end gap-3 pt-2",children:[e.jsx("button",{type:"button",onClick:S,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-gray-200 transition-colors",children:"Cancel"}),e.jsx(xe,{type:"submit",disabled:v,isLoading:v,children:j?"Save Changes":"Create Attribute"})]})]})]})})]})},ue=[{id:"units",label:"Measurement Units",icon:he},{id:"businessTypes",label:"Business Types",icon:pe},{id:"categories",label:"Categories",icon:ge},{id:"attributes",label:"Product Attributes",icon:Pe}],mt=()=>{const[t,s]=r.useState(ue[0].id),l=()=>{switch(t){case"units":return e.jsx(Oe,{});case"businessTypes":return e.jsx(De,{});case"categories":return e.jsx(Fe,{});case"attributes":return e.jsx(Le,{});default:return null}};return e.jsx(we,{children:e.jsxs("div",{className:"p-2 space-y-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Settings"}),e.jsx("p",{className:"text-gray-600 mt-2",children:"Manage core platform settings, units, and categories."})]}),e.jsx("div",{className:"flex border-b border-gray-200 overflow-x-auto",children:ue.map(c=>e.jsxs("button",{onClick:()=>s(c.id),className:`relative flex items-center gap-2 px-3 text-xs py-2 font-medium transition-colors md:px-4 md:py-3 md:text-sm
                                ${t===c.id?"text-brand-600":"text-gray-500 hover:text-gray-700"}`,children:[e.jsx(c.icon,{className:"w-5 h-5"}),e.jsx("span",{children:c.label}),t===c.id&&e.jsx("div",{className:"absolute bottom-[-1px] left-0 right-0 h-0.5 bg-brand-600"})]},c.id))}),e.jsx("div",{className:"mt-6",children:l()})]})})};export{mt as default};
