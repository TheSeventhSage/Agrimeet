import{D as y,j as e,r as m,d as w,e as B}from"./index-BrJE6Ruv.js";import{T as ce,E as oe,c as me,a as xe}from"./DashboardLayout-CbQpQ2VH.js";import{u as ue,s as ge,U as R,a as T,S as he}from"./SuspendUserModal-B9sVD4up.js";import{C as pe}from"./ConfirmationModal-CR03D5EN.js";import{S as _}from"./store-D3zJFIkg.js";import{C as f}from"./circle-check-big-CzdoeDj5.js";import{C as z}from"./clock-B8URdOLJ.js";import{S as je}from"./search-JGraeCEO.js";import{B as fe}from"./building-gQWnzb3h.js";import{U as I}from"./user-BoLJHLaW.js";import{M as V}from"./map-pin-DjHtAG67.js";import{P as be}from"./phone-wn7fZVnI.js";import{C as L}from"./star-D0UWI2kz.js";import{C as b}from"./circle-x-uQfptDzR.js";import{X as O}from"./x-89xIXrzd.js";import{B as S}from"./Button-NP5qGopO.js";import{F as q}from"./file-text-DhmWdPlz.js";import{E as X}from"./external-link-BU_DoMht.js";import{L as G}from"./loader-circle-mZ3-xmP4.js";import{C as ye}from"./credit-card-De6BP3Px.js";import{P as Ne}from"./Pagination-Vme_HTT5.js";import"./Logo-yv9J0Zw_.js";import"./house-B5NBqIRK.js";import"./createLucideIcon-DTbf89oH.js";import"./users-Btkg261Z.js";import"./file-check-BlT-5aXD.js";import"./circle-question-mark-DdVU0ul4.js";import"./message-circle-CfRGLCSX.js";import"./info-D8IKXDkN.js";import"./BackgroundArt-Cv4ql44m.js";import"./chevron-left-DyrGgcS9.js";const ve=async(s=1,n=20,i={})=>{try{const l={page:s,per_page:n},t=i||{};return t.search_global&&t.search_global.trim().length>0&&(l.search_global=t.search_global.trim()),t.status&&t.status!=="all"&&(l.status=t.status),t.business_type&&t.business_type!=="all"&&(l.business_type=t.business_type),t.sortBy&&(l.sortBy=t.sortBy),t.sortOrder&&(l.sortOrder=t.sortOrder),(await y.get("/admin/allsellers",{params:l})).data}catch(l){throw console.error("Error fetching sellers:",l),l}},we=async s=>{try{return await y.get(`/admin/sellers/${s}`)}catch(n){throw console.error(`Error fetching seller ${s}:`,n),n}},Se=ge,_e=ue,Ce=async()=>{try{return await y.get("/admin/allsellers",{query:{per_page:1}})}catch(s){throw console.error("Error fetching seller stats:",s),s}},ke=async()=>{try{return await y.get("/admin/business_types")}catch(s){return console.error("Error fetching business types:",s),{data:[]}}},Ae=async(s,n)=>{try{return(await y.post(`/admin/kyc/${s}/review`,n)).data}catch(i){throw console.error(`Error reviewing KYC ${s}:`,i),i}},j={getAllSellers:ve,getSellerById:we,suspendSeller:Se,unsuspendSeller:_e,getSellerStats:Ce,getBusinessTypes:ke,reviewKyc:Ae},$e=({stats:s,sellers:n})=>{const l=(()=>{if(!n||n.length===0)return{total:s.total||0,verified:0,pending:0,rejected:0,suspended:0};const a=n.filter(x=>x.latest_kyc?.status==="approved").length,o=n.filter(x=>x.latest_kyc?.status==="pending"||!x.latest_kyc).length,d=n.filter(x=>x.latest_kyc?.status==="rejected").length,c=n.filter(x=>x.user?.user_status==="suspended"||x.user?.user_status==="banned").length;return{total:s.total||n.length,verified:a,pending:o,rejected:d,suspended:c}})(),t=[{title:"Total Sellers",value:l.total,icon:_,color:"bg-blue-500"},{title:"KYC Approved",value:l.verified,icon:f,color:"bg-green-500"},{title:"KYC Pending",value:l.pending,icon:z,color:"bg-yellow-500"},{title:"Suspended",value:l.suspended,icon:ce,color:"bg-red-500"}];return e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:t.map((a,o)=>e.jsx("div",{className:"bg-white rounded-xl shadow-xs border border-gray-100 p-6 hover:shadow-md transition-shadow",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:a.title}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 mt-2",children:a.value.toLocaleString()})]}),e.jsx("div",{className:`p-3 rounded-lg ${a.color}`,children:e.jsx(a.icon,{className:"w-6 h-6 text-white"})})]})},o))})},Ke=({filters:s,onFilterChange:n,businessTypes:i=[]})=>{const[l,t]=m.useState(s.search_global||""),a=d=>{d.key==="Enter"&&(d.preventDefault(),n({...s,search_global:l.trim(),page:1}))},o=()=>{t(""),n({...s,search_global:"",page:1})};return e.jsx("div",{className:"bg-white rounded-xl shadow-xs border border-gray-100 p-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"md:col-span-1",children:[e.jsxs("div",{className:"relative",children:[e.jsx(je,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),e.jsx("input",{type:"text",placeholder:"Search sellers... (Press Enter)",value:l,onChange:d=>t(d.target.value),onKeyPress:a,className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:outline-hidden focus:ring-2 focus:ring-brand-500"}),l&&e.jsx("button",{onClick:o,className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600",children:"×"})]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Press Enter to search"})]}),e.jsx("div",{children:e.jsxs("select",{value:s.status||"",onChange:d=>n({...s,status:d.target.value,page:1}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-hidden focus:ring-2 focus:ring-brand-500",children:[e.jsx("option",{value:"all",children:"All KYC Status"}),e.jsx("option",{value:"pending",children:"Pending"}),e.jsx("option",{value:"approved",children:"Approved"}),e.jsx("option",{value:"rejected",children:"Rejected"})]})}),e.jsx("div",{children:e.jsxs("select",{value:s.business_type||"",onChange:d=>n({...s,business_type:d.target.value,page:1}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-hidden focus:ring-2 focus:ring-brand-500",children:[e.jsx("option",{value:"all",children:"All Business Types"}),i.map(d=>e.jsx("option",{value:d.name,children:d.name},d.id))]})})]})})},Be=({seller:s,onViewDetails:n,onSuspendSeller:i,onUnsuspendSeller:l,onReviewKYC:t})=>{const a=()=>{if(s.latest_kyc){const u=s.latest_kyc.status;if(u==="approved")return e.jsxs("span",{className:"inline-flex items-center gap-1 px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800",children:[e.jsx(f,{className:"w-3 h-3"}),"Approved"]});if(u==="pending")return e.jsxs("span",{className:"inline-flex items-center gap-1 px-2.5 py-0.5 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800",children:[e.jsx(z,{className:"w-3 h-3"}),"Pending"]});if(u==="rejected")return e.jsxs("span",{className:"inline-flex items-center gap-1 px-2.5 py-0.5 rounded-full text-xs font-medium bg-red-100 text-red-800",children:[e.jsx(b,{className:"w-3 h-3"}),"Rejected"]})}return e.jsxs("span",{className:"inline-flex items-center gap-1 px-2.5 py-0.5 rounded-full text-xs font-medium bg-gray-100 text-gray-800",children:[e.jsx(L,{className:"w-3 h-3"}),"No KYC"]})},o=()=>{const u=s.user?.user_status||"active";return u==="suspended"||u==="banned"?e.jsxs("span",{className:"inline-flex items-center gap-1 px-2.5 py-0.5 rounded-full text-xs font-medium bg-red-100 text-red-800",children:[e.jsx(b,{className:"w-3 h-3"}),"Suspended"]}):e.jsxs("span",{className:"inline-flex items-center gap-1 px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800",children:[e.jsx(f,{className:"w-3 h-3"}),"Active"]})},d=s.user?.user_status==="suspended"||s.user?.user_status==="banned",c=s.user?.suspension_count||0,x=s.latest_kyc?.status==="pending";return e.jsxs("div",{className:"bg-white rounded-xl shadow-xs border border-gray-100 p-6 hover:shadow-md transition-shadow",children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-12 h-12 bg-brand-100 rounded-full flex items-center justify-center",children:s.user?.profile_photo?e.jsx("img",{src:s.user.profile_photo,alt:s.store_name,className:"w-12 h-12 rounded-full object-cover"}):e.jsx(_,{className:"w-6 h-6 text-brand-700"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:s.store_name||"N/A"}),e.jsx("p",{className:"text-sm text-gray-600",children:s.user?`${s.user.first_name} ${s.user.last_name}`:"N/A"})]})]}),e.jsxs("div",{className:"flex flex-col gap-1 items-end",children:[a(),o()]})]}),e.jsxs("div",{className:"space-y-2 mb-4",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[e.jsx(fe,{className:"w-4 h-4"}),e.jsx("span",{children:s.business_type?.name||"N/A"})]}),e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[e.jsx(I,{className:"w-4 h-4"}),e.jsx("span",{children:s.user?.email||"N/A"})]}),e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[e.jsx(V,{className:"w-4 h-4"}),e.jsx("span",{className:"truncate",children:s.city&&s.state?`${s.city}, ${s.state}`:s.address||"N/A"})]}),e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[e.jsx(be,{className:"w-4 h-4"}),e.jsx("span",{children:s.business_phone_number||s.user?.phone_number||"N/A"})]})]}),c>0&&e.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-3 mb-4",children:e.jsxs("p",{className:"text-xs text-red-700 flex items-center gap-2",children:[e.jsx(L,{className:"w-4 h-4"}),"Suspended ",c," ",c===1?"time":"times"]})}),s.bank_name&&e.jsxs("div",{className:"bg-gray-50 rounded-lg p-3 mb-4",children:[e.jsx("p",{className:"text-xs text-gray-500 mb-1",children:"Bank Details"}),e.jsx("p",{className:"text-sm font-medium text-gray-900",children:s.bank_name}),e.jsx("p",{className:"text-sm text-gray-600",children:s.bank_account_number}),e.jsx("p",{className:"text-xs text-gray-500",children:s.name_on_account})]}),e.jsxs("div",{className:"flex items-center gap-2 pt-4 border-t border-gray-200 mt-auto",children:[e.jsxs("button",{onClick:()=>n(s),className:"flex-1 flex items-center justify-center gap-2 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:[e.jsx(oe,{className:"w-4 h-4"}),"View Details"]}),x&&e.jsxs("button",{onClick:()=>{console.log("Seller being reviewed:",s),t(s)},className:"flex-1 flex items-center justify-center gap-2 px-3 py-2 bg-brand-600 text-white rounded-lg hover:bg-brand-700 transition-colors text-sm font-medium",title:"Review KYC Documents",children:[e.jsx(me,{className:"w-4 h-4"}),"Review"]}),d?e.jsx("button",{onClick:()=>l(s),className:"flex items-center justify-center gap-2 px-4 py-2 bg-green-500 text-white rounded-lg hover:bg-green-600 transition-colors",title:"Unsuspend Seller",children:e.jsx(R,{className:"w-4 h-4"})}):e.jsx("button",{onClick:()=>i(s),className:"flex items-center justify-center gap-2 px-4 py-2 bg-red-500 text-white rounded-lg hover:bg-red-600 transition-colors",title:"Suspend Seller",children:e.jsx(T,{className:"w-4 h-4"})})]})]})},D=({isOpen:s,onClose:n,title:i,children:l,size:t="md"})=>{if(m.useEffect(()=>(s?document.body.style.overflow="hidden":document.body.style.overflow="unset",()=>{document.body.style.overflow="unset"}),[s]),!s)return null;const a={sm:"max-w-md",md:"max-w-lg",lg:"max-w-2xl",xl:"max-w-4xl"};return e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm animate-in fade-in duration-200",children:e.jsxs("div",{className:`bg-white rounded-2xl shadow-xl w-full ${a[t]} overflow-hidden animate-in zoom-in-95 duration-200`,onClick:o=>o.stopPropagation(),children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-100",children:[e.jsx("h3",{className:"text-xl font-bold text-gray-900",children:i}),e.jsx("button",{onClick:n,className:"p-2 rounded-full hover:bg-gray-100 transition-colors text-gray-500",children:e.jsx(O,{className:"w-5 h-5"})})]}),e.jsx("div",{className:"p-6 overflow-y-auto max-h-[80vh]",children:l})]})})},De=({isOpen:s,onClose:n,submission:i,onConfirm:l,isLoading:t})=>{const[a,o]=m.useState(null),[d,c]=m.useState("");if(!i)return null;const x=()=>{l(i.id,{status:a,admin_notes:d})};return e.jsx(D,{isOpen:s,onClose:n,title:"Review KYC Submission",size:"lg",children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg border border-gray-200",children:[e.jsxs("h4",{className:"text-sm font-semibold text-gray-700 mb-3 flex items-center gap-2",children:[e.jsx(q,{className:"w-4 h-4"})," Submitted Documents"]}),e.jsxs("div",{className:"flex items-center justify-between bg-white p-3 rounded border border-gray-100 shadow-sm",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-900 capitalize",children:i.document_type}),e.jsxs("p",{className:"text-xs text-gray-500",children:["Submitted on ",new Date(i.submitted_at).toLocaleDateString()]})]}),e.jsxs("a",{href:i.document_file,target:"_blank",rel:"noopener noreferrer",className:"text-brand-600 hover:text-brand-700 text-sm font-medium flex items-center gap-1",children:["View File ",e.jsx(X,{className:"w-3 h-3"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("button",{onClick:()=>o("approved"),className:`flex flex-col items-center justify-center p-4 rounded-xl border-2 transition-all ${a==="approved"?"border-green-600 bg-green-50":"border-gray-100 bg-white hover:border-gray-200"}`,children:[e.jsx(f,{className:`w-8 h-8 mb-2 ${a==="approved"?"text-green-600":"text-gray-400"}`}),e.jsx("span",{className:`font-semibold ${a==="approved"?"text-green-800":"text-gray-600"}`,children:"Approve"})]}),e.jsxs("button",{onClick:()=>o("rejected"),className:`flex flex-col items-center justify-center p-4 rounded-xl border-2 transition-all ${a==="rejected"?"border-red-600 bg-red-50":"border-gray-100 bg-white hover:border-gray-200"}`,children:[e.jsx(b,{className:`w-8 h-8 mb-2 ${a==="rejected"?"text-red-600":"text-gray-400"}`}),e.jsx("span",{className:`font-semibold ${a==="rejected"?"text-red-800":"text-gray-600"}`,children:"Reject"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Admin Notes / Feedback"}),e.jsx("textarea",{className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-brand-500 min-h-[100px]",placeholder:"Explain your decision (required if rejecting)...",value:d,onChange:u=>c(u.target.value)})]}),e.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t",children:[e.jsx(S,{variant:"outline",onClick:n,children:"Cancel"}),e.jsx(S,{onClick:x,disabled:!a||t||a==="rejected"&&!d,className:a==="approved"?"bg-green-600 hover:bg-green-700":"bg-red-600 hover:bg-red-700",children:t?e.jsx(G,{className:"w-4 h-4 animate-spin"}):"Confirm Decision"})]})]})})},Ue=({seller:s,onClose:n,onSuspendSeller:i,onUnsuspendSeller:l})=>{if(!s)return null;const t=s.user,a=t?.user_status==="suspended"||t?.user_status==="banned",o=t?.suspension_count||0;return e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-xl max-w-5xl w-full max-h-[90vh] overflow-y-auto",children:[e.jsx("div",{className:"p-6 border-b border-gray-200 sticky top-0 bg-white z-10",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-semibold text-gray-900",children:"Seller Details"}),e.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:["Seller ID: ",s.id," | User ID: ",t?.id]})]}),e.jsx("button",{onClick:n,className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:e.jsx(O,{className:"w-5 h-5 text-gray-500"})})]})}),e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsx("div",{className:`p-4 rounded-lg ${a?"bg-red-50 border border-red-200":"bg-green-50 border border-green-200"}`,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"flex items-center gap-3",children:a?e.jsxs(e.Fragment,{children:[e.jsx(b,{className:"w-6 h-6 text-red-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-red-900",children:"Account Suspended"}),e.jsx("p",{className:"text-sm text-red-700",children:"This seller's account is currently suspended"}),o>0&&e.jsxs("p",{className:"text-xs text-red-600 mt-1",children:["Suspended ",o," ",o===1?"time":"times"]})]})]}):e.jsxs(e.Fragment,{children:[e.jsx(f,{className:"w-6 h-6 text-green-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-green-900",children:"Account Active"}),e.jsx("p",{className:"text-sm text-green-700",children:"This seller's account is active"})]})]})}),e.jsx("div",{children:a?e.jsxs("button",{onClick:()=>l(s),className:"inline-flex items-center gap-2 px-4 py-2 bg-green-500 text-white rounded-lg hover:bg-green-600 transition-colors",children:[e.jsx(R,{className:"w-4 h-4"}),"Unsuspend Seller"]}):e.jsxs("button",{onClick:()=>i(s),className:"inline-flex items-center gap-2 px-4 py-2 bg-red-500 text-white rounded-lg hover:bg-red-600 transition-colors",children:[e.jsx(T,{className:"w-4 h-4"}),"Suspend Seller"]})})]})}),e.jsxs("div",{children:[e.jsxs("h4",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center gap-2",children:[e.jsx(I,{className:"w-5 h-5 text-brand-600"}),"User Information"]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-600",children:"Full Name"}),e.jsx("p",{className:"text-gray-900",children:t?`${t.first_name} ${t.last_name}`:"N/A"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-600",children:"Email"}),e.jsx("p",{className:"text-gray-900",children:t?.email||"N/A"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-600",children:"Phone Number"}),e.jsx("p",{className:"text-gray-900",children:t?.phone_number||"N/A"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-600",children:"Roles"}),e.jsx("div",{className:"flex gap-2 mt-1",children:t?.roles?.map((d,c)=>e.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:d},c))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-600",children:"Wallet Balance"}),e.jsxs("p",{className:"text-gray-900",children:["₦",parseFloat(t?.wallet||0).toLocaleString()]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-600",children:"Account Status"}),e.jsx("p",{className:"text-gray-900 capitalize",children:t?.user_status||"N/A"})]})]})]}),e.jsxs("div",{children:[e.jsxs("h4",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center gap-2",children:[e.jsx(_,{className:"w-5 h-5 text-brand-600"}),"Store Information"]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-600",children:"Store Name"}),e.jsx("p",{className:"text-gray-900",children:s.store_name||"N/A"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-600",children:"Business Type"}),e.jsx("p",{className:"text-gray-900",children:s.business_type?.name||"N/A"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-600",children:"Gender"}),e.jsx("p",{className:"text-gray-900 capitalize",children:s.gender||"N/A"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-600",children:"Business Phone"}),e.jsx("p",{className:"text-gray-900",children:s.business_phone_number||"N/A"})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{className:"text-sm font-medium text-gray-600",children:"Business Bio"}),e.jsx("p",{className:"text-gray-900",children:s.business_bio||"N/A"})]})]})]}),e.jsxs("div",{children:[e.jsxs("h4",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center gap-2",children:[e.jsx(V,{className:"w-5 h-5 text-brand-600"}),"Location"]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{className:"text-sm font-medium text-gray-600",children:"Address"}),e.jsx("p",{className:"text-gray-900",children:s.address||"N/A"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-600",children:"City"}),e.jsx("p",{className:"text-gray-900",children:s.city||"N/A"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-600",children:"State"}),e.jsx("p",{className:"text-gray-900",children:s.state||"N/A"})]})]})]}),e.jsxs("div",{children:[e.jsxs("h4",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center gap-2",children:[e.jsx(ye,{className:"w-5 h-5 text-brand-600"}),"Bank Details"]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-600",children:"Bank Name"}),e.jsx("p",{className:"text-gray-900",children:s.bank_name||"N/A"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-600",children:"Account Number"}),e.jsx("p",{className:"text-gray-900",children:s.bank_account_number||"N/A"})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{className:"text-sm font-medium text-gray-600",children:"Account Name"}),e.jsx("p",{className:"text-gray-900",children:s.name_on_account||"N/A"})]})]})]}),e.jsx("div",{children:e.jsx(De,{seller:s})})]})]})})},Ye=({isOpen:s,onClose:n,submission:i,onConfirm:l,isLoading:t})=>{const[a,o]=m.useState(null),[d,c]=m.useState("");if(console.log(i),!i)return e.jsx(D,{isOpen:s,onClose:n,title:"Review KYC Submission",size:"lg",children:e.jsx("div",{className:"text-center py-8",children:e.jsx("p",{className:"text-gray-600",children:"No KYC submission found for this seller."})})});const x=()=>{l(i.id,{status:a,admin_notes:d})};return e.jsx(D,{isOpen:s,onClose:n,title:"Review KYC Submission",size:"lg",children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg border border-gray-200",children:[e.jsxs("h4",{className:"text-sm font-semibold text-gray-700 mb-3 flex items-center gap-2",children:[e.jsx(q,{className:"w-4 h-4"})," Submitted Documents"]}),e.jsxs("div",{className:"flex items-center justify-between bg-white p-3 rounded border border-gray-100 shadow-sm",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-900 capitalize",children:i.document_type}),e.jsxs("p",{className:"text-xs text-gray-500",children:["Submitted on ",new Date(i.submitted_at).toLocaleDateString()]})]}),e.jsxs("a",{href:i.document_file,target:"_blank",rel:"noopener noreferrer",className:"text-brand-600 hover:text-brand-700 text-sm font-medium flex items-center gap-1",children:["View File ",e.jsx(X,{className:"w-3 h-3"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("button",{onClick:()=>o("approved"),className:`flex flex-col items-center justify-center p-4 rounded-xl border-2 transition-all ${a==="approved"?"border-green-600 bg-green-50":"border-gray-100 bg-white hover:border-gray-200"}`,children:[e.jsx(f,{className:`w-8 h-8 mb-2 ${a==="approved"?"text-green-600":"text-gray-400"}`}),e.jsx("span",{className:`font-semibold ${a==="approved"?"text-green-800":"text-gray-600"}`,children:"Approve"})]}),e.jsxs("button",{onClick:()=>o("rejected"),className:`flex flex-col items-center justify-center p-4 rounded-xl border-2 transition-all ${a==="rejected"?"border-red-600 bg-red-50":"border-gray-100 bg-white hover:border-gray-200"}`,children:[e.jsx(b,{className:`w-8 h-8 mb-2 ${a==="rejected"?"text-red-600":"text-gray-400"}`}),e.jsx("span",{className:`font-semibold ${a==="rejected"?"text-red-800":"text-gray-600"}`,children:"Reject"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Admin Notes / Feedback"}),e.jsx("textarea",{className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-brand-500 min-h-[100px]",placeholder:"Explain your decision (required if rejecting)...",value:d,onChange:u=>c(u.target.value)})]}),e.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t",children:[e.jsx(S,{variant:"outline",onClick:n,children:"Cancel"}),e.jsx(S,{onClick:x,disabled:!a||t||a==="rejected"&&!d,className:a==="approved"?"bg-green-600 hover:bg-green-700":"bg-red-600 hover:bg-red-700",children:t?e.jsx(G,{className:"w-4 h-4 animate-spin"}):"Confirm Decision"})]})]})})},xs=()=>{const[s,n]=m.useState([]),[i,l]=m.useState({}),[t,a]=m.useState([]),[o,d]=m.useState(!0),[c,x]=m.useState(null),[u,N]=m.useState(!1),[W,C]=m.useState(!1),[H,k]=m.useState(!1),[U,v]=m.useState(!1),[J,A]=m.useState(!1),[Q,Y]=m.useState(!1),E=r=>{console.log("Seller data:",r),console.log("Latest KYC:",r.latest_kyc),x(r),A(!0)},[h,F]=m.useState({search_global:"",status:"all",business_type:"all",sortBy:"created_at",sortOrder:"desc"}),[Z,ee]=m.useState({current_page:1,last_page:1,from:0,to:0,total:0,per_page:20});m.useEffect(()=>{$()},[h]),m.useEffect(()=>{K(),se()},[]);const $=async()=>{try{d(!0);const r=await j.getAllSellers(h.page,20,{search_global:h.search_global,status:h.status,business_type:h.business_type}),g=r.data?.data||r.data||[],p=r.meta||{};n(g),ee({current_page:p.current_page||1,last_page:p.last_page||1,from:p.from||0,to:p.to||0,total:p.total||0,per_page:p.per_page||20})}catch(r){console.error("Failed to load sellers:",r),w("Failed to load sellers"),n([])}finally{d(!1)}},K=async()=>{try{const g=(await j.getSellerStats()).data?.meta||{};l({total:g.total||0})}catch(r){console.error("Failed to load stats:",r)}},se=async()=>{try{const r=await j.getBusinessTypes();a(r.data?.data||[])}catch(r){console.error("Failed to load business types:",r)}},te=async(r,g)=>{Y(!0);try{await j.reviewKyc(r,g),B(`KYC ${g.status} successfully`),A(!1)}catch(p){w(p.message||"Failed to process KYC review")}finally{Y(!1)}},ae=r=>{F(r)},re=r=>{F({...h,page:r})},ne=r=>{x(r),N(!0)},M=r=>{x(r),C(!0)},P=r=>{x(r),k(!0)},le=async r=>{if(c?.user?.id)try{v(!0),await j.suspendSeller(c.user.id,r),B("Seller suspended successfully"),C(!1),N(!1),$(),K()}catch(g){console.error("Failed to suspend seller:",g),w("Failed to suspend seller")}finally{v(!1)}},ie=async()=>{if(c?.user?.id)try{v(!0),await j.unsuspendSeller(c.user.id),B("Seller unsuspended successfully"),k(!1),N(!1),$(),K()}catch(r){console.error("Failed to unsuspend seller:",r),w("Failed to unsuspend seller")}finally{v(!1)}},de=r=>{if(!r)return null;const g=r.user;return{...g,name:`${g?.first_name||""} ${g?.last_name||""}`.trim()||r.store_name||"Unknown"}};return e.jsxs(xe,{children:[e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Seller Management"}),e.jsx("p",{className:"text-gray-600 mt-2",children:"Manage and monitor all sellers on the platform"})]}),e.jsx($e,{stats:i,sellers:s}),e.jsx(Ke,{filters:h,onFilterChange:ae,businessTypes:t}),e.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:o?e.jsx("div",{className:"lg:col-span-2 flex items-center justify-center py-12",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-brand-500"})}):s.length===0?e.jsxs("div",{className:"lg:col-span-2 bg-white rounded-xl shadow-xs border border-gray-100 p-12 text-center",children:[e.jsx(_,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"No sellers found"}),(h.search_global||h.status!==""||h.business_type!=="")&&e.jsx("p",{className:"text-sm text-gray-500 mt-2",children:"Try adjusting your filters"})]}):s.map(r=>e.jsx(Be,{seller:r,onViewDetails:ne,onSuspendSeller:M,onUnsuspendSeller:P,onReviewKYC:E},r.id))}),s.length>0&&e.jsx(Ne,{pagination:Z,onPageChange:re})]}),u&&c&&e.jsx(Ue,{seller:c,onClose:()=>N(!1),onSuspendSeller:M,onUnsuspendSeller:P,onReviewKYC:E}),e.jsx(he,{user:de(c),isOpen:W,onClose:()=>C(!1),onConfirm:le,isLoading:U}),e.jsx(pe,{isOpen:H,onClose:()=>k(!1),onConfirm:ie,title:"Unsuspend Seller",message:`Are you sure you want to unsuspend ${c?.user?`${c.user.first_name} ${c.user.last_name}`:c?.store_name}? This will restore their access to the platform.`,confirmText:"Unsuspend",confirmButtonClass:"bg-green-600 hover:bg-green-700",isLoading:U}),e.jsx(Ye,{isOpen:J,onClose:()=>A(!1),submission:c?.latest_kyc,onConfirm:te,isLoading:Q})]})};export{xs as default};
