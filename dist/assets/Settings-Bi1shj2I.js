import{r as c,b as R,s as g,j as e,i as O,e as $,d as _}from"./index-BOLkSH9S.js";import{D as G,B as Y,L as q}from"./DashboardLayout-BvCakflT.js";import{I as d}from"./Input-gDbNO7ZY.js";import{D as J}from"./DocumentUpload-B5v2JEUP.js";import{B as w}from"./Button-DPYyXRjf.js";import{U as u}from"./user-CozA4sKy.js";import{c as S}from"./createLucideIcon-Df3o3GTg.js";import{S as K}from"./save-C2XOQisP.js";import{S as V}from"./shield-COY4tII9.js";import{K as W}from"./key-BcpAd_ir.js";import"./Logo-g0xKsfJ_.js";import"./x-C2LEswAj.js";import"./package-CKJSu7qp.js";import"./house-CbQ0kLy2.js";import"./users-B4SWA-Gw.js";import"./file-check-CwXOnyIx.js";import"./shield-check-BosUqYmL.js";import"./circle-question-mark-CVrBAAd0.js";import"./star-C1ESBnNj.js";import"./message-circle-BHYE61eq.js";import"./file-text-CticlOFV.js";import"./BackgroundArt-ChQV54k0.js";import"./trash-2-Euhy1XCH.js";/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H=[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"2",key:"9lu3g6"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}],["path",{d:"M6 12h.01M18 12h.01",key:"113zkx"}]],b=S("banknote",H);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],k=S("lock",Q),ve=()=>{const[x,C]=c.useState("profile"),[P,h]=c.useState(!1),[D,f]=c.useState(),U=R(),[o,p]=c.useState(null),[l,y]=c.useState(null),[t,j]=c.useState({first_name:"",last_name:"",email:"",phone_number:"",bank_name:"",bank_account_number:0,name_on_account:""});c.useEffect(()=>{const s=g.getUserData();if(s){const a=s.data||s;y(a),j({first_name:a.first_name||"",last_name:a.last_name||"",email:a.email||"",phone_number:a.phone_number||"",bank_account_number:a.seller.bank_account_number||"",bank_name:a.seller.bank_name||"",name_on_account:a.seller.name_on_account||""})}},[]);const i=s=>{const{name:a,value:n}=s.target;j(r=>({...r,[a]:n}))},E=s=>{s&&s.length>0?p(s[0].file):p(null)},v=(s,a,n)=>{if(a&&typeof a=="object"&&!(a instanceof Date)&&!(a instanceof File))Object.keys(a).forEach(r=>{const m=a[r],N=n?`${n}[${r}]`:r;v(s,m,N)});else if(a!=null){const r=typeof a=="boolean"?a?"1":"0":a;s.append(n,r)}console.log(s)};console.log(l);const F=async s=>{s.preventDefault(),f(!0);try{if(!l||!l.id)throw new Error("User data not loaded properly. Please refresh or log in.");const a=l.id,n={...l.seller||{},bank_name:t.bank_name,bank_account_number:t.bank_account_number,name_on_account:t.name_on_account};console.log(n);const r={...l,first_name:t.first_name,last_name:t.last_name,email:t.email,phone_number:t.phone_number,seller:n},m=new FormData;m.append("_method","PUT");const{profile_photo:N,...I}=r;v(m,I,""),o&&m.append("profile_photo",o),await O(a,m);const L={data:r};g.setUserData(L),y(r),p(null),$("Profile updated successfully")}catch(a){if(console.error(a),a.response?.data?.errors){const n=Object.values(a.response.data.errors).flat().join(`
`);_(n)}else _(a.message||"Failed to update profile")}finally{f(!1)}},M=()=>{h(!0)},A=()=>{h(!1),g.clearAll(),U("/forgot-password")},B=()=>e.jsx("form",{onSubmit:F,className:"space-y-6",children:e.jsxs("div",{className:"flex flex-col md:flex-row gap-8",children:[e.jsxs("div",{className:"w-full md:w-1/3 flex flex-col space-y-4",children:[!o&&l?.profile_photo&&typeof l.profile_photo=="string"&&e.jsxs("div",{className:"flex flex-col items-center mb-2",children:[e.jsx("span",{className:"text-sm font-medium text-gray-700 mb-2",children:"Current Photo"}),e.jsx("img",{src:l.profile_photo,alt:"Current Profile",className:"w-32 h-32 rounded-full object-cover border border-gray-200"})]}),e.jsx(J,{label:"Upload Profile Photo",maxSizeMB:2,maxFiles:1,acceptedTypes:".jpg,.jpeg,.png,.gif",helperText:"JPG, GIF or PNG. Max size 2MB",value:o?[{name:o.name,size:o.size,type:o.type,file:o,id:"temp-id",preview:URL.createObjectURL(o)}]:[],onChange:E})]}),e.jsxs("div",{className:"w-full md:w-2/3 space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(d,{label:"First Name",name:"first_name",value:t.first_name,onChange:i,icon:u,placeholder:"Enter your first name"}),e.jsx(d,{label:"Last Name",name:"last_name",value:t.last_name,onChange:i,icon:u,placeholder:"Enter your last name"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(d,{label:"Email Address",name:"email",type:"email",value:t.email,onChange:i,icon:u,placeholder:"name@example.com",disabled:!0,className:"bg-gray-50"}),e.jsx(d,{label:"Phone Number",name:"phone_number",type:"tel",value:t.phone_number,onChange:i,icon:u,placeholder:"+1 (555) 000-0000"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(d,{label:"Bank Name",name:"bank_name",value:t.bank_name,onChange:i,icon:b,placeholder:"Enter your bank name"}),e.jsx(d,{label:"Bank Account Number",name:"bank_account_number",type:"number",value:t.bank_account_number,onChange:i,icon:b,placeholder:"Enter your bank account number"})]}),e.jsx(d,{label:"Name on Account",name:"name_on_account",type:"text",value:t.name_on_account,onChange:i,icon:b,placeholder:"Enter your name on account"}),e.jsx("div",{className:"pt-4 flex justify-end",children:e.jsx(w,{type:"submit",loading:D,icon:K,children:"Save Changes"})})]})]})}),T=()=>e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Security Settings"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Manage your password and account security."})]}),e.jsx("div",{className:"h-10 w-10 bg-orange-50 rounded-full flex items-center justify-center",children:e.jsx(V,{className:"h-5 w-5 text-orange-600"})})]}),e.jsx("div",{className:"bg-white border border-gray-200 rounded-lg p-6 hover:border-gray-300 transition-colors",children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"p-3 bg-blue-50 rounded-lg hidden sm:block",children:e.jsx(W,{className:"w-6 h-6 text-blue-600"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"text-base font-semibold text-gray-900",children:"Change Password"}),e.jsx("p",{className:"text-sm text-gray-500 mt-1 mb-4",children:"To ensure the highest level of security, we require you to verify your identity before changing your password. Proceeding will log you out and redirect you to the password reset page."}),e.jsx(w,{type:"button",variant:"outline",onClick:M,className:"border-blue-200 text-blue-700 hover:bg-blue-50 hover:border-blue-300",children:"Change Password"})]})]})}),e.jsx("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-6 opacity-75",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-gray-200 rounded-md",children:e.jsx(k,{className:"w-5 h-5 text-gray-500"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-semibold text-gray-900",children:"Two-Factor Authentication"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Add an extra layer of security to your account."})]})]}),e.jsx("span",{className:"text-xs font-medium bg-gray-200 text-gray-600 px-2 py-1 rounded",children:"Coming Soon"})]})})]}),z=[{id:"profile",label:"Profile Settings",icon:u},{id:"security",label:"Security",icon:k},{id:"notifications",label:"Notifications",icon:Y}];return e.jsxs(G,{children:[e.jsxs("div",{className:"max-w-6xl mx-auto",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Settings"}),e.jsx("p",{className:"text-gray-600",children:"Manage your account settings and preferences."})]}),e.jsxs("div",{className:"flex flex-col lg:flex-row gap-6",children:[e.jsx("div",{className:"lg:w-64 shrink-0",children:e.jsx("nav",{className:"space-y-1",children:z.map(s=>e.jsxs("button",{onClick:()=>C(s.id),className:`w-full flex items-center gap-3 px-4 py-3 text-left rounded-lg transition-colors ${x===s.id?"bg-brand-100 text-brand-700 border border-brand-200":"text-gray-600 hover:bg-gray-100"}`,children:[e.jsx(s.icon,{className:"w-5 h-5"}),s.label]},s.id))})}),e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-xs border border-gray-100 p-6",children:[x==="profile"&&B(),x==="security"&&T(),x==="notifications"&&e.jsx("div",{className:"text-center text-gray-500 py-12",children:"Notification settings coming soon"})]})})]})]}),P&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-2xl max-w-md w-full p-6 animate-in fade-in zoom-in duration-200",children:[e.jsx("div",{className:"flex items-center justify-center w-12 h-12 bg-orange-100 rounded-full mx-auto mb-4",children:e.jsx(q,{className:"w-6 h-6 text-orange-600"})}),e.jsx("h3",{className:"text-lg font-bold text-gray-900 text-center mb-2",children:"Change Password?"}),e.jsx("p",{className:"text-gray-500 text-center mb-6 text-sm",children:"You are about to be logged out to securely reset your password via the Forgot Password page. Are you sure you want to proceed?"}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:()=>h(!1),className:"flex-1 px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 font-medium transition-colors",children:"Cancel"}),e.jsx("button",{onClick:A,className:"flex-1 px-4 py-2 bg-brand-600 text-white rounded-lg hover:bg-brand-700 font-medium transition-colors",children:"Yes, Proceed"})]})]})})]})};export{ve as default};
