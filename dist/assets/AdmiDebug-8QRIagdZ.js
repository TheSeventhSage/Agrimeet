import{r as o,s as n,j as e}from"./index-BOLkSH9S.js";import{D as u}from"./DashboardLayout-BvCakflT.js";import{C as a}from"./circle-check-big-DahogGvV.js";import{C as i}from"./circle-x-Bxs6Jh5B.js";import{C as h}from"./star-C1ESBnNj.js";import{U as y}from"./user-CozA4sKy.js";import{S as f}from"./shield-COY4tII9.js";import{K as v}from"./key-BcpAd_ir.js";import"./Logo-g0xKsfJ_.js";import"./x-C2LEswAj.js";import"./createLucideIcon-Df3o3GTg.js";import"./package-CKJSu7qp.js";import"./house-CbQ0kLy2.js";import"./users-B4SWA-Gw.js";import"./file-check-CwXOnyIx.js";import"./shield-check-BosUqYmL.js";import"./circle-question-mark-CVrBAAd0.js";import"./message-circle-BHYE61eq.js";import"./file-text-CticlOFV.js";import"./BackgroundArt-ChQV54k0.js";const K=()=>{const[c,g]=o.useState(null),[t,j]=o.useState(null),[d,p]=o.useState([]);o.useEffect(()=>{N()},[]);const N=()=>{const r=n.getUserData(),m=n.getTokens(),b=r?.roles?Array.isArray(r.roles)?r.roles:[r.roles]:r?.role?[r.role]:[];g(r),j(m),p(b)},s=d.includes("admin"),l=d.includes("seller"),x=d.includes("buyer");return e.jsx(u,{children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Admin Debug Info"}),e.jsx("p",{className:"text-gray-600 mt-2",children:"Check your authentication and role status"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsx("div",{className:`rounded-xl shadow-xs border p-6 ${s?"bg-green-50 border-green-200":"bg-red-50 border-red-200"}`,children:e.jsxs("div",{className:"flex items-center gap-3",children:[s?e.jsx(a,{className:"w-8 h-8 text-green-600"}):e.jsx(i,{className:"w-8 h-8 text-red-600"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-900",children:"Admin Access"}),e.jsx("p",{className:`text-sm ${s?"text-green-700":"text-red-700"}`,children:s?"You have admin access ✓":"No admin access ✗"})]})]})}),e.jsx("div",{className:`rounded-xl shadow-xs border p-6 ${l?"bg-blue-50 border-blue-200":"bg-gray-50 border-gray-200"}`,children:e.jsxs("div",{className:"flex items-center gap-3",children:[l?e.jsx(a,{className:"w-8 h-8 text-blue-600"}):e.jsx(h,{className:"w-8 h-8 text-gray-400"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-900",children:"Seller Access"}),e.jsx("p",{className:`text-sm ${l?"text-blue-700":"text-gray-600"}`,children:l?"You have seller access":"No seller access"})]})]})}),e.jsx("div",{className:`rounded-xl shadow-xs border p-6 ${t?"bg-green-50 border-green-200":"bg-red-50 border-red-200"}`,children:e.jsxs("div",{className:"flex items-center gap-3",children:[t?e.jsx(a,{className:"w-8 h-8 text-green-600"}):e.jsx(i,{className:"w-8 h-8 text-red-600"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-900",children:"Authentication"}),e.jsx("p",{className:`text-sm ${t?"text-green-700":"text-red-700"}`,children:t?"Authenticated ✓":"Not authenticated ✗"})]})]})})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-xs border border-gray-100 p-6",children:[e.jsxs("h2",{className:"text-xl font-semibold text-gray-900 mb-4 flex items-center gap-2",children:[e.jsx(y,{className:"w-5 h-5"}),"User Data"]}),e.jsx("pre",{className:"bg-gray-50 p-4 rounded-lg overflow-x-auto text-sm",children:JSON.stringify(c,null,2)})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-xs border border-gray-100 p-6",children:[e.jsxs("h2",{className:"text-xl font-semibold text-gray-900 mb-4 flex items-center gap-2",children:[e.jsx(f,{className:"w-5 h-5"}),"Roles Analysis"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-600",children:"Original Role Field"}),e.jsx("p",{className:"text-gray-900 font-mono bg-gray-50 p-2 rounded-sm mt-1",children:c?.role||"null"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-600",children:"Original Roles Field"}),e.jsx("p",{className:"text-gray-900 font-mono bg-gray-50 p-2 rounded-sm mt-1",children:JSON.stringify(c?.roles)||"null"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-600",children:"Normalized Roles (Array)"}),e.jsx("p",{className:"text-gray-900 font-mono bg-gray-50 p-2 rounded-sm mt-1",children:JSON.stringify(d)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-600",children:"Primary Role"}),e.jsx("p",{className:"text-gray-900 font-mono bg-gray-50 p-2 rounded-sm mt-1",children:d[0]||"none"})]})]}),e.jsxs("div",{className:"border-t border-gray-200 pt-4",children:[e.jsx("h3",{className:"font-semibold text-gray-900 mb-3",children:"Role Checks"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[s?e.jsx(a,{className:"w-5 h-5 text-green-600"}):e.jsx(i,{className:"w-5 h-5 text-red-600"}),e.jsxs("span",{className:"text-sm",children:["Has Admin Role: ",s?"Yes":"No"]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[l?e.jsx(a,{className:"w-5 h-5 text-green-600"}):e.jsx(i,{className:"w-5 h-5 text-gray-400"}),e.jsxs("span",{className:"text-sm",children:["Has Seller Role: ",l?"Yes":"No"]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[x?e.jsx(a,{className:"w-5 h-5 text-green-600"}):e.jsx(i,{className:"w-5 h-5 text-gray-400"}),e.jsxs("span",{className:"text-sm",children:["Has Buyer Role: ",x?"Yes":"No"]})]})]})]})]})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-xs border border-gray-100 p-6",children:[e.jsxs("h2",{className:"text-xl font-semibold text-gray-900 mb-4 flex items-center gap-2",children:[e.jsx(v,{className:"w-5 h-5"}),"Authentication Tokens"]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-600",children:"Access Token"}),e.jsx("p",{className:"text-gray-900 font-mono bg-gray-50 p-2 rounded-sm mt-1 text-xs break-all",children:t?.access_token?`${t.access_token.substring(0,50)}...`:"No token found"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-600",children:"Has Active Session"}),e.jsx("p",{className:"text-gray-900 font-mono bg-gray-50 p-2 rounded-sm mt-1",children:n.hasActiveSession()?"true":"false"})]})]})]}),!s&&e.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-xl p-6",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(h,{className:"w-6 h-6 text-yellow-600 shrink-0 mt-0.5"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:"How to Fix Admin Access"}),e.jsxs("div",{className:"text-sm text-gray-700 space-y-2",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Option 1:"})," Update your user account in the database to have 'admin' role"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Option 2:"})," The API login response should return:"]}),e.jsx("pre",{className:"bg-white p-3 rounded-sm border border-yellow-200 mt-2 text-xs overflow-x-auto",children:`{
  "access_token": "...",
  "role": "admin",        // Single role
  // OR
  "roles": ["admin"],     // Array of roles
  "user": "Admin Name",
  "email": "admin@example.com"
}`}),e.jsxs("p",{className:"mt-3",children:[e.jsx("strong",{children:"Option 3:"})," Manually set in localStorage (temporary):"]}),e.jsx("button",{onClick:()=>{const m={...n.getUserData(),roles:["admin"],role:"admin"};n.setUserData(m),window.location.reload()},className:"mt-2 px-4 py-2 bg-yellow-600 text-white rounded-lg hover:bg-yellow-700",children:"Grant Admin Role (Temporary)"})]})]})]})}),s&&e.jsx("div",{className:"bg-green-50 border border-green-200 rounded-xl p-6",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(a,{className:"w-6 h-6 text-green-600 shrink-0"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:"✅ Admin Access Confirmed"}),e.jsx("p",{className:"text-sm text-gray-700",children:"You have admin role and can access all admin pages! Navigate to any admin page from the sidebar."})]})]})})]})})};export{K as default};
