import{j as e,r as c,d as C,I as U,e as N}from"./index-BrJE6Ruv.js";import{E as W,S as Z,a as ee}from"./DashboardLayout-CbQpQ2VH.js";import{U as R,a as D,b as k,S as se}from"./SuspendUserModal-B9sVD4up.js";import{C as te}from"./ConfirmationModal-CR03D5EN.js";import{U as A}from"./users-Btkg261Z.js";import{S as ae}from"./search-JGraeCEO.js";import{M as E}from"./mail-DbM3aU6_.js";import{P as $}from"./phone-wn7fZVnI.js";import{c as O}from"./createLucideIcon-DTbf89oH.js";import{C as L}from"./star-D0UWI2kz.js";import{C as B}from"./clock-B8URdOLJ.js";import{C as f}from"./circle-x-uQfptDzR.js";import{C as M}from"./circle-check-big-CzdoeDj5.js";import{U as re}from"./user-BoLJHLaW.js";import{M as le}from"./map-pin-DjHtAG67.js";import{B as ne}from"./building-gQWnzb3h.js";import{P as ie,C as ce}from"./x-89xIXrzd.js";import{S as oe}from"./shield-Dym4Nj1d.js";import{C as de}from"./credit-card-De6BP3Px.js";import{C as me}from"./chevron-left-DyrGgcS9.js";import"./Logo-yv9J0Zw_.js";import"./house-B5NBqIRK.js";import"./file-check-BlT-5aXD.js";import"./circle-question-mark-DdVU0ul4.js";import"./message-circle-CfRGLCSX.js";import"./file-text-DhmWdPlz.js";import"./info-D8IKXDkN.js";import"./BackgroundArt-Cv4ql44m.js";/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xe=[["path",{d:"M4.929 4.929 19.07 19.071",key:"196cmz"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],V=O("ban",xe);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const he=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]],ge=O("globe",he),pe=({stats:s,isLoading:m})=>{const n=[{title:"Total Users",value:s.total||0,icon:A,color:"bg-blue-500"},{title:"Active Users",value:s.active||0,icon:R,color:"bg-green-500"},{title:"Suspended",value:s.suspended||0,icon:D,color:"bg-red-500"},{title:"New This Month",value:s.newThisMonth||0,icon:A,color:"bg-purple-500"}];return e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:n.map((x,o)=>e.jsx("div",{className:"bg-white rounded-xl shadow-xs border border-gray-100 p-6 hover:shadow-md transition-shadow",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:x.title}),m?e.jsx("div",{className:"h-8 w-20 bg-gray-200 animate-pulse rounded mt-2"}):e.jsx("p",{className:"text-2xl font-bold text-gray-900 mt-2",children:x.value.toLocaleString()}),e.jsx("p",{className:"text-sm text-green-600 mt-2",children:x.change})]}),e.jsx("div",{className:`p-3 rounded-lg ${x.color}`,children:e.jsx(x.icon,{className:"w-6 h-6 text-white"})})]})},o))})},ue=({filters:s,onFilterChange:m})=>e.jsx("div",{className:"bg-white rounded-xl shadow-xs border border-gray-100 p-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsx("div",{className:"md:col-span-2",children:e.jsxs("div",{className:"relative",children:[e.jsx(ae,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),e.jsx("input",{type:"text",placeholder:"Search by name, email, or phone...",value:s.search,onChange:n=>m({...s,search:n.target.value,page:1}),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-brand-500"})]})}),e.jsx("div",{children:e.jsxs("select",{value:s.status,onChange:n=>m({...s,status:n.target.value,page:1}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-brand-500",children:[e.jsx("option",{value:"all",children:"All Status"}),e.jsx("option",{value:"active",children:"Active"}),e.jsx("option",{value:"inactive",children:"Inactive"}),e.jsx("option",{value:"banned",children:"Banned"})]})}),e.jsx("div",{children:e.jsxs("select",{value:s.sortBy,onChange:n=>m({...s,sortBy:n.target.value,page:1}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-brand-500",children:[e.jsx("option",{value:"",children:"Sort By"}),e.jsx("option",{value:"id",children:"ID"}),e.jsx("option",{value:"name",children:"Name"}),e.jsx("option",{value:"email",children:"Email"}),e.jsx("option",{value:"created_at",children:"Join Date"})]})})]})}),fe=({users:s,isLoading:m,onViewUser:n,onSuspendUser:x,onUnsuspendUser:o})=>{const h=t=>{const r={active:{color:"bg-green-100 text-green-800",icon:M,label:"Active"},suspended:{color:"bg-red-100 text-red-800",icon:f,label:"Suspended"},banned:{color:"bg-red-100 text-red-800",icon:f,label:"Banned"},pending:{color:"bg-yellow-100 text-yellow-800",icon:B,label:"Pending"},inactive:{color:"bg-gray-100 text-gray-800",icon:L,label:"Inactive"}},l=r[t?.toLowerCase()]||r.inactive,g=l.icon;return e.jsxs("span",{className:`inline-flex items-center gap-1 px-2.5 py-0.5 rounded-full text-xs font-medium ${l.color}`,children:[e.jsx(g,{className:"w-3 h-3"}),l.label]})},p=t=>{const r={admin:"bg-purple-100 text-purple-800",seller:"bg-blue-100 text-blue-800",buyer:"bg-green-100 text-green-800",user:"bg-gray-100 text-gray-800"},l=Array.isArray(t)?t[0]:t;return e.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${r[l]||r.user}`,children:l})};return e.jsx("div",{className:"bg-white rounded-xl shadow-xs border border-gray-100 overflow-hidden",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"User"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Contact"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Role"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Suspensions"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:m?e.jsx("tr",{children:e.jsx("td",{colSpan:"6",className:"px-6 py-12 text-center",children:e.jsx("div",{className:"flex items-center justify-center",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-brand-500"})})})}):s.length===0?e.jsx("tr",{children:e.jsxs("td",{colSpan:"6",className:"px-6 py-12 text-center",children:[e.jsx(A,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"No users found"})]})}):s.map(t=>{const r=t.user_status||"active",l=r==="suspended"||r==="banned",g=t.suspension_count||0;return e.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center",children:[t.profile_photo?e.jsx("img",{src:t.profile_photo,alt:t.name,className:"w-10 h-10 rounded-full object-cover"}):e.jsx("div",{className:"w-10 h-10 bg-brand-100 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-sm font-semibold text-brand-700",children:t.name?.charAt(0)?.toUpperCase()})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:t.name}),e.jsxs("div",{className:"text-sm text-gray-500",children:["ID: ",t.id]})]})]})}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[e.jsxs("div",{className:"text-sm text-gray-900 flex items-center gap-1",children:[e.jsx(E,{className:"w-4 h-4 text-gray-400"}),t.email]}),t.phone_number&&e.jsxs("div",{className:"text-sm text-gray-500 flex items-center gap-1 mt-1",children:[e.jsx($,{className:"w-4 h-4 text-gray-400"}),t.phone_number]})]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:p(t.roles||"buyer")}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:h(r)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(V,{className:`w-4 h-4 ${g>0?"text-red-500":"text-gray-400"}`}),e.jsxs("span",{className:`text-sm font-medium ${g>0?"text-red-600":"text-gray-500"}`,children:[g," ",g===1?"time":"times"]})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:e.jsxs("div",{className:"flex items-center justify-end gap-2",children:[e.jsx("button",{onClick:()=>n(t),className:"text-brand-600 hover:text-brand-900 p-2 hover:bg-brand-50 rounded-lg transition-colors",title:"View Details",children:e.jsx(W,{className:"w-5 h-5"})}),l?e.jsx("button",{onClick:()=>o(t),className:"text-green-600 hover:text-green-900 p-2 hover:bg-green-50 rounded-lg transition-colors",title:"Unsuspend",children:e.jsx(R,{className:"w-5 h-5"})}):e.jsx("button",{onClick:()=>x(t),className:"text-red-600 hover:text-red-900 p-2 hover:bg-red-50 rounded-lg transition-colors",title:"Suspend",children:e.jsx(D,{className:"w-5 h-5"})})]})})]},t.id)})})]})})})},je=({user:s,isOpen:m,onClose:n})=>{if(!m||!s)return null;const x=t=>{const r={active:{color:"bg-green-100 text-green-800",icon:M,label:"Active"},suspended:{color:"bg-red-100 text-red-800",icon:f,label:"Suspended"},banned:{color:"bg-red-100 text-red-800",icon:f,label:"Banned"},pending:{color:"bg-yellow-100 text-yellow-800",icon:B,label:"Pending"},inactive:{color:"bg-gray-100 text-gray-800",icon:L,label:"Inactive"}},l=r[t?.toLowerCase()]||r.inactive,g=l.icon;return e.jsxs("span",{className:`inline-flex items-center gap-1 px-2.5 py-0.5 rounded-full text-xs font-medium ${l.color}`,children:[e.jsx(g,{className:"w-3 h-3"}),l.label]})},o=t=>{const r={admin:"bg-purple-100 text-purple-800",seller:"bg-blue-100 text-blue-800",buyer:"bg-green-100 text-green-800",user:"bg-gray-100 text-gray-800"},l=Array.isArray(t)?t[0]:t;return e.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${r[l]||r.user}`,children:l})},h=t=>t?new Date(t).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}):"N/A",p=t=>t?new Date(t).toLocaleString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):"N/A";return e.jsx("div",{className:"fixed inset-0 bg-[rgba(0,0,0,.7)] flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-xl max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:[e.jsx("div",{className:"sticky top-0 bg-white p-6 border-b border-gray-200 z-10",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"text-xl font-semibold text-gray-900",children:"User Details"}),e.jsx("button",{onClick:n,className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:e.jsx(f,{className:"w-5 h-5 text-gray-500"})})]})}),e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsx("div",{className:"bg-gradient-to-r from-brand-50 to-blue-50 rounded-lg p-6",children:e.jsxs("div",{className:"flex items-center gap-4",children:[s.profile_photo?e.jsx("img",{src:s.profile_photo,alt:s.name,className:"w-24 h-24 rounded-full object-cover border-4 border-white shadow-lg"}):e.jsx("div",{className:"w-24 h-24 bg-brand-500 rounded-full flex items-center justify-center border-4 border-white shadow-lg",children:e.jsx("span",{className:"text-3xl font-bold text-white",children:s.name?.charAt(0)?.toUpperCase()})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"text-2xl font-bold text-gray-900",children:s.name}),e.jsxs("p",{className:"text-gray-600 flex items-center gap-2 mt-1",children:[e.jsx(E,{className:"w-4 h-4"}),s.email]}),s.phone_number&&e.jsxs("p",{className:"text-gray-600 flex items-center gap-2 mt-1",children:[e.jsx($,{className:"w-4 h-4"}),s.phone_number]}),e.jsxs("div",{className:"flex items-center gap-2 mt-3",children:[x(s.user_status||"active"),o(s.roles||"buyer")]})]})]})}),e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-6",children:[e.jsxs("h5",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center gap-2",children:[e.jsx(re,{className:"w-5 h-5 text-brand-600"}),"Account Information"]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-600",children:"User ID"}),e.jsx("p",{className:"text-gray-900 font-mono",children:s.id})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-600",children:"Email Verified"}),e.jsx("p",{className:"text-gray-900",children:s.email_verified_at?e.jsxs("span",{className:"text-green-600 flex items-center gap-1",children:[e.jsx(M,{className:"w-4 h-4"}),"Verified on ",h(s.email_verified_at)]}):e.jsxs("span",{className:"text-red-600 flex items-center gap-1",children:[e.jsx(f,{className:"w-4 h-4"}),"Not Verified"]})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-600",children:"First Name"}),e.jsx("p",{className:"text-gray-900 flex items-center gap-1",children:s.first_name})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-600",children:"Last Name"}),e.jsx("p",{className:"text-gray-900 flex items-center gap-1",children:s.last_name})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-600",children:"Account Name"}),e.jsx("p",{className:"text-gray-900 flex items-center gap-1",children:s.user_account_name||"N/A"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-600",children:"Bank Name"}),e.jsx("p",{className:"text-gray-900 flex items-center gap-1",children:s.user_bank_name||"N/A"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-600",children:"Account Number"}),e.jsx("p",{className:"text-gray-900 flex items-center gap-1",children:s.user_account_number||"N/A"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-600",children:"Bank Name"}),e.jsx("p",{className:"text-gray-900 flex items-center gap-1",children:s.user_bank_name||"N/A"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-600",children:"Suspension Count"}),e.jsxs("p",{className:"text-gray-900 flex items-center gap-1",children:[e.jsx(V,{className:`w-4 h-4 ${s.suspension_count>0?"text-red-500":"text-gray-400"}`}),e.jsxs("span",{className:s.suspension_count>0?"text-red-600 font-semibold":"",children:[s.suspension_count||0," ",s.suspension_count===1?"time":"times"]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-600",children:"Suspension Reason"}),e.jsx("p",{className:"text-gray-900 flex items-center gap-1",children:s.suspension_reason||"N/A"})]}),s.last_login_at&&e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-600",children:"Last Login"}),e.jsx("p",{className:"text-gray-900",children:p(s.last_login_at)})]})]})]}),(s.country_name||s.state||s.city||s.address)&&e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-6",children:[e.jsxs("h5",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center gap-2",children:[e.jsx(le,{className:"w-5 h-5 text-brand-600"}),"Location Information"]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.country_name&&e.jsxs("div",{children:[e.jsxs("label",{className:"text-sm font-medium text-gray-600 flex items-center gap-1",children:[e.jsx(ge,{className:"w-4 h-4"}),"Country"]}),e.jsx("p",{className:"text-gray-900",children:s.country_name})]}),s.state&&e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-600",children:"State/Province"}),e.jsx("p",{className:"text-gray-900",children:s.state})]}),s.city&&e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-600",children:"City"}),e.jsx("p",{className:"text-gray-900",children:s.city})]}),s.postal_code&&e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-600",children:"Postal Code"}),e.jsx("p",{className:"text-gray-900",children:s.postal_code})]})]}),s.address&&e.jsxs("div",{className:"mt-4",children:[e.jsx("label",{className:"text-sm font-medium text-gray-600",children:"Full Address"}),e.jsx("p",{className:"text-gray-900",children:s.address})]})]}),s.company&&e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-6",children:[e.jsxs("h5",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center gap-2",children:[e.jsx(ne,{className:"w-5 h-5 text-brand-600"}),"Company Information"]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-600",children:"Company Name"}),e.jsx("p",{className:"text-gray-900",children:s.company})]}),s.job_title&&e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-600",children:"Job Title"}),e.jsx("p",{className:"text-gray-900",children:s.job_title})]})]})]}),(s.orders_count!==void 0||s.total_spent!==void 0)&&e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-6",children:[e.jsxs("h5",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center gap-2",children:[e.jsx(Z,{className:"w-5 h-5 text-brand-600"}),"Activity Statistics"]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[s.orders_count!==void 0&&e.jsxs("div",{className:"bg-blue-50 rounded-lg p-4",children:[e.jsx("label",{className:"text-sm font-medium text-blue-600",children:"Total Orders"}),e.jsx("p",{className:"text-2xl font-bold text-blue-900",children:s.orders_count})]}),s.total_spent!==void 0&&e.jsxs("div",{className:"bg-green-50 rounded-lg p-4",children:[e.jsx("label",{className:"text-sm font-medium text-green-600",children:"Total Spent"}),e.jsxs("p",{className:"text-2xl font-bold text-green-900",children:["$",s.total_spent?.toLocaleString()]})]}),s.products_count!==void 0&&e.jsxs("div",{className:"bg-purple-50 rounded-lg p-4",children:[e.jsx("label",{className:"text-sm font-medium text-purple-600",children:"Products Listed"}),e.jsx("p",{className:"text-2xl font-bold text-purple-900",children:s.products_count})]})]})]}),s.seller&&e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-6",children:[e.jsxs("h5",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center gap-2",children:[e.jsx(ie,{className:"w-5 h-5 text-brand-600"}),"Seller Information"]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-600",children:"Store Name"}),e.jsx("p",{className:"text-gray-900 font-semibold",children:s.seller.store_name})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-600",children:"Business Phone"}),e.jsx("p",{className:"text-gray-900",children:s.seller.business_phone_number||"N/A"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-600",children:"KYC Status"}),e.jsx("p",{className:"text-gray-900",children:s.seller.kyc_verified_at?e.jsxs("span",{className:"text-green-600 flex items-center gap-1",children:[e.jsx(oe,{className:"w-4 h-4"}),"Verified on ",h(s.seller.kyc_verified_at)]}):e.jsxs("span",{className:"text-yellow-600 flex items-center gap-1",children:[e.jsx(B,{className:"w-4 h-4"}),"Pending Verification"]})})]}),s.seller.store_rating&&e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-600",children:"Store Rating"}),e.jsxs("p",{className:"text-gray-900 font-semibold",children:["â­ ",s.seller.store_rating," / 5.0"]})]})]}),s.seller.business_bio&&e.jsxs("div",{className:"mt-4",children:[e.jsx("label",{className:"text-sm font-medium text-gray-600",children:"Business Bio"}),e.jsx("p",{className:"text-gray-900 bg-gray-50 p-3 rounded-lg mt-1",children:s.seller.business_bio})]}),(s.seller.bank_name||s.seller.bank_account_number)&&e.jsxs("div",{className:"mt-4 pt-4 border-t border-gray-200",children:[e.jsxs("h6",{className:"text-md font-semibold text-gray-900 mb-3 flex items-center gap-2",children:[e.jsx(de,{className:"w-4 h-4 text-brand-600"}),"Banking Information"]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-600",children:"Bank Name"}),e.jsx("p",{className:"text-gray-900",children:s.seller.bank_name||"N/A"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-600",children:"Account Number"}),e.jsx("p",{className:"text-gray-900 font-mono",children:s.seller.bank_account_number?`****${s.seller.bank_account_number.slice(-4)}`:"N/A"})]})]})]})]}),s.suspension_reason&&e.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-6",children:[e.jsxs("h5",{className:"text-lg font-semibold text-red-900 mb-4 flex items-center gap-2",children:[e.jsx(L,{className:"w-5 h-5 text-red-600"}),"Suspension Information"]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-red-700",children:"Last Suspension Reason"}),e.jsx("p",{className:"text-red-900 bg-white p-3 rounded-lg mt-1",children:s.suspension_reason})]}),s.suspended_at&&e.jsxs("div",{className:"mt-3",children:[e.jsx("label",{className:"text-sm font-medium text-red-700",children:"Suspended On"}),e.jsx("p",{className:"text-red-900",children:p(s.suspended_at)})]})]})]})]})})},be=({pagination:s,filters:m,onPageChange:n,isLoading:x})=>{const{current_page:o,last_page:h,total:p,from:t,to:r}=s;return e.jsxs("div",{className:"bg-gray-50 px-6 py-4 border-t border-gray-200 rounded-xl flex flex-col gap-3 items-center justify-between md:flex-row",children:[e.jsxs("div",{className:"text-sm text-gray-700",children:["Showing ",e.jsx("span",{className:"font-bold",children:t||0})," to"," ",e.jsx("span",{className:"font-bold",children:r||0})," of"," ",e.jsx("span",{className:"font-bold",children:p||0})," users"]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("button",{onClick:()=>n(o-1),disabled:o===1||x,className:"p-1 py-1 border border-gray-300 rounded-lg disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-100 transition-colors md:px-3",children:e.jsx(me,{className:"w-5 h-5"})}),e.jsxs("span",{className:"text-sm text-gray-900",children:["Page ",o," of ",h]}),e.jsx("button",{onClick:()=>n(o+1),disabled:o===h||x,className:"p-1 py-1 border border-gray-300 rounded-lg disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-100 transition-colors md:px-3",children:e.jsx(ce,{className:"w-5 h-5"})})]})]})},Ye=()=>{const[s,m]=c.useState([]),[n,x]=c.useState({}),[o,h]=c.useState(!0),[p,t]=c.useState(!1),[r,l]=c.useState(null),[g,I]=c.useState(!1),[F,v]=c.useState(!1),[P,w]=c.useState(!1),[d,T]=c.useState({search:"",status:"all",sortBy:"",sortOrder:"desc",page:1,per_page:20}),[_,z]=c.useState({current_page:1,last_page:1,total:0,from:0,to:0}),S=c.useRef(!1),b=c.useRef(!1);c.useEffect(()=>{b.current&&j()},[d.page,d.status,d.sortBy]),c.useEffect(()=>{if(!b.current)return;const a=setTimeout(()=>{(d.search||d.search==="")&&j()},500);return()=>clearTimeout(a)},[d.search]),c.useEffect(()=>{b.current||(b.current=!0,j())},[]),c.useEffect(()=>{s.length>0&&G(s)},[s]);const G=a=>{const i=a.filter(y=>y.user_status?.toLowerCase()==="active").length,u=a.filter(y=>y.user_status?.toLowerCase()==="suspended"||y.user_status?.toLowerCase()==="banned").length;x({total:_.total||a.length,active:i,suspended:u,newThisMonth:0,growth:"+0%",activeGrowth:"+0%",suspendedChange:"0",monthlyGrowth:"+0%"})},j=async()=>{if(S.current){console.log("Load already in progress, skipping...");return}try{S.current=!0,h(!0);const a={search_global:d.search,status:d.status,sortBy:d.sortBy,sortOrder:d.sortOrder},i=await k.getAllCustomers(d.page,d.per_page,a),u=i.data;console.log(u),i.data&&Array.isArray(i.data)?m(i.data):i.data&&i.data.data&&Array.isArray(i.data.data)?m(i.data.data):m([]),u.meta&&z({current_page:u.meta.current_page||1,last_page:u.meta.last_page||1,total:u.meta.total||0,from:u.meta.from||0,to:u.meta.to||0})}catch(a){console.error("Failed to load users:",a),a.message?.includes("aborted")||C(U(a))}finally{h(!1),S.current=!1}},J=a=>{l(a),I(!0)},X=a=>{l(a),v(!0)},K=async a=>{if(r)try{t(!0);const i=await k.suspendUser(r.id,a);i.message?N(i.message):N("User suspended successfully"),v(!1),l(null),j()}catch(i){console.error("Failed to suspend user:",i),C(U(i))}finally{t(!1)}},Y=a=>{l(a),w(!0)},q=async()=>{if(r)try{t(!0);const a=await k.unsuspendUser(r.id);a.message?N(a.message):N("User unsuspended successfully"),w(!1),l(null),j()}catch(a){console.error("Failed to unsuspend user:",a),C(U(a))}finally{t(!1)}},H=a=>{a>=1&&a<=_.last_page&&(T({...d,page:a}),window.scrollTo({top:0,behavior:"smooth"}))},Q=a=>{T(a)};return e.jsxs(ee,{children:[e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"User Management"}),e.jsx("p",{className:"text-gray-600 mt-2",children:"Manage all platform users and their accounts"})]}),e.jsx(pe,{stats:n,isLoading:!1}),e.jsx(ue,{filters:d,onFilterChange:Q}),e.jsx(fe,{users:s,isLoading:o,onViewUser:J,onSuspendUser:X,onUnsuspendUser:Y}),!o&&s.length>0&&e.jsx(be,{pagination:_,filters:d,onPageChange:H,isLoading:o})]}),e.jsx(je,{user:r,isOpen:g,onClose:()=>{I(!1),l(null)}}),e.jsx(se,{user:r,isOpen:F,onClose:()=>{v(!1),l(null)},onConfirm:K,isLoading:p}),P&&r&&e.jsx(te,{isOpen:P,onClose:()=>{w(!1),l(null)},onConfirm:q,title:"Unsuspend User",message:`Are you sure you want to unsuspend ${r.name}? They will regain access to the platform.`,confirmText:"Unsuspend",type:"success",isLoading:p})]})};export{Ye as default};
