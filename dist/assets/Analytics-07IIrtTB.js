import{S as lt,p as Pe,l as j,m as pe,n as k,o as he,q as me,t as Me,v as at,w as U,x as ut,y as dt,z as Ie,A as Ge,r as y,B as gt,C as ct,D as T,j as l,h as W}from"./index-BrJE6Ruv.js";import{D as ft,a as pt}from"./DashboardLayout-CbQpQ2VH.js";import{C as be,S as ht}from"./star-D0UWI2kz.js";import{U as mt}from"./users-Btkg261Z.js";import{P as ze,C as St}from"./x-89xIXrzd.js";import{B as vt}from"./Button-NP5qGopO.js";import{D as Ct}from"./download-DV0tIHac.js";import{C as ke,a as Be,R as Y,b as J,X as Z,Y as ee,T as te,L as ne,c as Ue,B as qe}from"./CartesianChart-D0B7JeeO.js";import{S as xt}from"./search-JGraeCEO.js";import{c as Ke}from"./createLucideIcon-DTbf89oH.js";import{C as wt}from"./chevron-left-DyrGgcS9.js";import"./Logo-yv9J0Zw_.js";import"./house-B5NBqIRK.js";import"./file-check-BlT-5aXD.js";import"./circle-question-mark-DdVU0ul4.js";import"./message-circle-CfRGLCSX.js";import"./file-text-DhmWdPlz.js";import"./info-D8IKXDkN.js";import"./user-BoLJHLaW.js";import"./BackgroundArt-Cv4ql44m.js";var Rt=class extends lt{constructor(e,n){super(),this.options=n,this.#n=e,this.#o=null,this.#r=Pe(),this.bindMethods(),this.setOptions(n)}#n;#e=void 0;#p=void 0;#t=void 0;#i;#d;#r;#o;#h;#g;#c;#l;#a;#s;#f=new Set;bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(this.#e.addObserver(this),je(this.#e,this.options)?this.#u():this.updateResult(),this.#C())}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return Se(this.#e,this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return Se(this.#e,this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,this.#x(),this.#w(),this.#e.removeObserver(this)}setOptions(e){const n=this.options,t=this.#e;if(this.options=this.#n.defaultQueryOptions(e),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof j(this.options.enabled,this.#e)!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");this.#R(),this.#e.setOptions(this.options),n._defaulted&&!pe(this.options,n)&&this.#n.getQueryCache().notify({type:"observerOptionsUpdated",query:this.#e,observer:this});const r=this.hasListeners();r&&De(this.#e,t,this.options,n)&&this.#u(),this.updateResult(),r&&(this.#e!==t||j(this.options.enabled,this.#e)!==j(n.enabled,this.#e)||k(this.options.staleTime,this.#e)!==k(n.staleTime,this.#e))&&this.#m();const o=this.#S();r&&(this.#e!==t||j(this.options.enabled,this.#e)!==j(n.enabled,this.#e)||o!==this.#s)&&this.#v(o)}getOptimisticResult(e){const n=this.#n.getQueryCache().build(this.#n,e),t=this.createResult(n,e);return _t(this,t)&&(this.#t=t,this.#d=this.options,this.#i=this.#e.state),t}getCurrentResult(){return this.#t}trackResult(e,n){return new Proxy(e,{get:(t,r)=>(this.trackProp(r),n?.(r),r==="promise"&&(this.trackProp("data"),!this.options.experimental_prefetchInRender&&this.#r.status==="pending"&&this.#r.reject(new Error("experimental_prefetchInRender feature flag is not enabled"))),Reflect.get(t,r))})}trackProp(e){this.#f.add(e)}getCurrentQuery(){return this.#e}refetch({...e}={}){return this.fetch({...e})}fetchOptimistic(e){const n=this.#n.defaultQueryOptions(e),t=this.#n.getQueryCache().build(this.#n,n);return t.fetch().then(()=>this.createResult(t,n))}fetch(e){return this.#u({...e,cancelRefetch:e.cancelRefetch??!0}).then(()=>(this.updateResult(),this.#t))}#u(e){this.#R();let n=this.#e.fetch(this.options,e);return e?.throwOnError||(n=n.catch(he)),n}#m(){this.#x();const e=k(this.options.staleTime,this.#e);if(me||this.#t.isStale||!Me(e))return;const t=at(this.#t.dataUpdatedAt,e)+1;this.#l=U.setTimeout(()=>{this.#t.isStale||this.updateResult()},t)}#S(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(this.#e):this.options.refetchInterval)??!1}#v(e){this.#w(),this.#s=e,!(me||j(this.options.enabled,this.#e)===!1||!Me(this.#s)||this.#s===0)&&(this.#a=U.setInterval(()=>{(this.options.refetchIntervalInBackground||ut.isFocused())&&this.#u()},this.#s))}#C(){this.#m(),this.#v(this.#S())}#x(){this.#l&&(U.clearTimeout(this.#l),this.#l=void 0)}#w(){this.#a&&(U.clearInterval(this.#a),this.#a=void 0)}createResult(e,n){const t=this.#e,r=this.options,o=this.#t,s=this.#i,i=this.#d,u=e!==t?e.state:this.#p,{state:d}=e;let f={...d},m=!1,c;if(n._optimisticResults){const $=this.hasListeners(),b=!$&&je(e,n),N=$&&De(e,t,n,r);(b||N)&&(f={...f,...dt(d.data,e.options)}),n._optimisticResults==="isRestoring"&&(f.fetchStatus="idle")}let{error:g,errorUpdatedAt:p,status:h}=f;c=f.data;let C=!1;if(n.placeholderData!==void 0&&c===void 0&&h==="pending"){let $;o?.isPlaceholderData&&n.placeholderData===i?.placeholderData?($=o.data,C=!0):$=typeof n.placeholderData=="function"?n.placeholderData(this.#c?.state.data,this.#c):n.placeholderData,$!==void 0&&(h="success",c=Ie(o?.data,$,n),m=!0)}if(n.select&&c!==void 0&&!C)if(o&&c===s?.data&&n.select===this.#h)c=this.#g;else try{this.#h=n.select,c=n.select(c),c=Ie(o?.data,c,n),this.#g=c,this.#o=null}catch($){this.#o=$}this.#o&&(g=this.#o,c=this.#g,p=Date.now(),h="error");const x=f.fetchStatus==="fetching",w=h==="pending",R=h==="error",P=w&&x,_=c!==void 0,M={status:h,fetchStatus:f.fetchStatus,isPending:w,isSuccess:h==="success",isError:R,isInitialLoading:P,isLoading:P,data:c,dataUpdatedAt:f.dataUpdatedAt,error:g,errorUpdatedAt:p,failureCount:f.fetchFailureCount,failureReason:f.fetchFailureReason,errorUpdateCount:f.errorUpdateCount,isFetched:f.dataUpdateCount>0||f.errorUpdateCount>0,isFetchedAfterMount:f.dataUpdateCount>u.dataUpdateCount||f.errorUpdateCount>u.errorUpdateCount,isFetching:x,isRefetching:x&&!w,isLoadingError:R&&!_,isPaused:f.fetchStatus==="paused",isPlaceholderData:m,isRefetchError:R&&_,isStale:ye(e,n),refetch:this.refetch,promise:this.#r,isEnabled:j(n.enabled,e)!==!1};if(this.options.experimental_prefetchInRender){const $=H=>{M.status==="error"?H.reject(M.error):M.data!==void 0&&H.resolve(M.data)},b=()=>{const H=this.#r=M.promise=Pe();$(H)},N=this.#r;switch(N.status){case"pending":e.queryHash===t.queryHash&&$(N);break;case"fulfilled":(M.status==="error"||M.data!==N.value)&&b();break;case"rejected":(M.status!=="error"||M.error!==N.reason)&&b();break}}return M}updateResult(){const e=this.#t,n=this.createResult(this.#e,this.options);if(this.#i=this.#e.state,this.#d=this.options,this.#i.data!==void 0&&(this.#c=this.#e),pe(n,e))return;this.#t=n;const t=()=>{if(!e)return!0;const{notifyOnChangeProps:r}=this.options,o=typeof r=="function"?r():r;if(o==="all"||!o&&!this.#f.size)return!0;const s=new Set(o??this.#f);return this.options.throwOnError&&s.add("error"),Object.keys(this.#t).some(i=>{const a=i;return this.#t[a]!==e[a]&&s.has(a)})};this.#y({listeners:t()})}#R(){const e=this.#n.getQueryCache().build(this.#n,this.options);if(e===this.#e)return;const n=this.#e;this.#e=e,this.#p=e.state,this.hasListeners()&&(n?.removeObserver(this),e.addObserver(this))}onQueryUpdate(){this.updateResult(),this.hasListeners()&&this.#C()}#y(e){Ge.batch(()=>{e.listeners&&this.listeners.forEach(n=>{n(this.#t)}),this.#n.getQueryCache().notify({query:this.#e,type:"observerResultsUpdated"})})}};function yt(e,n){return j(n.enabled,e)!==!1&&e.state.data===void 0&&!(e.state.status==="error"&&n.retryOnMount===!1)}function je(e,n){return yt(e,n)||e.state.data!==void 0&&Se(e,n,n.refetchOnMount)}function Se(e,n,t){if(j(n.enabled,e)!==!1&&k(n.staleTime,e)!=="static"){const r=typeof t=="function"?t(e):t;return r==="always"||r!==!1&&ye(e,n)}return!1}function De(e,n,t,r){return(e!==n||j(r.enabled,e)===!1)&&(!t.suspense||e.state.status!=="error")&&ye(e,t)}function ye(e,n){return j(n.enabled,e)!==!1&&e.isStaleByTime(k(n.staleTime,e))}function _t(e,n){return!pe(e.getCurrentResult(),n)}var Qe=y.createContext(!1),Ft=()=>y.useContext(Qe);Qe.Provider;function $t(){let e=!1;return{clearReset:()=>{e=!1},reset:()=>{e=!0},isReset:()=>e}}var Pt=y.createContext($t()),Mt=()=>y.useContext(Pt),It=(e,n)=>{(e.suspense||e.throwOnError||e.experimental_prefetchInRender)&&(n.isReset()||(e.retryOnMount=!1))},jt=e=>{y.useEffect(()=>{e.clearReset()},[e])},Dt=({result:e,errorResetBoundary:n,throwOnError:t,query:r,suspense:o})=>e.isError&&!n.isReset()&&!e.isFetching&&r&&(o&&e.data===void 0||gt(t,[e.error,r])),Et=e=>{if(e.suspense){const t=o=>o==="static"?o:Math.max(o??1e3,1e3),r=e.staleTime;e.staleTime=typeof r=="function"?(...o)=>t(r(...o)):t(r),typeof e.gcTime=="number"&&(e.gcTime=Math.max(e.gcTime,1e3))}},Vt=(e,n)=>e.isLoading&&e.isFetching&&!n,Nt=(e,n)=>e?.suspense&&n.isPending,Ee=(e,n,t)=>n.fetchOptimistic(e).catch(()=>{t.clearReset()});function Lt(e,n,t){const r=Ft(),o=Mt(),s=ct(),i=s.defaultQueryOptions(e);s.getDefaultOptions().queries?._experimental_beforeQuery?.(i),i._optimisticResults=r?"isRestoring":"optimistic",Et(i),It(i,o),jt(o);const a=!s.getQueryCache().get(i.queryHash),[u]=y.useState(()=>new n(s,i)),d=u.getOptimisticResult(i),f=!r&&e.subscribed!==!1;if(y.useSyncExternalStore(y.useCallback(m=>{const c=f?u.subscribe(Ge.batchCalls(m)):he;return u.updateResult(),c},[u,f]),()=>u.getCurrentResult(),()=>u.getCurrentResult()),y.useEffect(()=>{u.setOptions(i)},[i,u]),Nt(i,d))throw Ee(i,u,o);if(Dt({result:d,errorResetBoundary:o,throwOnError:i.throwOnError,query:s.getQueryCache().get(i.queryHash),suspense:i.suspense}))throw d.error;return s.getDefaultOptions().queries?._experimental_afterQuery?.(i,d),i.experimental_prefetchInRender&&!me&&Vt(d,r)&&(a?Ee(i,u,o):s.getQueryCache().get(i.queryHash)?.promise)?.catch(he).finally(()=>{u.updateResult()}),i.notifyOnChangeProps?d:u.trackResult(d)}function G(e,n){return Lt(e,Rt)}/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ot=[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]],At=Ke("arrow-down",Ot);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ht=[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]],Tt=Ke("arrow-up",Ht),Ve=Symbol.for("constructDateFrom");function Xe(e,n){return typeof e=="function"?e(n):e&&typeof e=="object"&&Ve in e?e[Ve](n):e instanceof Date?new e.constructor(n):new Date(n)}function Gt(e,n){return Xe(e,e)}function bt(e,n,t){const r=Gt(e);return isNaN(n)?Xe(e,NaN):(r.setDate(r.getDate()+n),r)}function zt(e,n,t){return bt(e,-29)}const kt=async(e={})=>{try{return await T.get("/seller/vendor_stats",{searchParams:e})}catch(n){throw console.error("Error fetching vendor stats:",n),n}},Bt=async(e={})=>{try{return await T.get("/seller/sold_products",{searchParams:e})}catch(n){throw console.error("Error fetching sold products:",n),n}},Ut=async(e={})=>{try{return await T.get("/seller/purchased_catgeory",{searchParams:e})}catch(n){throw console.error("Error fetching purchased categories:",n),n}},qt=async(e={})=>{try{return await T.get("/seller/top_categories",{searchParams:e})}catch(n){throw console.error("Error fetching top categories:",n),n}},Kt=async(e={})=>{try{return await T.get("/seller/popular_products",{searchParams:e})}catch(n){throw console.error("Error fetching popular products:",n),n}},Qt=async()=>{try{return await T.get("/seller/weekly_out_of_stock_products")}catch(e){throw console.error("Error fetching weekly out-of-stock products:",e),e}},Xt=async(e={})=>{try{return await T.get("/seller/revenue_growth",{searchParams:e})}catch(n){throw console.error("Error fetching revenue growth:",n),n}},re=({title:e,children:n,isLoading:t})=>l.jsxs("div",{className:"bg-white rounded-xl shadow-xs border border-gray-100 p-4 md:p-6 h-full",children:[l.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:e}),l.jsx("div",{className:"h-full",children:t?l.jsx("div",{className:"flex items-center justify-center h-full min-h-[300px]",children:l.jsx(W,{message:`Loading ${e}...`})}):n})]}),V=({message:e})=>l.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-center text-red-600 bg-red-50 rounded-lg p-4 min-h-[300px]",children:[l.jsx(be,{className:"w-12 h-12 mb-2"}),l.jsx("p",{className:"font-semibold",children:"Could not load data"}),l.jsx("p",{className:"text-sm",children:e})]}),oe=({children:e})=>l.jsxs("div",{className:"mt-4 p-4 bg-gray-50 border border-gray-200 rounded-lg",children:[l.jsx("h4",{className:"text-sm font-semibold text-gray-800 mb-2",children:"Insights"}),l.jsx("div",{className:"text-sm text-gray-600 space-y-2",children:e})]}),Wt=e=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:1}).format(e),Yt=e=>Intl.NumberFormat("en-US",{notation:"compact",maximumFractionDigits:1}).format(e),Jt=({filters:e})=>{const{data:n,isLoading:t,isError:r,error:o}=G({queryKey:["vendorStats",e],queryFn:()=>kt(e)}),s=n?.data,i=[{title:"Total Revenue",value:+s?.total_revenue||0,icon:ft,color:"text-green-600",isCurrency:!0},{title:"Total Reviews",value:+s?.total_reviews||0,icon:mt,color:"text-blue-600",isCurrency:!1},{title:"Total Products",value:+s?.total_products||0,icon:ze,color:"text-brand-600",isCurrency:!1},{title:"Total Orders",value:+s?.total_orders||0,icon:ht,color:"text-yellow-500",isCurrency:!1}];return t?l.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[...Array(4)].map((a,u)=>l.jsx("div",{className:"bg-white rounded-xl shadow-xs border border-gray-100 p-6 h-32 flex items-center justify-center",children:l.jsx(W,{})},u))}):r?l.jsx(V,{message:o.message}):l.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:i.map((a,u)=>l.jsx("div",{className:"bg-white rounded-xl shadow-xs border border-gray-100 p-6",children:l.jsxs("div",{className:"flex items-start justify-between",children:[l.jsxs("div",{className:"flex-1",children:[l.jsx("p",{className:"text-sm font-medium text-gray-600",children:a.title}),l.jsx("p",{className:`mt-2 font-bold ${a.isText?"text-sm truncate":"text-xl"}`,children:a.value>=1e6?(a.isCurrency?"$":"")+Yt(a.value):a.isCurrency?Wt(a.value):a.value})]}),l.jsx("div",{className:"p-2 bg-gray-100 rounded-lg",children:l.jsx(a.icon,{className:`w-6 h-6 ${a.color}`})})]})},u))})},Zt=({dateRange:e,onDateRangeChange:n})=>l.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4",children:[l.jsxs("div",{children:[l.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Analytics Overview"}),l.jsx("p",{className:"text-gray-600 mt-2",children:"Explore your store’s performance with filterable insights."})]}),l.jsx("div",{className:"flex items-center gap-2",children:l.jsxs(vt,{variant:"outline",className:"gap-2",children:[l.jsx(Ct,{className:"w-4 h-4"})," Export CSV"]})})]});var en=["axis"],We=y.forwardRef((e,n)=>y.createElement(ke,{chartName:"LineChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:en,tooltipPayloadSearcher:Be,categoricalChartProps:e,ref:n})),tn=["axis","item"],Ye=y.forwardRef((e,n)=>y.createElement(ke,{chartName:"BarChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:tn,tooltipPayloadSearcher:Be,categoricalChartProps:e,ref:n}));const X=e=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:0}).format(e),nn=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],Ne=["#8884d8","#82ca9d","#ffc658","#FF8042","#0088FE"],rn=({active:e,payload:n,label:t,soldProducts:r})=>e&&n&&n.length&&r?l.jsxs("div",{className:"bg-white p-3 shadow-xl rounded-lg border border-gray-200",children:[l.jsx("p",{className:"font-bold text-gray-900 text-lg mb-2",children:t}),n.map(o=>{const s=r.find(i=>i.product_name===o.dataKey);return s?l.jsxs("div",{className:"flex items-center gap-3 py-2",children:[l.jsx("img",{src:s.product_photo,alt:s.product_name,className:"w-12 h-12 rounded-lg object-cover"}),l.jsxs("div",{children:[l.jsx("p",{style:{color:o.color},className:"font-semibold",children:o.dataKey}),l.jsxs("p",{className:"text-sm text-gray-700",children:["Day's Revenue:"," ",l.jsx("strong",{children:X(o.value)})]}),l.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Total Sales: ",s.sales_count]}),l.jsxs("p",{className:"text-xs text-gray-500",children:["Total Revenue:"," ",X(s.total_amount)]})]})]},o.dataKey):null})]}):null,on=({filters:e})=>{const{data:n,isLoading:t,isError:r,error:o}=G({queryKey:["soldProducts",e],queryFn:()=>Bt(e)}),s=n?.data||[],{dayMap:i,productNames:a}=s.reduce((c,g)=>(c.productNames.includes(g.product_name)||c.productNames.push(g.product_name),g.daily_data.forEach(p=>{const h=p.day_of_week;c.dayMap[h]||(c.dayMap[h]={name:nn[h-1]||`Day ${h}`,day_index:h}),c.dayMap[h][g.product_name]=Number(p.total_amount||0)}),c),{dayMap:{},productNames:[]}),u=Object.values(i).sort((c,g)=>c.day_index-g.day_index),{bestDay:d,totalRevenue:f}=u.reduce((c,g)=>{const p=a.reduce((h,C)=>h+(g[C]||0),0);return p>c.bestDay.total&&(c.bestDay.total=p,c.bestDay.name=g.name),c},{bestDay:{name:"N/A",total:0}}),m=s.reduce((c,g)=>c+Number(g.total_amount||0),0);return l.jsx(re,{title:"Top Products Revenue by Day",isLoading:t,children:r?l.jsx(V,{message:o.message}):u.length===0?l.jsx(V,{message:"No sales data found for this period."}):l.jsxs(l.Fragment,{children:[l.jsx(Y,{width:"100%",height:350,children:l.jsxs(We,{data:u,children:[l.jsx(J,{strokeDasharray:"3 3"}),l.jsx(Z,{dataKey:"name",stroke:"#888888",fontSize:12}),l.jsx(ee,{stroke:"#888888",fontSize:12,tickFormatter:c=>`$${c/1e3}k`}),l.jsx(te,{content:l.jsx(rn,{soldProducts:s})}),l.jsx(ne,{wrapperStyle:{fontSize:12}}),a.map((c,g)=>l.jsx(Ue,{type:"monotone",dataKey:c,stroke:Ne[g%Ne.length],strokeWidth:2,activeDot:{r:8}},c))]})}),l.jsx(oe,{children:l.jsxs("p",{children:["You generated"," ",l.jsx("span",{className:"font-semibold text-gray-900",children:X(m)})," ","in revenue from your top products during this period. Your best performing day was"," ",l.jsx("span",{className:"font-semibold text-gray-900",children:d.name}),", contributing"," ",l.jsx("span",{className:"font-semibold text-green-600",children:X(d.total)}),"."]})})]})})},sn=e=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:0}).format(e),ln=({filters:e})=>{const{data:n,isLoading:t,isError:r,error:o}=G({queryKey:["purchasedCategories",e],queryFn:()=>Ut(e)}),s=(n?.data||[]).map(a=>({name:a.name,Revenue:Number(a.total_revenue||0)})).sort((a,u)=>a.Revenue-u.Revenue),i=s[s.length-1];return l.jsx(re,{title:"Top Categories by Revenue",isLoading:t,children:r?l.jsx(V,{message:o.message}):l.jsxs(l.Fragment,{children:[l.jsx(Y,{width:"100%",height:300,children:l.jsxs(Ye,{data:s,layout:"vertical",margin:{top:5,right:30,left:20,bottom:5},children:[l.jsx(J,{strokeDasharray:"3 3",horizontal:!1}),l.jsx(Z,{type:"number",tickFormatter:a=>`$${a/1e3}k`}),l.jsx(ee,{dataKey:"name",type:"category",fontSize:12,tickLine:!1,axisLine:!1,width:80}),l.jsx(te,{}),l.jsx(ne,{}),l.jsx(qe,{dataKey:"Revenue",fill:"#82ca9d",radius:[0,4,4,0]})]})}),l.jsx(oe,{children:l.jsxs("p",{children:["Your top performing category is"," ",l.jsx("span",{className:"font-semibold text-gray-900",children:i?.name||"N/A"}),", which generated"," ",l.jsx("span",{className:"font-semibold text-green-600",children:sn(i?.Revenue||0)})," ","in sales for this period."]})})]})})};/**
   * table-core
   *
   * Copyright (c) TanStack
   *
   * This source code is licensed under the MIT license found in the
   * LICENSE.md file in the root directory of this source tree.
   *
   * @license MIT
   */function L(e,n){return typeof e=="function"?e(n):e}function I(e,n){return t=>{n.setState(r=>({...r,[e]:L(t,r[e])}))}}function se(e){return e instanceof Function}function an(e){return Array.isArray(e)&&e.every(n=>typeof n=="number")}function un(e,n){const t=[],r=o=>{o.forEach(s=>{t.push(s);const i=n(s);i!=null&&i.length&&r(i)})};return r(e),t}function S(e,n,t){let r=[],o;return s=>{let i;t.key&&t.debug&&(i=Date.now());const a=e(s);if(!(a.length!==r.length||a.some((f,m)=>r[m]!==f)))return o;r=a;let d;if(t.key&&t.debug&&(d=Date.now()),o=n(...a),t==null||t.onChange==null||t.onChange(o),t.key&&t.debug&&t!=null&&t.debug()){const f=Math.round((Date.now()-i)*100)/100,m=Math.round((Date.now()-d)*100)/100,c=m/16,g=(p,h)=>{for(p=String(p);p.length<h;)p=" "+p;return p};console.info(`%c⏱ ${g(m,5)} /${g(f,5)} ms`,`
            font-size: .6rem;
            font-weight: bold;
            color: hsl(${Math.max(0,Math.min(120-120*c,120))}deg 100% 31%);`,t?.key)}return o}}function v(e,n,t,r){return{debug:()=>{var o;return(o=e?.debugAll)!=null?o:e[n]},key:!1,onChange:r}}function dn(e,n,t,r){const o=()=>{var i;return(i=s.getValue())!=null?i:e.options.renderFallbackValue},s={id:`${n.id}_${t.id}`,row:n,column:t,getValue:()=>n.getValue(r),renderValue:o,getContext:S(()=>[e,t,n,s],(i,a,u,d)=>({table:i,column:a,row:u,cell:d,getValue:d.getValue,renderValue:d.renderValue}),v(e.options,"debugCells"))};return e._features.forEach(i=>{i.createCell==null||i.createCell(s,t,n,e)},{}),s}function gn(e,n,t,r){var o,s;const a={...e._getDefaultColumnDef(),...n},u=a.accessorKey;let d=(o=(s=a.id)!=null?s:u?typeof String.prototype.replaceAll=="function"?u.replaceAll(".","_"):u.replace(/\./g,"_"):void 0)!=null?o:typeof a.header=="string"?a.header:void 0,f;if(a.accessorFn?f=a.accessorFn:u&&(u.includes(".")?f=c=>{let g=c;for(const h of u.split(".")){var p;g=(p=g)==null?void 0:p[h]}return g}:f=c=>c[a.accessorKey]),!d)throw new Error;let m={id:`${String(d)}`,accessorFn:f,parent:r,depth:t,columnDef:a,columns:[],getFlatColumns:S(()=>[!0],()=>{var c;return[m,...(c=m.columns)==null?void 0:c.flatMap(g=>g.getFlatColumns())]},v(e.options,"debugColumns")),getLeafColumns:S(()=>[e._getOrderColumnsFn()],c=>{var g;if((g=m.columns)!=null&&g.length){let p=m.columns.flatMap(h=>h.getLeafColumns());return c(p)}return[m]},v(e.options,"debugColumns"))};for(const c of e._features)c.createColumn==null||c.createColumn(m,e);return m}const F="debugHeaders";function Le(e,n,t){var r;let s={id:(r=t.id)!=null?r:n.id,column:n,index:t.index,isPlaceholder:!!t.isPlaceholder,placeholderId:t.placeholderId,depth:t.depth,subHeaders:[],colSpan:0,rowSpan:0,headerGroup:null,getLeafHeaders:()=>{const i=[],a=u=>{u.subHeaders&&u.subHeaders.length&&u.subHeaders.map(a),i.push(u)};return a(s),i},getContext:()=>({table:e,header:s,column:n})};return e._features.forEach(i=>{i.createHeader==null||i.createHeader(s,e)}),s}const cn={createTable:e=>{e.getHeaderGroups=S(()=>[e.getAllColumns(),e.getVisibleLeafColumns(),e.getState().columnPinning.left,e.getState().columnPinning.right],(n,t,r,o)=>{var s,i;const a=(s=r?.map(m=>t.find(c=>c.id===m)).filter(Boolean))!=null?s:[],u=(i=o?.map(m=>t.find(c=>c.id===m)).filter(Boolean))!=null?i:[],d=t.filter(m=>!(r!=null&&r.includes(m.id))&&!(o!=null&&o.includes(m.id)));return q(n,[...a,...d,...u],e)},v(e.options,F)),e.getCenterHeaderGroups=S(()=>[e.getAllColumns(),e.getVisibleLeafColumns(),e.getState().columnPinning.left,e.getState().columnPinning.right],(n,t,r,o)=>(t=t.filter(s=>!(r!=null&&r.includes(s.id))&&!(o!=null&&o.includes(s.id))),q(n,t,e,"center")),v(e.options,F)),e.getLeftHeaderGroups=S(()=>[e.getAllColumns(),e.getVisibleLeafColumns(),e.getState().columnPinning.left],(n,t,r)=>{var o;const s=(o=r?.map(i=>t.find(a=>a.id===i)).filter(Boolean))!=null?o:[];return q(n,s,e,"left")},v(e.options,F)),e.getRightHeaderGroups=S(()=>[e.getAllColumns(),e.getVisibleLeafColumns(),e.getState().columnPinning.right],(n,t,r)=>{var o;const s=(o=r?.map(i=>t.find(a=>a.id===i)).filter(Boolean))!=null?o:[];return q(n,s,e,"right")},v(e.options,F)),e.getFooterGroups=S(()=>[e.getHeaderGroups()],n=>[...n].reverse(),v(e.options,F)),e.getLeftFooterGroups=S(()=>[e.getLeftHeaderGroups()],n=>[...n].reverse(),v(e.options,F)),e.getCenterFooterGroups=S(()=>[e.getCenterHeaderGroups()],n=>[...n].reverse(),v(e.options,F)),e.getRightFooterGroups=S(()=>[e.getRightHeaderGroups()],n=>[...n].reverse(),v(e.options,F)),e.getFlatHeaders=S(()=>[e.getHeaderGroups()],n=>n.map(t=>t.headers).flat(),v(e.options,F)),e.getLeftFlatHeaders=S(()=>[e.getLeftHeaderGroups()],n=>n.map(t=>t.headers).flat(),v(e.options,F)),e.getCenterFlatHeaders=S(()=>[e.getCenterHeaderGroups()],n=>n.map(t=>t.headers).flat(),v(e.options,F)),e.getRightFlatHeaders=S(()=>[e.getRightHeaderGroups()],n=>n.map(t=>t.headers).flat(),v(e.options,F)),e.getCenterLeafHeaders=S(()=>[e.getCenterFlatHeaders()],n=>n.filter(t=>{var r;return!((r=t.subHeaders)!=null&&r.length)}),v(e.options,F)),e.getLeftLeafHeaders=S(()=>[e.getLeftFlatHeaders()],n=>n.filter(t=>{var r;return!((r=t.subHeaders)!=null&&r.length)}),v(e.options,F)),e.getRightLeafHeaders=S(()=>[e.getRightFlatHeaders()],n=>n.filter(t=>{var r;return!((r=t.subHeaders)!=null&&r.length)}),v(e.options,F)),e.getLeafHeaders=S(()=>[e.getLeftHeaderGroups(),e.getCenterHeaderGroups(),e.getRightHeaderGroups()],(n,t,r)=>{var o,s,i,a,u,d;return[...(o=(s=n[0])==null?void 0:s.headers)!=null?o:[],...(i=(a=t[0])==null?void 0:a.headers)!=null?i:[],...(u=(d=r[0])==null?void 0:d.headers)!=null?u:[]].map(f=>f.getLeafHeaders()).flat()},v(e.options,F))}};function q(e,n,t,r){var o,s;let i=0;const a=function(c,g){g===void 0&&(g=1),i=Math.max(i,g),c.filter(p=>p.getIsVisible()).forEach(p=>{var h;(h=p.columns)!=null&&h.length&&a(p.columns,g+1)},0)};a(e);let u=[];const d=(c,g)=>{const p={depth:g,id:[r,`${g}`].filter(Boolean).join("_"),headers:[]},h=[];c.forEach(C=>{const x=[...h].reverse()[0],w=C.column.depth===p.depth;let R,P=!1;if(w&&C.column.parent?R=C.column.parent:(R=C.column,P=!0),x&&x?.column===R)x.subHeaders.push(C);else{const _=Le(t,R,{id:[r,g,R.id,C?.id].filter(Boolean).join("_"),isPlaceholder:P,placeholderId:P?`${h.filter(A=>A.column===R).length}`:void 0,depth:g,index:h.length});_.subHeaders.push(C),h.push(_)}p.headers.push(C),C.headerGroup=p}),u.push(p),g>0&&d(h,g-1)},f=n.map((c,g)=>Le(t,c,{depth:i,index:g}));d(f,i-1),u.reverse();const m=c=>c.filter(p=>p.column.getIsVisible()).map(p=>{let h=0,C=0,x=[0];p.subHeaders&&p.subHeaders.length?(x=[],m(p.subHeaders).forEach(R=>{let{colSpan:P,rowSpan:_}=R;h+=P,x.push(_)})):h=1;const w=Math.min(...x);return C=C+w,p.colSpan=h,p.rowSpan=C,{colSpan:h,rowSpan:C}});return m((o=(s=u[0])==null?void 0:s.headers)!=null?o:[]),u}const fn=(e,n,t,r,o,s,i)=>{let a={id:n,index:r,original:t,depth:o,parentId:i,_valuesCache:{},_uniqueValuesCache:{},getValue:u=>{if(a._valuesCache.hasOwnProperty(u))return a._valuesCache[u];const d=e.getColumn(u);if(d!=null&&d.accessorFn)return a._valuesCache[u]=d.accessorFn(a.original,r),a._valuesCache[u]},getUniqueValues:u=>{if(a._uniqueValuesCache.hasOwnProperty(u))return a._uniqueValuesCache[u];const d=e.getColumn(u);if(d!=null&&d.accessorFn)return d.columnDef.getUniqueValues?(a._uniqueValuesCache[u]=d.columnDef.getUniqueValues(a.original,r),a._uniqueValuesCache[u]):(a._uniqueValuesCache[u]=[a.getValue(u)],a._uniqueValuesCache[u])},renderValue:u=>{var d;return(d=a.getValue(u))!=null?d:e.options.renderFallbackValue},subRows:[],getLeafRows:()=>un(a.subRows,u=>u.subRows),getParentRow:()=>a.parentId?e.getRow(a.parentId,!0):void 0,getParentRows:()=>{let u=[],d=a;for(;;){const f=d.getParentRow();if(!f)break;u.push(f),d=f}return u.reverse()},getAllCells:S(()=>[e.getAllLeafColumns()],u=>u.map(d=>dn(e,a,d,d.id)),v(e.options,"debugRows")),_getAllCellsByColumnId:S(()=>[a.getAllCells()],u=>u.reduce((d,f)=>(d[f.column.id]=f,d),{}),v(e.options,"debugRows"))};for(let u=0;u<e._features.length;u++){const d=e._features[u];d==null||d.createRow==null||d.createRow(a,e)}return a},pn={createColumn:(e,n)=>{e._getFacetedRowModel=n.options.getFacetedRowModel&&n.options.getFacetedRowModel(n,e.id),e.getFacetedRowModel=()=>e._getFacetedRowModel?e._getFacetedRowModel():n.getPreFilteredRowModel(),e._getFacetedUniqueValues=n.options.getFacetedUniqueValues&&n.options.getFacetedUniqueValues(n,e.id),e.getFacetedUniqueValues=()=>e._getFacetedUniqueValues?e._getFacetedUniqueValues():new Map,e._getFacetedMinMaxValues=n.options.getFacetedMinMaxValues&&n.options.getFacetedMinMaxValues(n,e.id),e.getFacetedMinMaxValues=()=>{if(e._getFacetedMinMaxValues)return e._getFacetedMinMaxValues()}}},Je=(e,n,t)=>{var r,o;const s=t==null||(r=t.toString())==null?void 0:r.toLowerCase();return!!(!((o=e.getValue(n))==null||(o=o.toString())==null||(o=o.toLowerCase())==null)&&o.includes(s))};Je.autoRemove=e=>D(e);const Ze=(e,n,t)=>{var r;return!!(!((r=e.getValue(n))==null||(r=r.toString())==null)&&r.includes(t))};Ze.autoRemove=e=>D(e);const et=(e,n,t)=>{var r;return((r=e.getValue(n))==null||(r=r.toString())==null?void 0:r.toLowerCase())===t?.toLowerCase()};et.autoRemove=e=>D(e);const tt=(e,n,t)=>{var r;return(r=e.getValue(n))==null?void 0:r.includes(t)};tt.autoRemove=e=>D(e);const nt=(e,n,t)=>!t.some(r=>{var o;return!((o=e.getValue(n))!=null&&o.includes(r))});nt.autoRemove=e=>D(e)||!(e!=null&&e.length);const rt=(e,n,t)=>t.some(r=>{var o;return(o=e.getValue(n))==null?void 0:o.includes(r)});rt.autoRemove=e=>D(e)||!(e!=null&&e.length);const ot=(e,n,t)=>e.getValue(n)===t;ot.autoRemove=e=>D(e);const st=(e,n,t)=>e.getValue(n)==t;st.autoRemove=e=>D(e);const _e=(e,n,t)=>{let[r,o]=t;const s=e.getValue(n);return s>=r&&s<=o};_e.resolveFilterValue=e=>{let[n,t]=e,r=typeof n!="number"?parseFloat(n):n,o=typeof t!="number"?parseFloat(t):t,s=n===null||Number.isNaN(r)?-1/0:r,i=t===null||Number.isNaN(o)?1/0:o;if(s>i){const a=s;s=i,i=a}return[s,i]};_e.autoRemove=e=>D(e)||D(e[0])&&D(e[1]);const E={includesString:Je,includesStringSensitive:Ze,equalsString:et,arrIncludes:tt,arrIncludesAll:nt,arrIncludesSome:rt,equals:ot,weakEquals:st,inNumberRange:_e};function D(e){return e==null||e===""}const hn={getDefaultColumnDef:()=>({filterFn:"auto"}),getInitialState:e=>({columnFilters:[],...e}),getDefaultOptions:e=>({onColumnFiltersChange:I("columnFilters",e),filterFromLeafRows:!1,maxLeafRowFilterDepth:100}),createColumn:(e,n)=>{e.getAutoFilterFn=()=>{const t=n.getCoreRowModel().flatRows[0],r=t?.getValue(e.id);return typeof r=="string"?E.includesString:typeof r=="number"?E.inNumberRange:typeof r=="boolean"||r!==null&&typeof r=="object"?E.equals:Array.isArray(r)?E.arrIncludes:E.weakEquals},e.getFilterFn=()=>{var t,r;return se(e.columnDef.filterFn)?e.columnDef.filterFn:e.columnDef.filterFn==="auto"?e.getAutoFilterFn():(t=(r=n.options.filterFns)==null?void 0:r[e.columnDef.filterFn])!=null?t:E[e.columnDef.filterFn]},e.getCanFilter=()=>{var t,r,o;return((t=e.columnDef.enableColumnFilter)!=null?t:!0)&&((r=n.options.enableColumnFilters)!=null?r:!0)&&((o=n.options.enableFilters)!=null?o:!0)&&!!e.accessorFn},e.getIsFiltered=()=>e.getFilterIndex()>-1,e.getFilterValue=()=>{var t;return(t=n.getState().columnFilters)==null||(t=t.find(r=>r.id===e.id))==null?void 0:t.value},e.getFilterIndex=()=>{var t,r;return(t=(r=n.getState().columnFilters)==null?void 0:r.findIndex(o=>o.id===e.id))!=null?t:-1},e.setFilterValue=t=>{n.setColumnFilters(r=>{const o=e.getFilterFn(),s=r?.find(f=>f.id===e.id),i=L(t,s?s.value:void 0);if(Oe(o,i,e)){var a;return(a=r?.filter(f=>f.id!==e.id))!=null?a:[]}const u={id:e.id,value:i};if(s){var d;return(d=r?.map(f=>f.id===e.id?u:f))!=null?d:[]}return r!=null&&r.length?[...r,u]:[u]})}},createRow:(e,n)=>{e.columnFilters={},e.columnFiltersMeta={}},createTable:e=>{e.setColumnFilters=n=>{const t=e.getAllLeafColumns(),r=o=>{var s;return(s=L(n,o))==null?void 0:s.filter(i=>{const a=t.find(u=>u.id===i.id);if(a){const u=a.getFilterFn();if(Oe(u,i.value,a))return!1}return!0})};e.options.onColumnFiltersChange==null||e.options.onColumnFiltersChange(r)},e.resetColumnFilters=n=>{var t,r;e.setColumnFilters(n?[]:(t=(r=e.initialState)==null?void 0:r.columnFilters)!=null?t:[])},e.getPreFilteredRowModel=()=>e.getCoreRowModel(),e.getFilteredRowModel=()=>(!e._getFilteredRowModel&&e.options.getFilteredRowModel&&(e._getFilteredRowModel=e.options.getFilteredRowModel(e)),e.options.manualFiltering||!e._getFilteredRowModel?e.getPreFilteredRowModel():e._getFilteredRowModel())}};function Oe(e,n,t){return(e&&e.autoRemove?e.autoRemove(n,t):!1)||typeof n>"u"||typeof n=="string"&&!n}const mn=(e,n,t)=>t.reduce((r,o)=>{const s=o.getValue(e);return r+(typeof s=="number"?s:0)},0),Sn=(e,n,t)=>{let r;return t.forEach(o=>{const s=o.getValue(e);s!=null&&(r>s||r===void 0&&s>=s)&&(r=s)}),r},vn=(e,n,t)=>{let r;return t.forEach(o=>{const s=o.getValue(e);s!=null&&(r<s||r===void 0&&s>=s)&&(r=s)}),r},Cn=(e,n,t)=>{let r,o;return t.forEach(s=>{const i=s.getValue(e);i!=null&&(r===void 0?i>=i&&(r=o=i):(r>i&&(r=i),o<i&&(o=i)))}),[r,o]},xn=(e,n)=>{let t=0,r=0;if(n.forEach(o=>{let s=o.getValue(e);s!=null&&(s=+s)>=s&&(++t,r+=s)}),t)return r/t},wn=(e,n)=>{if(!n.length)return;const t=n.map(s=>s.getValue(e));if(!an(t))return;if(t.length===1)return t[0];const r=Math.floor(t.length/2),o=t.sort((s,i)=>s-i);return t.length%2!==0?o[r]:(o[r-1]+o[r])/2},Rn=(e,n)=>Array.from(new Set(n.map(t=>t.getValue(e))).values()),yn=(e,n)=>new Set(n.map(t=>t.getValue(e))).size,_n=(e,n)=>n.length,ie={sum:mn,min:Sn,max:vn,extent:Cn,mean:xn,median:wn,unique:Rn,uniqueCount:yn,count:_n},Fn={getDefaultColumnDef:()=>({aggregatedCell:e=>{var n,t;return(n=(t=e.getValue())==null||t.toString==null?void 0:t.toString())!=null?n:null},aggregationFn:"auto"}),getInitialState:e=>({grouping:[],...e}),getDefaultOptions:e=>({onGroupingChange:I("grouping",e),groupedColumnMode:"reorder"}),createColumn:(e,n)=>{e.toggleGrouping=()=>{n.setGrouping(t=>t!=null&&t.includes(e.id)?t.filter(r=>r!==e.id):[...t??[],e.id])},e.getCanGroup=()=>{var t,r;return((t=e.columnDef.enableGrouping)!=null?t:!0)&&((r=n.options.enableGrouping)!=null?r:!0)&&(!!e.accessorFn||!!e.columnDef.getGroupingValue)},e.getIsGrouped=()=>{var t;return(t=n.getState().grouping)==null?void 0:t.includes(e.id)},e.getGroupedIndex=()=>{var t;return(t=n.getState().grouping)==null?void 0:t.indexOf(e.id)},e.getToggleGroupingHandler=()=>{const t=e.getCanGroup();return()=>{t&&e.toggleGrouping()}},e.getAutoAggregationFn=()=>{const t=n.getCoreRowModel().flatRows[0],r=t?.getValue(e.id);if(typeof r=="number")return ie.sum;if(Object.prototype.toString.call(r)==="[object Date]")return ie.extent},e.getAggregationFn=()=>{var t,r;if(!e)throw new Error;return se(e.columnDef.aggregationFn)?e.columnDef.aggregationFn:e.columnDef.aggregationFn==="auto"?e.getAutoAggregationFn():(t=(r=n.options.aggregationFns)==null?void 0:r[e.columnDef.aggregationFn])!=null?t:ie[e.columnDef.aggregationFn]}},createTable:e=>{e.setGrouping=n=>e.options.onGroupingChange==null?void 0:e.options.onGroupingChange(n),e.resetGrouping=n=>{var t,r;e.setGrouping(n?[]:(t=(r=e.initialState)==null?void 0:r.grouping)!=null?t:[])},e.getPreGroupedRowModel=()=>e.getFilteredRowModel(),e.getGroupedRowModel=()=>(!e._getGroupedRowModel&&e.options.getGroupedRowModel&&(e._getGroupedRowModel=e.options.getGroupedRowModel(e)),e.options.manualGrouping||!e._getGroupedRowModel?e.getPreGroupedRowModel():e._getGroupedRowModel())},createRow:(e,n)=>{e.getIsGrouped=()=>!!e.groupingColumnId,e.getGroupingValue=t=>{if(e._groupingValuesCache.hasOwnProperty(t))return e._groupingValuesCache[t];const r=n.getColumn(t);return r!=null&&r.columnDef.getGroupingValue?(e._groupingValuesCache[t]=r.columnDef.getGroupingValue(e.original),e._groupingValuesCache[t]):e.getValue(t)},e._groupingValuesCache={}},createCell:(e,n,t,r)=>{e.getIsGrouped=()=>n.getIsGrouped()&&n.id===t.groupingColumnId,e.getIsPlaceholder=()=>!e.getIsGrouped()&&n.getIsGrouped(),e.getIsAggregated=()=>{var o;return!e.getIsGrouped()&&!e.getIsPlaceholder()&&!!((o=t.subRows)!=null&&o.length)}}};function $n(e,n,t){if(!(n!=null&&n.length)||!t)return e;const r=e.filter(s=>!n.includes(s.id));return t==="remove"?r:[...n.map(s=>e.find(i=>i.id===s)).filter(Boolean),...r]}const Pn={getInitialState:e=>({columnOrder:[],...e}),getDefaultOptions:e=>({onColumnOrderChange:I("columnOrder",e)}),createColumn:(e,n)=>{e.getIndex=S(t=>[B(n,t)],t=>t.findIndex(r=>r.id===e.id),v(n.options,"debugColumns")),e.getIsFirstColumn=t=>{var r;return((r=B(n,t)[0])==null?void 0:r.id)===e.id},e.getIsLastColumn=t=>{var r;const o=B(n,t);return((r=o[o.length-1])==null?void 0:r.id)===e.id}},createTable:e=>{e.setColumnOrder=n=>e.options.onColumnOrderChange==null?void 0:e.options.onColumnOrderChange(n),e.resetColumnOrder=n=>{var t;e.setColumnOrder(n?[]:(t=e.initialState.columnOrder)!=null?t:[])},e._getOrderColumnsFn=S(()=>[e.getState().columnOrder,e.getState().grouping,e.options.groupedColumnMode],(n,t,r)=>o=>{let s=[];if(!(n!=null&&n.length))s=o;else{const i=[...n],a=[...o];for(;a.length&&i.length;){const u=i.shift(),d=a.findIndex(f=>f.id===u);d>-1&&s.push(a.splice(d,1)[0])}s=[...s,...a]}return $n(s,t,r)},v(e.options,"debugTable"))}},le=()=>({left:[],right:[]}),Mn={getInitialState:e=>({columnPinning:le(),...e}),getDefaultOptions:e=>({onColumnPinningChange:I("columnPinning",e)}),createColumn:(e,n)=>{e.pin=t=>{const r=e.getLeafColumns().map(o=>o.id).filter(Boolean);n.setColumnPinning(o=>{var s,i;if(t==="right"){var a,u;return{left:((a=o?.left)!=null?a:[]).filter(m=>!(r!=null&&r.includes(m))),right:[...((u=o?.right)!=null?u:[]).filter(m=>!(r!=null&&r.includes(m))),...r]}}if(t==="left"){var d,f;return{left:[...((d=o?.left)!=null?d:[]).filter(m=>!(r!=null&&r.includes(m))),...r],right:((f=o?.right)!=null?f:[]).filter(m=>!(r!=null&&r.includes(m)))}}return{left:((s=o?.left)!=null?s:[]).filter(m=>!(r!=null&&r.includes(m))),right:((i=o?.right)!=null?i:[]).filter(m=>!(r!=null&&r.includes(m)))}})},e.getCanPin=()=>e.getLeafColumns().some(r=>{var o,s,i;return((o=r.columnDef.enablePinning)!=null?o:!0)&&((s=(i=n.options.enableColumnPinning)!=null?i:n.options.enablePinning)!=null?s:!0)}),e.getIsPinned=()=>{const t=e.getLeafColumns().map(a=>a.id),{left:r,right:o}=n.getState().columnPinning,s=t.some(a=>r?.includes(a)),i=t.some(a=>o?.includes(a));return s?"left":i?"right":!1},e.getPinnedIndex=()=>{var t,r;const o=e.getIsPinned();return o?(t=(r=n.getState().columnPinning)==null||(r=r[o])==null?void 0:r.indexOf(e.id))!=null?t:-1:0}},createRow:(e,n)=>{e.getCenterVisibleCells=S(()=>[e._getAllVisibleCells(),n.getState().columnPinning.left,n.getState().columnPinning.right],(t,r,o)=>{const s=[...r??[],...o??[]];return t.filter(i=>!s.includes(i.column.id))},v(n.options,"debugRows")),e.getLeftVisibleCells=S(()=>[e._getAllVisibleCells(),n.getState().columnPinning.left],(t,r)=>(r??[]).map(s=>t.find(i=>i.column.id===s)).filter(Boolean).map(s=>({...s,position:"left"})),v(n.options,"debugRows")),e.getRightVisibleCells=S(()=>[e._getAllVisibleCells(),n.getState().columnPinning.right],(t,r)=>(r??[]).map(s=>t.find(i=>i.column.id===s)).filter(Boolean).map(s=>({...s,position:"right"})),v(n.options,"debugRows"))},createTable:e=>{e.setColumnPinning=n=>e.options.onColumnPinningChange==null?void 0:e.options.onColumnPinningChange(n),e.resetColumnPinning=n=>{var t,r;return e.setColumnPinning(n?le():(t=(r=e.initialState)==null?void 0:r.columnPinning)!=null?t:le())},e.getIsSomeColumnsPinned=n=>{var t;const r=e.getState().columnPinning;if(!n){var o,s;return!!((o=r.left)!=null&&o.length||(s=r.right)!=null&&s.length)}return!!((t=r[n])!=null&&t.length)},e.getLeftLeafColumns=S(()=>[e.getAllLeafColumns(),e.getState().columnPinning.left],(n,t)=>(t??[]).map(r=>n.find(o=>o.id===r)).filter(Boolean),v(e.options,"debugColumns")),e.getRightLeafColumns=S(()=>[e.getAllLeafColumns(),e.getState().columnPinning.right],(n,t)=>(t??[]).map(r=>n.find(o=>o.id===r)).filter(Boolean),v(e.options,"debugColumns")),e.getCenterLeafColumns=S(()=>[e.getAllLeafColumns(),e.getState().columnPinning.left,e.getState().columnPinning.right],(n,t,r)=>{const o=[...t??[],...r??[]];return n.filter(s=>!o.includes(s.id))},v(e.options,"debugColumns"))}};function In(e){return e||(typeof document<"u"?document:null)}const K={size:150,minSize:20,maxSize:Number.MAX_SAFE_INTEGER},ae=()=>({startOffset:null,startSize:null,deltaOffset:null,deltaPercentage:null,isResizingColumn:!1,columnSizingStart:[]}),jn={getDefaultColumnDef:()=>K,getInitialState:e=>({columnSizing:{},columnSizingInfo:ae(),...e}),getDefaultOptions:e=>({columnResizeMode:"onEnd",columnResizeDirection:"ltr",onColumnSizingChange:I("columnSizing",e),onColumnSizingInfoChange:I("columnSizingInfo",e)}),createColumn:(e,n)=>{e.getSize=()=>{var t,r,o;const s=n.getState().columnSizing[e.id];return Math.min(Math.max((t=e.columnDef.minSize)!=null?t:K.minSize,(r=s??e.columnDef.size)!=null?r:K.size),(o=e.columnDef.maxSize)!=null?o:K.maxSize)},e.getStart=S(t=>[t,B(n,t),n.getState().columnSizing],(t,r)=>r.slice(0,e.getIndex(t)).reduce((o,s)=>o+s.getSize(),0),v(n.options,"debugColumns")),e.getAfter=S(t=>[t,B(n,t),n.getState().columnSizing],(t,r)=>r.slice(e.getIndex(t)+1).reduce((o,s)=>o+s.getSize(),0),v(n.options,"debugColumns")),e.resetSize=()=>{n.setColumnSizing(t=>{let{[e.id]:r,...o}=t;return o})},e.getCanResize=()=>{var t,r;return((t=e.columnDef.enableResizing)!=null?t:!0)&&((r=n.options.enableColumnResizing)!=null?r:!0)},e.getIsResizing=()=>n.getState().columnSizingInfo.isResizingColumn===e.id},createHeader:(e,n)=>{e.getSize=()=>{let t=0;const r=o=>{if(o.subHeaders.length)o.subHeaders.forEach(r);else{var s;t+=(s=o.column.getSize())!=null?s:0}};return r(e),t},e.getStart=()=>{if(e.index>0){const t=e.headerGroup.headers[e.index-1];return t.getStart()+t.getSize()}return 0},e.getResizeHandler=t=>{const r=n.getColumn(e.column.id),o=r?.getCanResize();return s=>{if(!r||!o||(s.persist==null||s.persist(),ue(s)&&s.touches&&s.touches.length>1))return;const i=e.getSize(),a=e?e.getLeafHeaders().map(x=>[x.column.id,x.column.getSize()]):[[r.id,r.getSize()]],u=ue(s)?Math.round(s.touches[0].clientX):s.clientX,d={},f=(x,w)=>{typeof w=="number"&&(n.setColumnSizingInfo(R=>{var P,_;const A=n.options.columnResizeDirection==="rtl"?-1:1,M=(w-((P=R?.startOffset)!=null?P:0))*A,$=Math.max(M/((_=R?.startSize)!=null?_:0),-.999999);return R.columnSizingStart.forEach(b=>{let[N,H]=b;d[N]=Math.round(Math.max(H+H*$,0)*100)/100}),{...R,deltaOffset:M,deltaPercentage:$}}),(n.options.columnResizeMode==="onChange"||x==="end")&&n.setColumnSizing(R=>({...R,...d})))},m=x=>f("move",x),c=x=>{f("end",x),n.setColumnSizingInfo(w=>({...w,isResizingColumn:!1,startOffset:null,startSize:null,deltaOffset:null,deltaPercentage:null,columnSizingStart:[]}))},g=In(t),p={moveHandler:x=>m(x.clientX),upHandler:x=>{g?.removeEventListener("mousemove",p.moveHandler),g?.removeEventListener("mouseup",p.upHandler),c(x.clientX)}},h={moveHandler:x=>(x.cancelable&&(x.preventDefault(),x.stopPropagation()),m(x.touches[0].clientX),!1),upHandler:x=>{var w;g?.removeEventListener("touchmove",h.moveHandler),g?.removeEventListener("touchend",h.upHandler),x.cancelable&&(x.preventDefault(),x.stopPropagation()),c((w=x.touches[0])==null?void 0:w.clientX)}},C=Dn()?{passive:!1}:!1;ue(s)?(g?.addEventListener("touchmove",h.moveHandler,C),g?.addEventListener("touchend",h.upHandler,C)):(g?.addEventListener("mousemove",p.moveHandler,C),g?.addEventListener("mouseup",p.upHandler,C)),n.setColumnSizingInfo(x=>({...x,startOffset:u,startSize:i,deltaOffset:0,deltaPercentage:0,columnSizingStart:a,isResizingColumn:r.id}))}}},createTable:e=>{e.setColumnSizing=n=>e.options.onColumnSizingChange==null?void 0:e.options.onColumnSizingChange(n),e.setColumnSizingInfo=n=>e.options.onColumnSizingInfoChange==null?void 0:e.options.onColumnSizingInfoChange(n),e.resetColumnSizing=n=>{var t;e.setColumnSizing(n?{}:(t=e.initialState.columnSizing)!=null?t:{})},e.resetHeaderSizeInfo=n=>{var t;e.setColumnSizingInfo(n?ae():(t=e.initialState.columnSizingInfo)!=null?t:ae())},e.getTotalSize=()=>{var n,t;return(n=(t=e.getHeaderGroups()[0])==null?void 0:t.headers.reduce((r,o)=>r+o.getSize(),0))!=null?n:0},e.getLeftTotalSize=()=>{var n,t;return(n=(t=e.getLeftHeaderGroups()[0])==null?void 0:t.headers.reduce((r,o)=>r+o.getSize(),0))!=null?n:0},e.getCenterTotalSize=()=>{var n,t;return(n=(t=e.getCenterHeaderGroups()[0])==null?void 0:t.headers.reduce((r,o)=>r+o.getSize(),0))!=null?n:0},e.getRightTotalSize=()=>{var n,t;return(n=(t=e.getRightHeaderGroups()[0])==null?void 0:t.headers.reduce((r,o)=>r+o.getSize(),0))!=null?n:0}}};let Q=null;function Dn(){if(typeof Q=="boolean")return Q;let e=!1;try{const n={get passive(){return e=!0,!1}},t=()=>{};window.addEventListener("test",t,n),window.removeEventListener("test",t)}catch{e=!1}return Q=e,Q}function ue(e){return e.type==="touchstart"}const En={getInitialState:e=>({columnVisibility:{},...e}),getDefaultOptions:e=>({onColumnVisibilityChange:I("columnVisibility",e)}),createColumn:(e,n)=>{e.toggleVisibility=t=>{e.getCanHide()&&n.setColumnVisibility(r=>({...r,[e.id]:t??!e.getIsVisible()}))},e.getIsVisible=()=>{var t,r;const o=e.columns;return(t=o.length?o.some(s=>s.getIsVisible()):(r=n.getState().columnVisibility)==null?void 0:r[e.id])!=null?t:!0},e.getCanHide=()=>{var t,r;return((t=e.columnDef.enableHiding)!=null?t:!0)&&((r=n.options.enableHiding)!=null?r:!0)},e.getToggleVisibilityHandler=()=>t=>{e.toggleVisibility==null||e.toggleVisibility(t.target.checked)}},createRow:(e,n)=>{e._getAllVisibleCells=S(()=>[e.getAllCells(),n.getState().columnVisibility],t=>t.filter(r=>r.column.getIsVisible()),v(n.options,"debugRows")),e.getVisibleCells=S(()=>[e.getLeftVisibleCells(),e.getCenterVisibleCells(),e.getRightVisibleCells()],(t,r,o)=>[...t,...r,...o],v(n.options,"debugRows"))},createTable:e=>{const n=(t,r)=>S(()=>[r(),r().filter(o=>o.getIsVisible()).map(o=>o.id).join("_")],o=>o.filter(s=>s.getIsVisible==null?void 0:s.getIsVisible()),v(e.options,"debugColumns"));e.getVisibleFlatColumns=n("getVisibleFlatColumns",()=>e.getAllFlatColumns()),e.getVisibleLeafColumns=n("getVisibleLeafColumns",()=>e.getAllLeafColumns()),e.getLeftVisibleLeafColumns=n("getLeftVisibleLeafColumns",()=>e.getLeftLeafColumns()),e.getRightVisibleLeafColumns=n("getRightVisibleLeafColumns",()=>e.getRightLeafColumns()),e.getCenterVisibleLeafColumns=n("getCenterVisibleLeafColumns",()=>e.getCenterLeafColumns()),e.setColumnVisibility=t=>e.options.onColumnVisibilityChange==null?void 0:e.options.onColumnVisibilityChange(t),e.resetColumnVisibility=t=>{var r;e.setColumnVisibility(t?{}:(r=e.initialState.columnVisibility)!=null?r:{})},e.toggleAllColumnsVisible=t=>{var r;t=(r=t)!=null?r:!e.getIsAllColumnsVisible(),e.setColumnVisibility(e.getAllLeafColumns().reduce((o,s)=>({...o,[s.id]:t||!(s.getCanHide!=null&&s.getCanHide())}),{}))},e.getIsAllColumnsVisible=()=>!e.getAllLeafColumns().some(t=>!(t.getIsVisible!=null&&t.getIsVisible())),e.getIsSomeColumnsVisible=()=>e.getAllLeafColumns().some(t=>t.getIsVisible==null?void 0:t.getIsVisible()),e.getToggleAllColumnsVisibilityHandler=()=>t=>{var r;e.toggleAllColumnsVisible((r=t.target)==null?void 0:r.checked)}}};function B(e,n){return n?n==="center"?e.getCenterVisibleLeafColumns():n==="left"?e.getLeftVisibleLeafColumns():e.getRightVisibleLeafColumns():e.getVisibleLeafColumns()}const Vn={createTable:e=>{e._getGlobalFacetedRowModel=e.options.getFacetedRowModel&&e.options.getFacetedRowModel(e,"__global__"),e.getGlobalFacetedRowModel=()=>e.options.manualFiltering||!e._getGlobalFacetedRowModel?e.getPreFilteredRowModel():e._getGlobalFacetedRowModel(),e._getGlobalFacetedUniqueValues=e.options.getFacetedUniqueValues&&e.options.getFacetedUniqueValues(e,"__global__"),e.getGlobalFacetedUniqueValues=()=>e._getGlobalFacetedUniqueValues?e._getGlobalFacetedUniqueValues():new Map,e._getGlobalFacetedMinMaxValues=e.options.getFacetedMinMaxValues&&e.options.getFacetedMinMaxValues(e,"__global__"),e.getGlobalFacetedMinMaxValues=()=>{if(e._getGlobalFacetedMinMaxValues)return e._getGlobalFacetedMinMaxValues()}}},Nn={getInitialState:e=>({globalFilter:void 0,...e}),getDefaultOptions:e=>({onGlobalFilterChange:I("globalFilter",e),globalFilterFn:"auto",getColumnCanGlobalFilter:n=>{var t;const r=(t=e.getCoreRowModel().flatRows[0])==null||(t=t._getAllCellsByColumnId()[n.id])==null?void 0:t.getValue();return typeof r=="string"||typeof r=="number"}}),createColumn:(e,n)=>{e.getCanGlobalFilter=()=>{var t,r,o,s;return((t=e.columnDef.enableGlobalFilter)!=null?t:!0)&&((r=n.options.enableGlobalFilter)!=null?r:!0)&&((o=n.options.enableFilters)!=null?o:!0)&&((s=n.options.getColumnCanGlobalFilter==null?void 0:n.options.getColumnCanGlobalFilter(e))!=null?s:!0)&&!!e.accessorFn}},createTable:e=>{e.getGlobalAutoFilterFn=()=>E.includesString,e.getGlobalFilterFn=()=>{var n,t;const{globalFilterFn:r}=e.options;return se(r)?r:r==="auto"?e.getGlobalAutoFilterFn():(n=(t=e.options.filterFns)==null?void 0:t[r])!=null?n:E[r]},e.setGlobalFilter=n=>{e.options.onGlobalFilterChange==null||e.options.onGlobalFilterChange(n)},e.resetGlobalFilter=n=>{e.setGlobalFilter(n?void 0:e.initialState.globalFilter)}}},Ln={getInitialState:e=>({expanded:{},...e}),getDefaultOptions:e=>({onExpandedChange:I("expanded",e),paginateExpandedRows:!0}),createTable:e=>{let n=!1,t=!1;e._autoResetExpanded=()=>{var r,o;if(!n){e._queue(()=>{n=!0});return}if((r=(o=e.options.autoResetAll)!=null?o:e.options.autoResetExpanded)!=null?r:!e.options.manualExpanding){if(t)return;t=!0,e._queue(()=>{e.resetExpanded(),t=!1})}},e.setExpanded=r=>e.options.onExpandedChange==null?void 0:e.options.onExpandedChange(r),e.toggleAllRowsExpanded=r=>{r??!e.getIsAllRowsExpanded()?e.setExpanded(!0):e.setExpanded({})},e.resetExpanded=r=>{var o,s;e.setExpanded(r?{}:(o=(s=e.initialState)==null?void 0:s.expanded)!=null?o:{})},e.getCanSomeRowsExpand=()=>e.getPrePaginationRowModel().flatRows.some(r=>r.getCanExpand()),e.getToggleAllRowsExpandedHandler=()=>r=>{r.persist==null||r.persist(),e.toggleAllRowsExpanded()},e.getIsSomeRowsExpanded=()=>{const r=e.getState().expanded;return r===!0||Object.values(r).some(Boolean)},e.getIsAllRowsExpanded=()=>{const r=e.getState().expanded;return typeof r=="boolean"?r===!0:!(!Object.keys(r).length||e.getRowModel().flatRows.some(o=>!o.getIsExpanded()))},e.getExpandedDepth=()=>{let r=0;return(e.getState().expanded===!0?Object.keys(e.getRowModel().rowsById):Object.keys(e.getState().expanded)).forEach(s=>{const i=s.split(".");r=Math.max(r,i.length)}),r},e.getPreExpandedRowModel=()=>e.getSortedRowModel(),e.getExpandedRowModel=()=>(!e._getExpandedRowModel&&e.options.getExpandedRowModel&&(e._getExpandedRowModel=e.options.getExpandedRowModel(e)),e.options.manualExpanding||!e._getExpandedRowModel?e.getPreExpandedRowModel():e._getExpandedRowModel())},createRow:(e,n)=>{e.toggleExpanded=t=>{n.setExpanded(r=>{var o;const s=r===!0?!0:!!(r!=null&&r[e.id]);let i={};if(r===!0?Object.keys(n.getRowModel().rowsById).forEach(a=>{i[a]=!0}):i=r,t=(o=t)!=null?o:!s,!s&&t)return{...i,[e.id]:!0};if(s&&!t){const{[e.id]:a,...u}=i;return u}return r})},e.getIsExpanded=()=>{var t;const r=n.getState().expanded;return!!((t=n.options.getIsRowExpanded==null?void 0:n.options.getIsRowExpanded(e))!=null?t:r===!0||r?.[e.id])},e.getCanExpand=()=>{var t,r,o;return(t=n.options.getRowCanExpand==null?void 0:n.options.getRowCanExpand(e))!=null?t:((r=n.options.enableExpanding)!=null?r:!0)&&!!((o=e.subRows)!=null&&o.length)},e.getIsAllParentsExpanded=()=>{let t=!0,r=e;for(;t&&r.parentId;)r=n.getRow(r.parentId,!0),t=r.getIsExpanded();return t},e.getToggleExpandedHandler=()=>{const t=e.getCanExpand();return()=>{t&&e.toggleExpanded()}}}},ve=0,Ce=10,de=()=>({pageIndex:ve,pageSize:Ce}),On={getInitialState:e=>({...e,pagination:{...de(),...e?.pagination}}),getDefaultOptions:e=>({onPaginationChange:I("pagination",e)}),createTable:e=>{let n=!1,t=!1;e._autoResetPageIndex=()=>{var r,o;if(!n){e._queue(()=>{n=!0});return}if((r=(o=e.options.autoResetAll)!=null?o:e.options.autoResetPageIndex)!=null?r:!e.options.manualPagination){if(t)return;t=!0,e._queue(()=>{e.resetPageIndex(),t=!1})}},e.setPagination=r=>{const o=s=>L(r,s);return e.options.onPaginationChange==null?void 0:e.options.onPaginationChange(o)},e.resetPagination=r=>{var o;e.setPagination(r?de():(o=e.initialState.pagination)!=null?o:de())},e.setPageIndex=r=>{e.setPagination(o=>{let s=L(r,o.pageIndex);const i=typeof e.options.pageCount>"u"||e.options.pageCount===-1?Number.MAX_SAFE_INTEGER:e.options.pageCount-1;return s=Math.max(0,Math.min(s,i)),{...o,pageIndex:s}})},e.resetPageIndex=r=>{var o,s;e.setPageIndex(r?ve:(o=(s=e.initialState)==null||(s=s.pagination)==null?void 0:s.pageIndex)!=null?o:ve)},e.resetPageSize=r=>{var o,s;e.setPageSize(r?Ce:(o=(s=e.initialState)==null||(s=s.pagination)==null?void 0:s.pageSize)!=null?o:Ce)},e.setPageSize=r=>{e.setPagination(o=>{const s=Math.max(1,L(r,o.pageSize)),i=o.pageSize*o.pageIndex,a=Math.floor(i/s);return{...o,pageIndex:a,pageSize:s}})},e.setPageCount=r=>e.setPagination(o=>{var s;let i=L(r,(s=e.options.pageCount)!=null?s:-1);return typeof i=="number"&&(i=Math.max(-1,i)),{...o,pageCount:i}}),e.getPageOptions=S(()=>[e.getPageCount()],r=>{let o=[];return r&&r>0&&(o=[...new Array(r)].fill(null).map((s,i)=>i)),o},v(e.options,"debugTable")),e.getCanPreviousPage=()=>e.getState().pagination.pageIndex>0,e.getCanNextPage=()=>{const{pageIndex:r}=e.getState().pagination,o=e.getPageCount();return o===-1?!0:o===0?!1:r<o-1},e.previousPage=()=>e.setPageIndex(r=>r-1),e.nextPage=()=>e.setPageIndex(r=>r+1),e.firstPage=()=>e.setPageIndex(0),e.lastPage=()=>e.setPageIndex(e.getPageCount()-1),e.getPrePaginationRowModel=()=>e.getExpandedRowModel(),e.getPaginationRowModel=()=>(!e._getPaginationRowModel&&e.options.getPaginationRowModel&&(e._getPaginationRowModel=e.options.getPaginationRowModel(e)),e.options.manualPagination||!e._getPaginationRowModel?e.getPrePaginationRowModel():e._getPaginationRowModel()),e.getPageCount=()=>{var r;return(r=e.options.pageCount)!=null?r:Math.ceil(e.getRowCount()/e.getState().pagination.pageSize)},e.getRowCount=()=>{var r;return(r=e.options.rowCount)!=null?r:e.getPrePaginationRowModel().rows.length}}},ge=()=>({top:[],bottom:[]}),An={getInitialState:e=>({rowPinning:ge(),...e}),getDefaultOptions:e=>({onRowPinningChange:I("rowPinning",e)}),createRow:(e,n)=>{e.pin=(t,r,o)=>{const s=r?e.getLeafRows().map(u=>{let{id:d}=u;return d}):[],i=o?e.getParentRows().map(u=>{let{id:d}=u;return d}):[],a=new Set([...i,e.id,...s]);n.setRowPinning(u=>{var d,f;if(t==="bottom"){var m,c;return{top:((m=u?.top)!=null?m:[]).filter(h=>!(a!=null&&a.has(h))),bottom:[...((c=u?.bottom)!=null?c:[]).filter(h=>!(a!=null&&a.has(h))),...Array.from(a)]}}if(t==="top"){var g,p;return{top:[...((g=u?.top)!=null?g:[]).filter(h=>!(a!=null&&a.has(h))),...Array.from(a)],bottom:((p=u?.bottom)!=null?p:[]).filter(h=>!(a!=null&&a.has(h)))}}return{top:((d=u?.top)!=null?d:[]).filter(h=>!(a!=null&&a.has(h))),bottom:((f=u?.bottom)!=null?f:[]).filter(h=>!(a!=null&&a.has(h)))}})},e.getCanPin=()=>{var t;const{enableRowPinning:r,enablePinning:o}=n.options;return typeof r=="function"?r(e):(t=r??o)!=null?t:!0},e.getIsPinned=()=>{const t=[e.id],{top:r,bottom:o}=n.getState().rowPinning,s=t.some(a=>r?.includes(a)),i=t.some(a=>o?.includes(a));return s?"top":i?"bottom":!1},e.getPinnedIndex=()=>{var t,r;const o=e.getIsPinned();if(!o)return-1;const s=(t=o==="top"?n.getTopRows():n.getBottomRows())==null?void 0:t.map(i=>{let{id:a}=i;return a});return(r=s?.indexOf(e.id))!=null?r:-1}},createTable:e=>{e.setRowPinning=n=>e.options.onRowPinningChange==null?void 0:e.options.onRowPinningChange(n),e.resetRowPinning=n=>{var t,r;return e.setRowPinning(n?ge():(t=(r=e.initialState)==null?void 0:r.rowPinning)!=null?t:ge())},e.getIsSomeRowsPinned=n=>{var t;const r=e.getState().rowPinning;if(!n){var o,s;return!!((o=r.top)!=null&&o.length||(s=r.bottom)!=null&&s.length)}return!!((t=r[n])!=null&&t.length)},e._getPinnedRows=(n,t,r)=>{var o;return((o=e.options.keepPinnedRows)==null||o?(t??[]).map(i=>{const a=e.getRow(i,!0);return a.getIsAllParentsExpanded()?a:null}):(t??[]).map(i=>n.find(a=>a.id===i))).filter(Boolean).map(i=>({...i,position:r}))},e.getTopRows=S(()=>[e.getRowModel().rows,e.getState().rowPinning.top],(n,t)=>e._getPinnedRows(n,t,"top"),v(e.options,"debugRows")),e.getBottomRows=S(()=>[e.getRowModel().rows,e.getState().rowPinning.bottom],(n,t)=>e._getPinnedRows(n,t,"bottom"),v(e.options,"debugRows")),e.getCenterRows=S(()=>[e.getRowModel().rows,e.getState().rowPinning.top,e.getState().rowPinning.bottom],(n,t,r)=>{const o=new Set([...t??[],...r??[]]);return n.filter(s=>!o.has(s.id))},v(e.options,"debugRows"))}},Hn={getInitialState:e=>({rowSelection:{},...e}),getDefaultOptions:e=>({onRowSelectionChange:I("rowSelection",e),enableRowSelection:!0,enableMultiRowSelection:!0,enableSubRowSelection:!0}),createTable:e=>{e.setRowSelection=n=>e.options.onRowSelectionChange==null?void 0:e.options.onRowSelectionChange(n),e.resetRowSelection=n=>{var t;return e.setRowSelection(n?{}:(t=e.initialState.rowSelection)!=null?t:{})},e.toggleAllRowsSelected=n=>{e.setRowSelection(t=>{n=typeof n<"u"?n:!e.getIsAllRowsSelected();const r={...t},o=e.getPreGroupedRowModel().flatRows;return n?o.forEach(s=>{s.getCanSelect()&&(r[s.id]=!0)}):o.forEach(s=>{delete r[s.id]}),r})},e.toggleAllPageRowsSelected=n=>e.setRowSelection(t=>{const r=typeof n<"u"?n:!e.getIsAllPageRowsSelected(),o={...t};return e.getRowModel().rows.forEach(s=>{xe(o,s.id,r,!0,e)}),o}),e.getPreSelectedRowModel=()=>e.getCoreRowModel(),e.getSelectedRowModel=S(()=>[e.getState().rowSelection,e.getCoreRowModel()],(n,t)=>Object.keys(n).length?ce(e,t):{rows:[],flatRows:[],rowsById:{}},v(e.options,"debugTable")),e.getFilteredSelectedRowModel=S(()=>[e.getState().rowSelection,e.getFilteredRowModel()],(n,t)=>Object.keys(n).length?ce(e,t):{rows:[],flatRows:[],rowsById:{}},v(e.options,"debugTable")),e.getGroupedSelectedRowModel=S(()=>[e.getState().rowSelection,e.getSortedRowModel()],(n,t)=>Object.keys(n).length?ce(e,t):{rows:[],flatRows:[],rowsById:{}},v(e.options,"debugTable")),e.getIsAllRowsSelected=()=>{const n=e.getFilteredRowModel().flatRows,{rowSelection:t}=e.getState();let r=!!(n.length&&Object.keys(t).length);return r&&n.some(o=>o.getCanSelect()&&!t[o.id])&&(r=!1),r},e.getIsAllPageRowsSelected=()=>{const n=e.getPaginationRowModel().flatRows.filter(o=>o.getCanSelect()),{rowSelection:t}=e.getState();let r=!!n.length;return r&&n.some(o=>!t[o.id])&&(r=!1),r},e.getIsSomeRowsSelected=()=>{var n;const t=Object.keys((n=e.getState().rowSelection)!=null?n:{}).length;return t>0&&t<e.getFilteredRowModel().flatRows.length},e.getIsSomePageRowsSelected=()=>{const n=e.getPaginationRowModel().flatRows;return e.getIsAllPageRowsSelected()?!1:n.filter(t=>t.getCanSelect()).some(t=>t.getIsSelected()||t.getIsSomeSelected())},e.getToggleAllRowsSelectedHandler=()=>n=>{e.toggleAllRowsSelected(n.target.checked)},e.getToggleAllPageRowsSelectedHandler=()=>n=>{e.toggleAllPageRowsSelected(n.target.checked)}},createRow:(e,n)=>{e.toggleSelected=(t,r)=>{const o=e.getIsSelected();n.setRowSelection(s=>{var i;if(t=typeof t<"u"?t:!o,e.getCanSelect()&&o===t)return s;const a={...s};return xe(a,e.id,t,(i=r?.selectChildren)!=null?i:!0,n),a})},e.getIsSelected=()=>{const{rowSelection:t}=n.getState();return Fe(e,t)},e.getIsSomeSelected=()=>{const{rowSelection:t}=n.getState();return we(e,t)==="some"},e.getIsAllSubRowsSelected=()=>{const{rowSelection:t}=n.getState();return we(e,t)==="all"},e.getCanSelect=()=>{var t;return typeof n.options.enableRowSelection=="function"?n.options.enableRowSelection(e):(t=n.options.enableRowSelection)!=null?t:!0},e.getCanSelectSubRows=()=>{var t;return typeof n.options.enableSubRowSelection=="function"?n.options.enableSubRowSelection(e):(t=n.options.enableSubRowSelection)!=null?t:!0},e.getCanMultiSelect=()=>{var t;return typeof n.options.enableMultiRowSelection=="function"?n.options.enableMultiRowSelection(e):(t=n.options.enableMultiRowSelection)!=null?t:!0},e.getToggleSelectedHandler=()=>{const t=e.getCanSelect();return r=>{var o;t&&e.toggleSelected((o=r.target)==null?void 0:o.checked)}}}},xe=(e,n,t,r,o)=>{var s;const i=o.getRow(n,!0);t?(i.getCanMultiSelect()||Object.keys(e).forEach(a=>delete e[a]),i.getCanSelect()&&(e[n]=!0)):delete e[n],r&&(s=i.subRows)!=null&&s.length&&i.getCanSelectSubRows()&&i.subRows.forEach(a=>xe(e,a.id,t,r,o))};function ce(e,n){const t=e.getState().rowSelection,r=[],o={},s=function(i,a){return i.map(u=>{var d;const f=Fe(u,t);if(f&&(r.push(u),o[u.id]=u),(d=u.subRows)!=null&&d.length&&(u={...u,subRows:s(u.subRows)}),f)return u}).filter(Boolean)};return{rows:s(n.rows),flatRows:r,rowsById:o}}function Fe(e,n){var t;return(t=n[e.id])!=null?t:!1}function we(e,n,t){var r;if(!((r=e.subRows)!=null&&r.length))return!1;let o=!0,s=!1;return e.subRows.forEach(i=>{if(!(s&&!o)&&(i.getCanSelect()&&(Fe(i,n)?s=!0:o=!1),i.subRows&&i.subRows.length)){const a=we(i,n);a==="all"?s=!0:(a==="some"&&(s=!0),o=!1)}}),o?"all":s?"some":!1}const Re=/([0-9]+)/gm,Tn=(e,n,t)=>it(O(e.getValue(t)).toLowerCase(),O(n.getValue(t)).toLowerCase()),Gn=(e,n,t)=>it(O(e.getValue(t)),O(n.getValue(t))),bn=(e,n,t)=>$e(O(e.getValue(t)).toLowerCase(),O(n.getValue(t)).toLowerCase()),zn=(e,n,t)=>$e(O(e.getValue(t)),O(n.getValue(t))),kn=(e,n,t)=>{const r=e.getValue(t),o=n.getValue(t);return r>o?1:r<o?-1:0},Bn=(e,n,t)=>$e(e.getValue(t),n.getValue(t));function $e(e,n){return e===n?0:e>n?1:-1}function O(e){return typeof e=="number"?isNaN(e)||e===1/0||e===-1/0?"":String(e):typeof e=="string"?e:""}function it(e,n){const t=e.split(Re).filter(Boolean),r=n.split(Re).filter(Boolean);for(;t.length&&r.length;){const o=t.shift(),s=r.shift(),i=parseInt(o,10),a=parseInt(s,10),u=[i,a].sort();if(isNaN(u[0])){if(o>s)return 1;if(s>o)return-1;continue}if(isNaN(u[1]))return isNaN(i)?-1:1;if(i>a)return 1;if(a>i)return-1}return t.length-r.length}const z={alphanumeric:Tn,alphanumericCaseSensitive:Gn,text:bn,textCaseSensitive:zn,datetime:kn,basic:Bn},Un={getInitialState:e=>({sorting:[],...e}),getDefaultColumnDef:()=>({sortingFn:"auto",sortUndefined:1}),getDefaultOptions:e=>({onSortingChange:I("sorting",e),isMultiSortEvent:n=>n.shiftKey}),createColumn:(e,n)=>{e.getAutoSortingFn=()=>{const t=n.getFilteredRowModel().flatRows.slice(10);let r=!1;for(const o of t){const s=o?.getValue(e.id);if(Object.prototype.toString.call(s)==="[object Date]")return z.datetime;if(typeof s=="string"&&(r=!0,s.split(Re).length>1))return z.alphanumeric}return r?z.text:z.basic},e.getAutoSortDir=()=>{const t=n.getFilteredRowModel().flatRows[0];return typeof t?.getValue(e.id)=="string"?"asc":"desc"},e.getSortingFn=()=>{var t,r;if(!e)throw new Error;return se(e.columnDef.sortingFn)?e.columnDef.sortingFn:e.columnDef.sortingFn==="auto"?e.getAutoSortingFn():(t=(r=n.options.sortingFns)==null?void 0:r[e.columnDef.sortingFn])!=null?t:z[e.columnDef.sortingFn]},e.toggleSorting=(t,r)=>{const o=e.getNextSortingOrder(),s=typeof t<"u"&&t!==null;n.setSorting(i=>{const a=i?.find(g=>g.id===e.id),u=i?.findIndex(g=>g.id===e.id);let d=[],f,m=s?t:o==="desc";if(i!=null&&i.length&&e.getCanMultiSort()&&r?a?f="toggle":f="add":i!=null&&i.length&&u!==i.length-1?f="replace":a?f="toggle":f="replace",f==="toggle"&&(s||o||(f="remove")),f==="add"){var c;d=[...i,{id:e.id,desc:m}],d.splice(0,d.length-((c=n.options.maxMultiSortColCount)!=null?c:Number.MAX_SAFE_INTEGER))}else f==="toggle"?d=i.map(g=>g.id===e.id?{...g,desc:m}:g):f==="remove"?d=i.filter(g=>g.id!==e.id):d=[{id:e.id,desc:m}];return d})},e.getFirstSortDir=()=>{var t,r;return((t=(r=e.columnDef.sortDescFirst)!=null?r:n.options.sortDescFirst)!=null?t:e.getAutoSortDir()==="desc")?"desc":"asc"},e.getNextSortingOrder=t=>{var r,o;const s=e.getFirstSortDir(),i=e.getIsSorted();return i?i!==s&&((r=n.options.enableSortingRemoval)==null||r)&&(!(t&&(o=n.options.enableMultiRemove)!=null)||o)?!1:i==="desc"?"asc":"desc":s},e.getCanSort=()=>{var t,r;return((t=e.columnDef.enableSorting)!=null?t:!0)&&((r=n.options.enableSorting)!=null?r:!0)&&!!e.accessorFn},e.getCanMultiSort=()=>{var t,r;return(t=(r=e.columnDef.enableMultiSort)!=null?r:n.options.enableMultiSort)!=null?t:!!e.accessorFn},e.getIsSorted=()=>{var t;const r=(t=n.getState().sorting)==null?void 0:t.find(o=>o.id===e.id);return r?r.desc?"desc":"asc":!1},e.getSortIndex=()=>{var t,r;return(t=(r=n.getState().sorting)==null?void 0:r.findIndex(o=>o.id===e.id))!=null?t:-1},e.clearSorting=()=>{n.setSorting(t=>t!=null&&t.length?t.filter(r=>r.id!==e.id):[])},e.getToggleSortingHandler=()=>{const t=e.getCanSort();return r=>{t&&(r.persist==null||r.persist(),e.toggleSorting==null||e.toggleSorting(void 0,e.getCanMultiSort()?n.options.isMultiSortEvent==null?void 0:n.options.isMultiSortEvent(r):!1))}}},createTable:e=>{e.setSorting=n=>e.options.onSortingChange==null?void 0:e.options.onSortingChange(n),e.resetSorting=n=>{var t,r;e.setSorting(n?[]:(t=(r=e.initialState)==null?void 0:r.sorting)!=null?t:[])},e.getPreSortedRowModel=()=>e.getGroupedRowModel(),e.getSortedRowModel=()=>(!e._getSortedRowModel&&e.options.getSortedRowModel&&(e._getSortedRowModel=e.options.getSortedRowModel(e)),e.options.manualSorting||!e._getSortedRowModel?e.getPreSortedRowModel():e._getSortedRowModel())}},qn=[cn,En,Pn,Mn,pn,hn,Vn,Nn,Un,Fn,Ln,On,An,Hn,jn];function Kn(e){var n,t;const r=[...qn,...(n=e._features)!=null?n:[]];let o={_features:r};const s=o._features.reduce((c,g)=>Object.assign(c,g.getDefaultOptions==null?void 0:g.getDefaultOptions(o)),{}),i=c=>o.options.mergeOptions?o.options.mergeOptions(s,c):{...s,...c};let u={...{},...(t=e.initialState)!=null?t:{}};o._features.forEach(c=>{var g;u=(g=c.getInitialState==null?void 0:c.getInitialState(u))!=null?g:u});const d=[];let f=!1;const m={_features:r,options:{...s,...e},initialState:u,_queue:c=>{d.push(c),f||(f=!0,Promise.resolve().then(()=>{for(;d.length;)d.shift()();f=!1}).catch(g=>setTimeout(()=>{throw g})))},reset:()=>{o.setState(o.initialState)},setOptions:c=>{const g=L(c,o.options);o.options=i(g)},getState:()=>o.options.state,setState:c=>{o.options.onStateChange==null||o.options.onStateChange(c)},_getRowId:(c,g,p)=>{var h;return(h=o.options.getRowId==null?void 0:o.options.getRowId(c,g,p))!=null?h:`${p?[p.id,g].join("."):g}`},getCoreRowModel:()=>(o._getCoreRowModel||(o._getCoreRowModel=o.options.getCoreRowModel(o)),o._getCoreRowModel()),getRowModel:()=>o.getPaginationRowModel(),getRow:(c,g)=>{let p=(g?o.getPrePaginationRowModel():o.getRowModel()).rowsById[c];if(!p&&(p=o.getCoreRowModel().rowsById[c],!p))throw new Error;return p},_getDefaultColumnDef:S(()=>[o.options.defaultColumn],c=>{var g;return c=(g=c)!=null?g:{},{header:p=>{const h=p.header.column.columnDef;return h.accessorKey?h.accessorKey:h.accessorFn?h.id:null},cell:p=>{var h,C;return(h=(C=p.renderValue())==null||C.toString==null?void 0:C.toString())!=null?h:null},...o._features.reduce((p,h)=>Object.assign(p,h.getDefaultColumnDef==null?void 0:h.getDefaultColumnDef()),{}),...c}},v(e,"debugColumns")),_getColumnDefs:()=>o.options.columns,getAllColumns:S(()=>[o._getColumnDefs()],c=>{const g=function(p,h,C){return C===void 0&&(C=0),p.map(x=>{const w=gn(o,x,C,h),R=x;return w.columns=R.columns?g(R.columns,w,C+1):[],w})};return g(c)},v(e,"debugColumns")),getAllFlatColumns:S(()=>[o.getAllColumns()],c=>c.flatMap(g=>g.getFlatColumns()),v(e,"debugColumns")),_getAllFlatColumnsById:S(()=>[o.getAllFlatColumns()],c=>c.reduce((g,p)=>(g[p.id]=p,g),{}),v(e,"debugColumns")),getAllLeafColumns:S(()=>[o.getAllColumns(),o._getOrderColumnsFn()],(c,g)=>{let p=c.flatMap(h=>h.getLeafColumns());return g(p)},v(e,"debugColumns")),getColumn:c=>o._getAllFlatColumnsById()[c]};Object.assign(o,m);for(let c=0;c<o._features.length;c++){const g=o._features[c];g==null||g.createTable==null||g.createTable(o)}return o}function Qn(){return e=>S(()=>[e.options.data],n=>{const t={rows:[],flatRows:[],rowsById:{}},r=function(o,s,i){s===void 0&&(s=0);const a=[];for(let d=0;d<o.length;d++){const f=fn(e,e._getRowId(o[d],d,i),o[d],d,s,void 0,i?.id);if(t.flatRows.push(f),t.rowsById[f.id]=f,a.push(f),e.options.getSubRows){var u;f.originalSubRows=e.options.getSubRows(o[d],d),(u=f.originalSubRows)!=null&&u.length&&(f.subRows=r(f.originalSubRows,s+1,f))}}return a};return t.rows=r(n),t},v(e.options,"debugTable","getRowModel",()=>e._autoResetPageIndex()))}function Xn(e){const n=[],t=r=>{var o;n.push(r),(o=r.subRows)!=null&&o.length&&r.getIsExpanded()&&r.subRows.forEach(t)};return e.rows.forEach(t),{rows:n,flatRows:e.flatRows,rowsById:e.rowsById}}function Wn(e){return n=>S(()=>[n.getState().pagination,n.getPrePaginationRowModel(),n.options.paginateExpandedRows?void 0:n.getState().expanded],(t,r)=>{if(!r.rows.length)return r;const{pageSize:o,pageIndex:s}=t;let{rows:i,flatRows:a,rowsById:u}=r;const d=o*s,f=d+o;i=i.slice(d,f);let m;n.options.paginateExpandedRows?m={rows:i,flatRows:a,rowsById:u}:m=Xn({rows:i,flatRows:a,rowsById:u}),m.flatRows=[];const c=g=>{m.flatRows.push(g),g.subRows.length&&g.subRows.forEach(c)};return m.rows.forEach(c),m},v(n.options,"debugTable"))}function Yn(){return e=>S(()=>[e.getState().sorting,e.getPreSortedRowModel()],(n,t)=>{if(!t.rows.length||!(n!=null&&n.length))return t;const r=e.getState().sorting,o=[],s=r.filter(u=>{var d;return(d=e.getColumn(u.id))==null?void 0:d.getCanSort()}),i={};s.forEach(u=>{const d=e.getColumn(u.id);d&&(i[u.id]={sortUndefined:d.columnDef.sortUndefined,invertSorting:d.columnDef.invertSorting,sortingFn:d.getSortingFn()})});const a=u=>{const d=u.map(f=>({...f}));return d.sort((f,m)=>{for(let g=0;g<s.length;g+=1){var c;const p=s[g],h=i[p.id],C=h.sortUndefined,x=(c=p?.desc)!=null?c:!1;let w=0;if(C){const R=f.getValue(p.id),P=m.getValue(p.id),_=R===void 0,A=P===void 0;if(_||A){if(C==="first")return _?-1:1;if(C==="last")return _?1:-1;w=_&&A?0:_?C:-C}}if(w===0&&(w=h.sortingFn(f,m,p.id)),w!==0)return x&&(w*=-1),h.invertSorting&&(w*=-1),w}return f.index-m.index}),d.forEach(f=>{var m;o.push(f),(m=f.subRows)!=null&&m.length&&(f.subRows=a(f.subRows))}),d};return{rows:a(t.rows),flatRows:o,rowsById:t.rowsById}},v(e.options,"debugTable","getSortedRowModel",()=>e._autoResetPageIndex()))}/**
   * react-table
   *
   * Copyright (c) TanStack
   *
   * This source code is licensed under the MIT license found in the
   * LICENSE.md file in the root directory of this source tree.
   *
   * @license MIT
   */function Ae(e,n){return e?Jn(e)?y.createElement(e,n):e:null}function Jn(e){return Zn(e)||typeof e=="function"||er(e)}function Zn(e){return typeof e=="function"&&(()=>{const n=Object.getPrototypeOf(e);return n.prototype&&n.prototype.isReactComponent})()}function er(e){return typeof e=="object"&&typeof e.$$typeof=="symbol"&&["react.memo","react.forward_ref"].includes(e.$$typeof.description)}function tr(e){const n={state:{},onStateChange:()=>{},renderFallbackValue:null,...e},[t]=y.useState(()=>({current:Kn(n)})),[r,o]=y.useState(()=>t.current.initialState);return t.current.setOptions(s=>({...s,...e,state:{...r,...e.state},onStateChange:i=>{o(i),e.onStateChange==null||e.onStateChange(i)}})),t.current}const nr=(e,n)=>{const[t,r]=y.useState(e);return y.useEffect(()=>{const o=setTimeout(()=>{r(e)},n);return()=>{clearTimeout(o)}},[e,n]),t},He=e=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:0}).format(e),rr=()=>{const[e,n]=y.useState([{id:"total_revenue",desc:!0}]),[t,r]=y.useState(""),o=nr(t,500),[s,i]=y.useState(""),a=y.useMemo(()=>{const p={product_name:o||void 0,rating:s?Number(s):void 0};return e.length>0&&(p.order=`${e[0].desc?"-":""}${e[0].id}`),p},[e,o,s]),{data:u,isLoading:d,isError:f,error:m}=G({queryKey:["popularProducts",a],queryFn:()=>Kt(a),placeholderData:p=>p}),c=y.useMemo(()=>[{accessorKey:"name",header:"Product",cell:({row:p})=>l.jsxs("div",{className:"flex items-center",children:[l.jsx("img",{className:"h-10 w-10 rounded-lg object-cover",src:p.original.thumbnail,alt:p.original.name}),l.jsxs("div",{className:"ml-4",children:[l.jsx("div",{className:"text-sm font-medium text-gray-900",children:p.original.name}),l.jsx("div",{className:"text-sm text-gray-500",children:He(Number(p.original.price||0))})]})]})},{accessorKey:"category_name",header:"Category",cell:p=>l.jsx("span",{className:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-blue-100 text-blue-800",children:p.getValue()})},{accessorKey:"total_revenue",header:"Revenue",cell:p=>l.jsx("span",{className:"font-medium text-green-600",children:He(Number(p.getValue()||0))})},{accessorKey:"total_orders",header:"Orders"},{accessorKey:"total_ratings",header:"Ratings"}],[]),g=tr({data:u?.data||[],columns:c,state:{sorting:e},onSortingChange:n,getCoreRowModel:Qn(),getSortedRowModel:Yn(),getPaginationRowModel:Wn(),manualSorting:!0,manualPagination:!1});return l.jsxs("div",{className:"bg-white rounded-xl shadow-xs border border-gray-100 overflow-hidden",children:[l.jsxs("div",{className:"p-6 flex justify-between items-center",children:[l.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Top Products by Revenue"}),l.jsxs("div",{className:"flex",children:[l.jsxs("select",{value:s,onChange:p=>i(p.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg",children:[l.jsx("option",{value:"",children:"All Ratings"}),l.jsx("option",{value:"4",children:"4 Stars & Up"}),l.jsx("option",{value:"3",children:"3 Stars & Up"}),l.jsx("option",{value:"2",children:"2 Stars & Up"}),l.jsx("option",{value:"1",children:"1 Star & Up"})]}),l.jsxs("div",{className:"relative",children:[l.jsx(xt,{className:"w-5 h-5 text-gray-400 absolute left-3 top-1/2 -translate-y-1/2"}),l.jsx("input",{type:"text",placeholder:"Search products...",value:t,onChange:p=>r(p.target.value),className:"pl-10 pr-4 py-2 border border-gray-300 rounded-lg"})]})]})]}),d&&l.jsx("div",{className:"p-6",children:l.jsx(W,{message:"Loading products..."})}),f&&l.jsx("div",{className:"p-6",children:l.jsx(V,{message:m.message})}),!d&&!f&&l.jsx("div",{className:"overflow-x-auto",children:l.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[l.jsx("thead",{className:"bg-gray-50",children:g.getHeaderGroups().map(p=>l.jsx("tr",{children:p.headers.map(h=>l.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",onClick:h.column.getToggleSortingHandler(),children:l.jsxs("span",{className:"flex items-center gap-2",children:[Ae(h.column.columnDef.header,h.getContext()),h.column.getIsSorted()==="desc"&&l.jsx(At,{className:"w-4 h-4"}),h.column.getIsSorted()==="asc"&&l.jsx(Tt,{className:"w-4 h-4"})]})},h.id))},p.id))}),l.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:g.getRowModel().rows.map(p=>l.jsx("tr",{className:"hover:bg-gray-50",children:p.getVisibleCells().map(h=>l.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-700",children:Ae(h.column.columnDef.cell,h.getContext())},h.id))},p.id))})]})}),l.jsxs("div",{className:"p-4 flex items-center justify-between border-t border-gray-200",children:[l.jsxs("button",{onClick:()=>g.previousPage(),disabled:!g.getCanPreviousPage(),className:"flex items-center gap-1 px-3 py-1.5 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 disabled:opacity-50",children:[l.jsx(wt,{className:"w-4 h-4"})," Previous"]}),l.jsxs("span",{className:"text-sm text-gray-600",children:["Page ",g.getState().pagination.pageIndex+1," of"," ",g.getPageCount()]}),l.jsxs("button",{onClick:()=>g.nextPage(),disabled:!g.getCanNextPage(),className:"flex items-center gap-1 px-3 py-1.5 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 disabled:opacity-50",children:["Next ",l.jsx(St,{className:"w-4 h-4"})]})]})]})},or=()=>{const{data:e,isLoading:n,isError:t,error:r}=G({queryKey:["lowStockProducts"],queryFn:Qt}),o=e?.data||[];return l.jsxs("div",{className:"bg-white h-full rounded-xl shadow-xs border border-gray-100 p-6",children:[l.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Low Stock Products"}),n?l.jsx(W,{}):t?l.jsx(V,{message:r.message}):o.length>0?l.jsx("div",{className:"space-y-3",children:o.map(s=>l.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg bg-yellow-50 border border-yellow-200",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx(be,{className:"w-5 h-5 text-yellow-500"}),l.jsx("p",{className:"font-medium text-gray-800",children:s.name})]}),l.jsxs("div",{className:"text-sm",children:[l.jsx("span",{className:"font-bold text-red-600",children:s.stock_quantity}),l.jsxs("span",{className:"text-gray-500",children:[" ","/ ",s.low_stock_threshold," threshold"]})]})]},s.id))}):l.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-center text-gray-500",children:[l.jsx(ze,{className:"w-12 h-12 mb-2"}),l.jsx("p",{children:"All products are well-stocked!"})]})]})},sr=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],Te=["#0088FE","#00C49F","#FFBB28","#FF8042"],ir=({filters:e})=>{const{data:n,isLoading:t,isError:r,error:o}=G({queryKey:["topCategories",e],queryFn:()=>qt(e)}),s=n?.data||[],a=(()=>{const d=new Set;return s.forEach(m=>{m.monthly_data.forEach(c=>{d.add(c.month)})}),Array.from(d).sort((m,c)=>m-c).map(m=>{const c={name:sr[m-1]};return s.forEach(g=>{const p=g.monthly_data.find(h=>h.month===m);c[g.category_name]=p?+p.total_amount:0}),c})})(),u=s.map(d=>d.category_name);return l.jsx(re,{title:"Top Categories (Monthly Trend)",isLoading:t,children:r?l.jsx(V,{message:o.message}):l.jsxs(l.Fragment,{children:[l.jsx(Y,{width:"100%",height:300,children:l.jsxs(We,{data:a,margin:{top:5,right:20,left:-10,bottom:5},children:[l.jsx(J,{strokeDasharray:"3 3",vertical:!1}),l.jsx(Z,{dataKey:"name",fontSize:12,tickLine:!1,axisLine:!1}),l.jsx(ee,{fontSize:12,tickLine:!1,axisLine:!1,tickFormatter:d=>`$${d/1e3}k`}),l.jsx(te,{contentStyle:{backgroundColor:"#fff",border:"1px solid #ddd",borderRadius:"0.5rem"}}),l.jsx(ne,{}),u.map((d,f)=>l.jsx(Ue,{type:"monotone",dataKey:d,stroke:Te[f%Te.length],strokeWidth:2,activeDot:{r:8}},d))]})}),l.jsx(oe,{children:l.jsx("p",{children:"This chart shows the revenue trend for your top 4 categories over the selected period."})})]})})},fe=e=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:0}).format(e),lr=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],ar=({filters:e})=>{const n={filter:"year",...e},{data:t,isLoading:r,isError:o,error:s}=G({queryKey:["revenueGrowth",n],queryFn:()=>Xt(n)}),i=(t?.data||[]).map(d=>({name:`${lr[d.month-1]} ${d.year}`,Revenue:Number(d.total_amount||0)})).sort((d,f)=>{const[m,c]=d.name.split(" "),[g,p]=f.name.split(" "),h=new Date(`${m} 1, ${c}`),C=new Date(`${g} 1, ${p}`);return h-C}),a=i.reduce((d,f)=>d+f.Revenue,0),u=a/(i.length||1);return l.jsx(re,{title:"Monthly Revenue Growth",isLoading:r,children:o?l.jsx(V,{message:s.message}):i.length===0?l.jsx(V,{message:"No revenue data found for this period."}):l.jsxs(l.Fragment,{children:[l.jsx(Y,{width:"100%",height:350,children:l.jsxs(Ye,{data:i,children:[l.jsx(J,{strokeDasharray:"3 3"}),l.jsx(Z,{dataKey:"name",fontSize:12,tickLine:!1,axisLine:!1}),l.jsx(ee,{fontSize:12,tickLine:!1,axisLine:!1,tickFormatter:d=>`$${d/1e3}k`}),l.jsx(te,{formatter:d=>fe(d)}),l.jsx(ne,{}),l.jsx(qe,{dataKey:"Revenue",fill:"#8884d8",radius:[4,4,0,0]})]})}),l.jsx(oe,{children:l.jsxs("p",{children:["You generated"," ",l.jsx("span",{className:"font-semibold text-gray-900",children:fe(a)})," ","this period, with an average of"," ",l.jsx("span",{className:"font-semibold text-gray-900",children:fe(u)})," ","per month."]})})]})})},ur=e=>!e||!e.from?{last_days:30}:{last_days:Math.ceil((e.to-e.from)/(1e3*60*60*24))+1},jr=()=>{const[e,n]=y.useState({from:zt(new Date),to:new Date}),t=ur(e),r={filter:"month",months:12};return l.jsx(pt,{children:l.jsxs("div",{className:"space-y-6",children:[l.jsx(Zt,{dateRange:e,onDateRangeChange:n}),l.jsx(Jt,{filters:t}),l.jsx("div",{className:"lg:col-span-3",children:l.jsx(on,{filters:t})}),l.jsx("div",{className:"lg:col-span-2",children:l.jsx(ln,{filters:t})}),l.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[l.jsx("div",{children:l.jsx(ar,{filters:r})}),l.jsx("div",{children:l.jsx(ir,{filters:t})})]}),l.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-5 gap-6"}),l.jsx(or,{}),l.jsx(rr,{})]})})};export{jr as default};
