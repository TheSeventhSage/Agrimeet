import{a as k,b as D,r as a,d as n,j as e,k as C,e as P}from"./index-C7G52Pl0.js";import{D as p,P as S}from"./DashboardLayout-BvYMyTkM.js";import{C as A}from"./ConfirmationModal-SSmu3Mbo.js";import{i as E,j as L}from"./productsApi-i5zjMZO3.js";import{A as T}from"./arrow-left-Crwr5rsD.js";import{P as _}from"./package-DupdcTls.js";import{S as $}from"./square-pen-CwAfaGqy.js";import{T as I}from"./trash-2-yhPGZUjZ.js";import"./Logo-DmsMbJO2.js";import"./x-B7cmv6PP.js";import"./createLucideIcon-BK9ndVRo.js";import"./house-D2YIMOjc.js";import"./users-BmFRYmpR.js";import"./file-check-CHEU1kxb.js";import"./shield-check-DG8ZUOrZ.js";import"./circle-question-mark-DtC5Y68d.js";import"./star-C80gymXW.js";import"./message-circle-CLbYCCGy.js";import"./file-text-XKYnme41.js";import"./user-CwMqLLM3.js";import"./BackgroundArt-Ct9Pe-Iv.js";const re=()=>{const{productId:t}=k(),r=D(),[d,g]=a.useState([]),[j,c]=a.useState(!0),[m,x]=a.useState({}),[y,l]=a.useState(!1),[i,o]=a.useState(null);a.useEffect(()=>{if(!t){n("Invalid product ID"),r("/products");return}h()},[t,r]);const h=async()=>{try{c(!0);const s=await E(t);g(s.data||s||[])}catch(s){console.error("Error loading variants:",s),n("Failed to load variants. Please try again.")}finally{c(!1)}},u=()=>{r(`/products/${t}/variants/add`)},N=s=>{r(`/products/${t}/variants/${s}/edit`)},b=s=>{o(s),l(!0)},f=async()=>{if(i)try{x(s=>({...s,[i.id]:!0})),await L(t,i.id),P("Variety deleted successfully!"),await h()}catch(s){console.error("Error deleting variety:",s),n("Failed to delete variety. Please try again.")}finally{x(s=>({...s,[i.id]:!1})),l(!1),o(null)}},v=()=>{r("/products")};return j?e.jsx(p,{children:e.jsx("div",{className:"max-w-6xl mx-auto",children:e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsxs("div",{className:"text-center",children:[e.jsx(C,{}),e.jsx("p",{className:"text-gray-600",children:"Loading variants..."})]})})})}):e.jsx(p,{children:e.jsxs("div",{className:"max-w-6xl mx-auto",children:[e.jsx("div",{className:"mb-6",children:e.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[e.jsx("button",{onClick:v,className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:e.jsx(T,{className:"w-5 h-5 text-gray-600"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Product Varieties"}),e.jsxs("p",{className:"text-gray-600",children:["Manage varieties for Product ID: ",t]})]}),e.jsxs("button",{onClick:u,className:"px-4 py-2 bg-brand-500 text-white rounded-lg hover:bg-brand-600 transition-colors flex items-center gap-2",children:[e.jsx(S,{className:"w-4 h-4"}),"Add Variety"]})]})}),e.jsx("div",{className:"bg-white rounded-xl shadow-xs border border-gray-100 overflow-hidden",children:d.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(_,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No varieties yet"}),e.jsx("p",{className:"text-gray-500 mb-6",children:"Create your first variety for this product"}),e.jsx("button",{onClick:u,className:"px-6 py-2 bg-brand-500 text-white rounded-lg hover:bg-brand-600 transition-colors",children:"Add First Variant"})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"px-6 py-4 border-b border-gray-200 bg-gray-50",children:e.jsxs("div",{className:"grid grid-cols-12 gap-4 text-sm font-medium text-gray-700",children:[e.jsx("div",{className:"col-span-3",children:"Name"}),e.jsx("div",{className:"col-span-2",children:"SKU"}),e.jsx("div",{className:"col-span-2",children:"Price"}),e.jsx("div",{className:"col-span-2",children:"Stock"}),e.jsx("div",{className:"col-span-2",children:"Attributes"}),e.jsx("div",{className:"col-span-1",children:"Actions"})]})}),e.jsx("div",{className:"divide-y divide-gray-200",children:d.map(s=>e.jsx("div",{className:"px-6 py-4 hover:bg-gray-50 transition-colors",children:e.jsxs("div",{className:"grid grid-cols-12 gap-4 items-center",children:[e.jsx("div",{className:"col-span-3",children:e.jsx("p",{className:"font-medium text-gray-900 text-sm",children:s.name})}),e.jsx("div",{className:"col-span-2",children:e.jsx("span",{className:"text-sm text-gray-600",children:s.sku})}),e.jsx("div",{className:"col-span-2",children:e.jsxs("span",{className:"text-sm font-medium text-gray-900",children:["$",s.price]})}),e.jsx("div",{className:"col-span-2",children:e.jsx("span",{className:`text-sm font-medium ${s.stock_quantity>50?"text-green-600":s.stock_quantity>10?"text-yellow-600":"text-red-600"}`,children:s.stock_quantity})}),e.jsx("div",{className:"col-span-2",children:e.jsx("div",{className:"flex flex-wrap gap-1",children:s.attribute_values&&s.attribute_values.length>0?s.attribute_values.map((w,V)=>e.jsx("span",{className:"px-2 py-0.5 bg-blue-100 text-blue-800 text-xs rounded-full",children:w.attribute.name},V)):e.jsx("span",{className:"text-xs text-gray-400",children:"No attributes"})})}),e.jsx("div",{className:"col-span-1",children:e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("button",{onClick:()=>N(s.id),className:"p-1.5 text-blue-400 hover:text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",title:"Edit Variety",children:e.jsx($,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>b(s),disabled:m[s.id],className:"p-1.5 text-red-400 hover:text-red-600 hover:bg-red-50 rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed",title:"Delete Variety",children:m[s.id]?e.jsx("div",{className:"w-4 h-4 animate-spin rounded-full border-2 border-red-300 border-t-red-600"}):e.jsx(I,{className:"w-4 h-4"})})]})})]})},s.id))})]})}),e.jsx(A,{isOpen:y,onClose:()=>{l(!1),o(null)},onConfirm:f,title:"Delete Variety",message:`Are you sure you want to delete "${i?.name}"? This action cannot be undone.`,confirmText:"Delete",cancelText:"Cancel",type:"danger"})]})})};export{re as default};
