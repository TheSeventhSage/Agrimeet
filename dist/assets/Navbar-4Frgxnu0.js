import{s as u,r as x,b as k,j as e}from"./index-BrJE6Ruv.js";import{L as w}from"./Logo-yv9J0Zw_.js";import{M as A}from"./mail-DbM3aU6_.js";import{P as S}from"./phone-wn7fZVnI.js";import{S as T}from"./search-JGraeCEO.js";import{U as m,M as E}from"./user-BoLJHLaW.js";import{X as C}from"./x-89xIXrzd.js";import{D as $}from"./download-DV0tIHac.js";import{F as P,T as R,I as D,L}from"./twitter-Byv6UK26.js";const i="https://agrimeet.udehcoglobalfoodsltd.com/api/v1",p=()=>({"Content-Type":"application/json",Authorization:`Bearer ${u.getAccessToken()}`}),c=async s=>{if(!s.ok){let r;try{r=await s.json()}catch(o){r={message:await s.text()||"An unknown error occurred"+o.message}}const n=new Error(r.message||`HTTP error! status: ${s.status}`);throw n.status=s.status,n.data=r,n}return s.status===204?null:s.json()},B={async getAllCategories(){try{const s=await fetch(`${i}/allcategories`,{method:"GET",headers:{"Content-Type":"application/json"}});return(await c(s)).data}catch(s){throw console.error("Error fetching categories:",s),s}},async getAllProducts(s=1,r=12,n={}){const o=new URL(`${i}/allproducts`);o.searchParams.append("page",String(s)),o.searchParams.append("per_page",String(r)),Object.entries(n).forEach(([t,a])=>{a!=null&&a!==""&&o.searchParams.append(t,String(a))});try{const t=await fetch(o.toString(),{method:"GET",headers:{"Content-Type":"application/json"}});return c(t)}catch(t){throw console.error("Error fetching products:",t),t}},async getProduct(s){try{const r=await fetch(`${i}/seller/products/${s}/show_product`,{method:"GET",headers:{"Content-Type":"application/json"}});return c(r)}catch(r){throw console.error("Error fetching product:",r),r}},async getProductReviews(s){try{const r=await fetch(`${i}/buyer/allreviews?product_id=${s}&page=1`,{method:"GET",headers:{"Content-Type":"application/json"}});return await c(r)}catch(r){if(r.status===404)return console.warn(`API Warning: ${r.message||"No reviews found"}. Returning empty array for reviews.`),{data:[],links:{},meta:{}};throw console.error("Error fetching product reviews:",r),r}},async submitReview(s){try{const r=await fetch(`${i}/buyer/reviews`,{method:"POST",headers:p(),body:JSON.stringify(s)});return c(r)}catch(r){throw console.error("Error submitting review:",r),r}},async likeReview(s){try{const r=await fetch(`${i}/buyer/reviews/${s}/like`,{method:"POST",headers:p()});return c(r)}catch(r){throw console.error("Error liking review:",r),r}},async unlikeReview(s){try{const r=await fetch(`${i}/buyer/reviews/${s}/unlike`,{method:"DELETE",headers:p()});return c(r)}catch(r){throw console.error("Error unliking review:",r),r}}},Q=()=>{const[s,r]=x.useState(!1),[n,o]=x.useState(""),t=k(),[a,y]=x.useState({isAuthenticated:!1,user:{},userName:"",isSeller:!1,roles:[]});x.useEffect(()=>{(()=>{if(u.hasActiveSession()){const d=u.getUserData();console.log(d);const h=u.getTokens(),b=h?.role?Array.isArray(h.role)?h.role:[h.role]:h?.roles?h.roles:[],g=b.includes("seller");console.log(g);const j=g?d?.user||d?.data.first_name+" "+d?.data.last_name:d.roles.includes("admin")?"Admin":"";console.log(j),y({isAuthenticated:!0,userName:j||"Dashboard",isSeller:g,user:d,roles:b})}})()},[]);const N=l=>{l.preventDefault(),n.trim()&&(t(`/search?q=${encodeURIComponent(n.trim())}`),o(""))};console.log(a);const v=[{icon:P,href:"https://facebook.com",label:"Facebook"},{icon:R,href:"https://twitter.com",label:"Twitter"},{icon:D,href:"https://instagram.com",label:"Instagram"},{icon:L,href:"https://linkedin.com",label:"LinkedIn"}];return e.jsxs("header",{className:"bg-white shadow-sm sticky top-0 z-50",children:[e.jsx("div",{className:"bg-green-800 text-white text-xs py-2 px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"container mx-auto flex flex-row justify-between items-center gap-2",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(A,{className:"w-4 h-4"}),e.jsx("span",{children:"hello@agrimeet.com"})]}),e.jsxs("div",{className:"hidden sm:flex items-center gap-2",children:[e.jsx(S,{className:"w-4 h-4"}),e.jsx("span",{children:"+1 (555) 123-4567"})]})]}),e.jsx("div",{className:"flex items-center gap-4",children:e.jsx("a",{href:"/contact",className:"hover:underline",children:"Help & Support"})})]})}),e.jsx("nav",{className:"container mx-auto sm:px- l py-4",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-12 h-12 bg-linear-to-r from-green-600 to-green-700 rounded-2xl flex items-center justify-center shadow-lg",children:e.jsx(w,{className:"w-7 h-7 text-white"})}),e.jsx("h3",{className:"sm:block hidden text-3xl font-bold text-gray-900",children:"Agrimeet"})]}),e.jsx("form",{onSubmit:N,className:"flex",children:e.jsxs("div",{className:"relative w-full",children:[e.jsx("input",{type:"text",value:n,onChange:l=>o(l.target.value),placeholder:"Search for products, farmers...",className:"w-full pl-4 pr-12 py-2 border border-gray-200 rounded-2xl bg-gray-50 focus:outline-none focus:ring-2 focus:ring-green-600 focus:border-transparent"}),e.jsx("button",{type:"submit",className:"absolute right-0 top-0 h-full px-3 flex items-center justify-center border-l border-gray-200 text-gray-500 hover:text-green-600 cursor-pointer",children:e.jsx(T,{className:"w-5 h-5"})})]})}),e.jsx("div",{className:"hidden md:flex items-center gap-4 ml-",children:a.isAuthenticated?a.isSeller?e.jsxs("button",{onClick:()=>t("/dashboard"),className:"text-gray-900 font-semibold hover:text-green-600 transition-colors flex items-center gap-2 cursor-pointer",children:[e.jsx(m,{className:"w-4 h-4"}),e.jsx("span",{children:"Dashboard"})]}):e.jsxs("button",{onClick:()=>a.user.roles.includes("seller")?t("/dashboard"):a.user.roles.includes("admin")?t("/admin/dashboard"):t("/"),className:"text-gray-900 font-semibold hover:text-green-600 transition-colors flex items-center gap-2 cursor-pointer",children:[e.jsx(m,{className:"w-4 h-4"}),e.jsxs("span",{children:["Hi, ",a.userName]})]}):e.jsxs(e.Fragment,{children:[e.jsxs("button",{onClick:()=>t("/login"),className:"text-gray-900 font-semibold hover:text-green-600 transition-colors flex items-center gap-2 cursor-pointer",children:[e.jsx(m,{className:"w-4 h-4"}),e.jsx("span",{children:"Account"})]}),e.jsx("button",{className:"bg-green-600 text-white font-semibold py-3 px-6 rounded-2xl hover:bg-green-700 transition-all transform active:scale-95 cursor-pointer",onClick:()=>t("/register"),children:"Get Started"})]})}),e.jsx("div",{className:"md:hidden flex items-center",children:e.jsx("button",{onClick:()=>r(!0),children:e.jsx(E,{className:"w-6 h-6 text-gray-900"})})})]})}),s&&e.jsx("div",{className:"md:hidden fixed inset-0 bg-[rgba(0,0,0,0.6)] z-50",children:e.jsx("div",{className:"fixed top-0 left-0 w-4/5 max-w-sm h-full bg-white shadow-xl overflow-y-auto z-60",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-8",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-12 h-12 bg-linear-to-r from-green-600 to-green-700 rounded-2xl flex items-center justify-center shadow-lg",children:e.jsx(w,{className:"w-7 h-7 text-white"})}),e.jsx("h3",{className:"block text-2xl font-bold text-gray-900",children:"Agrimeet"})]}),e.jsx("button",{onClick:()=>r(!1),children:e.jsx(C,{className:"w-6 h-6 text-gray-700"})})]}),a.isAuthenticated&&e.jsxs("div",{className:"bg-gradient-to-r from-green-50 to-green-100 rounded-2xl p-4 mb-6 border border-green-200",children:[e.jsx("p",{className:"text-green-800 text-sm font-medium mb-1",children:"Welcome back!"}),e.jsx("p",{className:"text-green-900 font-bold text-lg",children:a.userName})]}),e.jsx("div",{className:"border-t border-gray-200 pt-6 mb-6",children:a.isAuthenticated?e.jsxs("button",{onClick:()=>{a.roles.includes("seller")||a.roles.includes("seller")?t("/dashboard"):a.roles.includes("admin")?t("/admin/dashboard"):t("/"),r(!1)},className:"w-full bg-green-600 text-white font-semibold py-3 px-6 rounded-2xl hover:bg-green-700 transition-all flex items-center justify-center gap-2 shadow-md",children:[e.jsx(m,{className:"w-5 h-5"}),e.jsx("span",{children:"Go to Dashboard"})]}):e.jsxs("div",{className:"space-y-3",children:[e.jsxs("button",{onClick:()=>{t("/login"),r(!1)},className:"w-full bg-green-600 text-white font-semibold py-3 px-6 rounded-2xl hover:bg-green-700 transition-all flex items-center justify-center gap-2 shadow-md",children:[e.jsx(m,{className:"w-5 h-5"}),e.jsx("span",{children:"Login"})]}),e.jsx("button",{onClick:()=>{t("/register"),r(!1)},className:"w-full text-green-600 font-semibold py-3 px-6 rounded-2xl border-2 border-green-600 hover:bg-green-50 transition-all flex items-center justify-center gap-2",children:e.jsx("span",{children:"Register"})})]})}),e.jsxs("button",{onClick:()=>{r(!1)},className:"w-full bg-gray-900 text-white font-semibold py-3 px-6 rounded-2xl hover:bg-gray-800 transition-all flex items-center justify-center gap-2 mb-6 shadow-md",children:[e.jsx($,{className:"w-5 h-5"}),e.jsx("span",{children:"Download App"})]}),e.jsxs("div",{className:"border-t border-gray-200 pt-6",children:[e.jsx("p",{className:"text-gray-600 text-sm font-medium mb-4 text-center",children:"Connect with us"}),e.jsx("div",{className:"flex justify-center gap-4",children:v.map(l=>{const f=l.icon;return e.jsx("a",{href:l.href,target:"_blank",rel:"noopener noreferrer",className:"w-10 h-10 bg-gray-100 rounded-full flex items-center justify-center text-gray-600 hover:bg-green-600 hover:text-white transition-all","aria-label":l.label,children:e.jsx(f,{className:"w-5 h-5"})},l.label)})})]}),e.jsx("div",{className:"mt-6 text-center",children:e.jsx("p",{className:"text-gray-500 text-xs",children:"Â© 2025 AgriMeet. All rights reserved."})})]})})})]})};export{Q as N,B as a};
