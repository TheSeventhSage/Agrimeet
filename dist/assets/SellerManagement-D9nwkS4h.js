import{D as w,j as e,r as d,d as k,e as F}from"./index-C7G52Pl0.js";import{T as he,E as pe,D as be}from"./DashboardLayout-BvYMyTkM.js";import{u as je,s as fe,U as q,a as X,S as ye}from"./SuspendUserModal-C89zzT35.js";import{C as V}from"./ConfirmationModal-SSmu3Mbo.js";import{S as K}from"./store-D_0Z2vXB.js";import{C as f}from"./circle-check-big-28D-GMzn.js";import{C as G}from"./clock-DxiVQocB.js";import{S as Ne}from"./search-Rqr5aH3r.js";import{B as ve}from"./building-CNdNIkgD.js";import{U as W}from"./user-CwMqLLM3.js";import{M as H}from"./map-pin-DB9Cjm-f.js";import{P as we}from"./phone-DsT_xwi1.js";import{C as O}from"./star-C80gymXW.js";import{S as Se}from"./shield-check-DG8ZUOrZ.js";import{C as v}from"./circle-x-DQ-cXR03.js";import{X as J}from"./x-B7cmv6PP.js";import{B as N}from"./Button-rTuh0BPh.js";import{F as Q}from"./file-text-XKYnme41.js";import{E as P}from"./external-link-CzbzoJQ_.js";import{L as Z}from"./loader-circle-Cvar0TnB.js";import{C as Ce}from"./credit-card-DfSSP4nG.js";import{P as _e}from"./Pagination-mmK8zfXD.js";import{I as ke}from"./image-DJXYZnKo.js";import"./Logo-DmsMbJO2.js";import"./package-DupdcTls.js";import"./createLucideIcon-BK9ndVRo.js";import"./house-D2YIMOjc.js";import"./users-BmFRYmpR.js";import"./file-check-CHEU1kxb.js";import"./circle-question-mark-DtC5Y68d.js";import"./message-circle-CLbYCCGy.js";import"./BackgroundArt-Ct9Pe-Iv.js";import"./chevron-left-MymTQRW8.js";const Ae=async(s=1,n=20,l={})=>{try{const i={page:s,per_page:n},t=l||{};return t.search_global&&t.search_global.trim().length>0&&(i.search_global=t.search_global.trim()),t.status&&t.status!=="all"&&(i.status=t.status),t.business_type&&t.business_type!=="all"&&(i.business_type=t.business_type),t.sortBy&&(i.sortBy=t.sortBy),t.sortOrder&&(i.sortOrder=t.sortOrder),(await w.get("/admin/allsellers",{query:i})).data}catch(i){throw console.error("Error fetching sellers:",i),i}},Ke=async s=>{try{return await w.get(`/admin/sellers/${s}`)}catch(n){throw console.error(`Error fetching seller ${s}:`,n),n}},$e=fe,De=je,Ye=async()=>{try{return await w.get("/admin/allsellers",{query:{per_page:1}})}catch(s){throw console.error("Error fetching seller stats:",s),s}},Be=async()=>{try{return await w.get("/admin/business_types")}catch(s){return console.error("Error fetching business types:",s),{data:[]}}},Ue=async(s,n)=>{try{return(await w.post(`/admin/kyc/${s}/review`,n)).data}catch(l){throw console.error(`Error reviewing KYC ${s}:`,l),l}},j={getAllSellers:Ae,getSellerById:Ke,suspendSeller:$e,unsuspendSeller:De,getSellerStats:Ye,getBusinessTypes:Be,reviewKyc:Ue},Fe=({stats:s,sellers:n})=>{const i=(()=>{if(!n||n.length===0)return{total:s.total||0,verified:0,pending:0,rejected:0,suspended:0};const r=n.filter(m=>m.latest_kyc?.status==="approved").length,x=n.filter(m=>m.latest_kyc?.status==="pending"||!m.latest_kyc).length,o=n.filter(m=>m.latest_kyc?.status==="rejected").length,c=n.filter(m=>m.user?.user_status==="suspended"||m.user?.user_status==="banned").length;return{total:s.total||n.length,verified:r,pending:x,rejected:o,suspended:c}})(),t=[{title:"Total Sellers",value:i.total,icon:K,color:"bg-blue-500"},{title:"KYC Approved",value:i.verified,icon:f,color:"bg-green-500"},{title:"KYC Pending",value:i.pending,icon:G,color:"bg-yellow-500"},{title:"Suspended",value:i.suspended,icon:he,color:"bg-red-500"}];return e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:t.map((r,x)=>e.jsx("div",{className:"bg-white rounded-xl shadow-xs border border-gray-100 p-6 hover:shadow-md transition-shadow",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:r.title}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 mt-2",children:r.value.toLocaleString()})]}),e.jsx("div",{className:`p-3 rounded-lg ${r.color}`,children:e.jsx(r.icon,{className:"w-6 h-6 text-white"})})]})},x))})},Pe=({filters:s,onFilterChange:n,businessTypes:l=[]})=>{const[i,t]=d.useState(s.search_global||""),r=o=>{o.key==="Enter"&&(o.preventDefault(),n({...s,search_global:i.trim(),page:1}))},x=()=>{t(""),n({...s,search_global:"",page:1})};return e.jsx("div",{className:"bg-white rounded-xl shadow-xs border border-gray-100 p-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"md:col-span-1",children:[e.jsxs("div",{className:"relative",children:[e.jsx(Ne,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),e.jsx("input",{type:"text",placeholder:"Search sellers... (Press Enter)",value:i,onChange:o=>t(o.target.value),onKeyPress:r,className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:outline-hidden focus:ring-2 focus:ring-brand-500"}),i&&e.jsx("button",{onClick:x,className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600",children:"×"})]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Press Enter to search"})]}),e.jsx("div",{children:e.jsxs("select",{value:s.status||"",onChange:o=>n({...s,status:o.target.value,page:1}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-hidden focus:ring-2 focus:ring-brand-500",children:[e.jsx("option",{value:"all",children:"All KYC Status"}),e.jsx("option",{value:"pending",children:"Pending"}),e.jsx("option",{value:"approved",children:"Approved"}),e.jsx("option",{value:"rejected",children:"Rejected"})]})}),e.jsx("div",{children:e.jsxs("select",{value:s.business_type||"",onChange:o=>n({...s,business_type:o.target.value,page:1}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-hidden focus:ring-2 focus:ring-brand-500",children:[e.jsx("option",{value:"all",children:"All Business Types"}),l.map(o=>e.jsx("option",{value:o.name,children:o.name},o.id))]})})]})})},Ee=({seller:s,onViewDetails:n,onSuspendSeller:l,onUnsuspendSeller:i,onReviewKYC:t})=>{const r=()=>{if(s.latest_kyc){const u=s.latest_kyc.status;if(u==="approved")return e.jsxs("span",{className:"inline-flex items-center gap-1 px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800",children:[e.jsx(f,{className:"w-3 h-3"}),"Approved"]});if(u==="pending")return e.jsxs("span",{className:"inline-flex items-center gap-1 px-2.5 py-0.5 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800",children:[e.jsx(G,{className:"w-3 h-3"}),"Pending"]});if(u==="rejected")return e.jsxs("span",{className:"inline-flex items-center gap-1 px-2.5 py-0.5 rounded-full text-xs font-medium bg-red-100 text-red-800",children:[e.jsx(v,{className:"w-3 h-3"}),"Rejected"]})}return e.jsxs("span",{className:"inline-flex items-center gap-1 px-2.5 py-0.5 rounded-full text-xs font-medium bg-gray-100 text-gray-800",children:[e.jsx(O,{className:"w-3 h-3"}),"No KYC"]})},x=()=>{const u=s.user?.user_status||"active";return u==="suspended"||u==="banned"?e.jsxs("span",{className:"inline-flex items-center gap-1 px-2.5 py-0.5 rounded-full text-xs font-medium bg-red-100 text-red-800",children:[e.jsx(v,{className:"w-3 h-3"}),"Suspended"]}):e.jsxs("span",{className:"inline-flex items-center gap-1 px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800",children:[e.jsx(f,{className:"w-3 h-3"}),"Active"]})},o=s.user?.user_status==="suspended"||s.user?.user_status==="banned",c=s.user?.suspension_count||0,m=s.latest_kyc?.status==="pending";return e.jsxs("div",{className:"bg-white rounded-xl shadow-xs border border-gray-100 p-6 hover:shadow-md transition-shadow",children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-12 h-12 bg-brand-100 rounded-full flex items-center justify-center",children:s.user?.profile_photo?e.jsx("img",{src:s.user.profile_photo,alt:s.store_name,className:"w-12 h-12 rounded-full object-cover"}):e.jsx(K,{className:"w-6 h-6 text-brand-700"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:s.store_name||"N/A"}),e.jsx("p",{className:"text-sm text-gray-600",children:s.user?`${s.user.first_name} ${s.user.last_name}`:"N/A"})]})]}),e.jsxs("div",{className:"flex flex-col gap-1 items-end",children:[r(),x()]})]}),e.jsxs("div",{className:"space-y-2 mb-4",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[e.jsx(ve,{className:"w-4 h-4"}),e.jsx("span",{children:s.business_type?.name||"N/A"})]}),e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[e.jsx(W,{className:"w-4 h-4"}),e.jsx("span",{children:s.user?.email||"N/A"})]}),e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[e.jsx(H,{className:"w-4 h-4"}),e.jsx("span",{className:"truncate",children:s.city&&s.state?`${s.city}, ${s.state}`:s.address||"N/A"})]}),e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[e.jsx(we,{className:"w-4 h-4"}),e.jsx("span",{children:s.business_phone_number||s.user?.phone_number||"N/A"})]})]}),c>0&&e.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-3 mb-4",children:e.jsxs("p",{className:"text-xs text-red-700 flex items-center gap-2",children:[e.jsx(O,{className:"w-4 h-4"}),"Suspended ",c," ",c===1?"time":"times"]})}),s.bank_name&&e.jsxs("div",{className:"bg-gray-50 rounded-lg p-3 mb-4",children:[e.jsx("p",{className:"text-xs text-gray-500 mb-1",children:"Bank Details"}),e.jsx("p",{className:"text-sm font-medium text-gray-900",children:s.bank_name}),e.jsx("p",{className:"text-sm text-gray-600",children:s.bank_account_number}),e.jsx("p",{className:"text-xs text-gray-500",children:s.name_on_account})]}),e.jsxs("div",{className:"flex items-center gap-2 pt-4 border-t border-gray-200 mt-auto",children:[e.jsxs("button",{onClick:()=>n(s),className:"flex-1 flex items-center justify-center gap-2 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:[e.jsx(pe,{className:"w-4 h-4"}),"View Details"]}),m&&e.jsxs("button",{onClick:()=>{console.log("Seller being reviewed:",s),t(s)},className:"flex-1 flex items-center justify-center gap-2 px-3 py-2 bg-brand-600 text-white rounded-lg hover:bg-brand-700 transition-colors text-sm font-medium",title:"Review KYC Documents",children:[e.jsx(Se,{className:"w-4 h-4"}),"Review"]}),o?e.jsx("button",{onClick:()=>i(s),className:"flex items-center justify-center gap-2 px-4 py-2 bg-green-500 text-white rounded-lg hover:bg-green-600 transition-colors",title:"Unsuspend Seller",children:e.jsx(q,{className:"w-4 h-4"})}):e.jsx("button",{onClick:()=>l(s),className:"flex items-center justify-center gap-2 px-4 py-2 bg-red-500 text-white rounded-lg hover:bg-red-600 transition-colors",title:"Suspend Seller",children:e.jsx(X,{className:"w-4 h-4"})})]})]})},A=({isOpen:s,onClose:n,title:l,children:i,size:t="md"})=>{if(d.useEffect(()=>(s?document.body.style.overflow="hidden":document.body.style.overflow="unset",()=>{document.body.style.overflow="unset"}),[s]),!s)return null;const r={sm:"max-w-md",md:"max-w-lg",lg:"max-w-2xl",xl:"max-w-4xl"};return e.jsx("div",{className:"ml-0 lg:ml-64 fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm animate-in fade-in duration-200",children:e.jsxs("div",{className:`bg-white rounded-2xl shadow-xl w-full ${r[t]} overflow-hidden animate-in zoom-in-95 duration-200`,onClick:x=>x.stopPropagation(),children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-100",children:[e.jsx("h3",{className:"text-xl font-bold text-gray-900",children:l}),e.jsx("button",{onClick:n,className:"p-2 rounded-full hover:bg-gray-100 transition-colors text-gray-500",children:e.jsx(J,{className:"w-5 h-5"})})]}),e.jsx("div",{className:"p-6 overflow-y-auto max-h-[80vh]",children:i})]})})},Me=({isOpen:s,onClose:n,submission:l,onConfirm:i,isLoading:t})=>{const[r,x]=d.useState(null),[o,c]=d.useState("");if(!l)return null;const m=()=>{i(l.id,{status:r,admin_notes:o})};return e.jsx(A,{isOpen:s,onClose:n,title:"Review KYC Submission",size:"lg",children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg border border-gray-200",children:[e.jsxs("h4",{className:"text-sm font-semibold text-gray-700 mb-3 flex items-center gap-2",children:[e.jsx(Q,{className:"w-4 h-4"})," Submitted Documents"]}),e.jsxs("div",{className:"flex items-center justify-between bg-white p-3 rounded border border-gray-100 shadow-sm",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-900 capitalize",children:l.document_type}),e.jsxs("p",{className:"text-xs text-gray-500",children:["Submitted on ",new Date(l.submitted_at).toLocaleDateString()]})]}),e.jsxs("a",{href:l.document_file,target:"_blank",rel:"noopener noreferrer",className:"text-brand-600 hover:text-brand-700 text-sm font-medium flex items-center gap-1",children:["View File ",e.jsx(P,{className:"w-3 h-3"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("button",{onClick:()=>x("approved"),className:`flex flex-col items-center justify-center p-4 rounded-xl border-2 transition-all ${r==="approved"?"border-green-600 bg-green-50":"border-gray-100 bg-white hover:border-gray-200"}`,children:[e.jsx(f,{className:`w-8 h-8 mb-2 ${r==="approved"?"text-green-600":"text-gray-400"}`}),e.jsx("span",{className:`font-semibold ${r==="approved"?"text-green-800":"text-gray-600"}`,children:"Approve"})]}),e.jsxs("button",{onClick:()=>x("rejected"),className:`flex flex-col items-center justify-center p-4 rounded-xl border-2 transition-all ${r==="rejected"?"border-red-600 bg-red-50":"border-gray-100 bg-white hover:border-gray-200"}`,children:[e.jsx(v,{className:`w-8 h-8 mb-2 ${r==="rejected"?"text-red-600":"text-gray-400"}`}),e.jsx("span",{className:`font-semibold ${r==="rejected"?"text-red-800":"text-gray-600"}`,children:"Reject"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Admin Notes / Feedback"}),e.jsx("textarea",{className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-brand-500 min-h-[100px]",placeholder:"Explain your decision (required if rejecting)...",value:o,onChange:u=>c(u.target.value)})]}),e.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t",children:[e.jsx(N,{variant:"outline",onClick:n,children:"Cancel"}),e.jsx(N,{onClick:m,disabled:!r||t||r==="rejected"&&!o,className:r==="approved"?"bg-green-600 hover:bg-green-700":"bg-red-600 hover:bg-red-700",children:t?e.jsx(Z,{className:"w-4 h-4 animate-spin"}):"Confirm Decision"})]})]})})},Le=({seller:s,onClose:n,onSuspendSeller:l,onUnsuspendSeller:i})=>{if(!s)return null;const t=s.user,r=t?.user_status==="suspended"||t?.user_status==="banned",x=t?.suspension_count||0;return e.jsx("div",{className:"ml-0 lg:ml-64 fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 px-12 py-4",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-xl max-w-5xl w-full max-h-[90vh] overflow-y-auto",children:[e.jsx("div",{className:"p-6 border-b border-gray-200 sticky top-0 bg-white z-10",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-semibold text-gray-900",children:"Seller Details"}),e.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:["Seller ID: ",s.id," | User ID: ",t?.id]})]}),e.jsx("button",{onClick:n,className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:e.jsx(J,{className:"w-5 h-5 text-gray-500"})})]})}),e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsx("div",{className:`p-4 rounded-lg ${r?"bg-red-50 border border-red-200":"bg-green-50 border border-green-200"}`,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"flex items-center gap-3",children:r?e.jsxs(e.Fragment,{children:[e.jsx(v,{className:"w-6 h-6 text-red-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-red-900",children:"Account Suspended"}),e.jsx("p",{className:"text-sm text-red-700",children:"This seller's account is currently suspended"}),x>0&&e.jsxs("p",{className:"text-xs text-red-600 mt-1",children:["Suspended ",x," ",x===1?"time":"times"]})]})]}):e.jsxs(e.Fragment,{children:[e.jsx(f,{className:"w-6 h-6 text-green-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-green-900",children:"Account Active"}),e.jsx("p",{className:"text-sm text-green-700",children:"This seller's account is active"})]})]})}),e.jsx("div",{children:r?e.jsxs("button",{onClick:()=>i(s),className:"inline-flex items-center gap-2 px-4 py-2 bg-green-500 text-white rounded-lg hover:bg-green-600 transition-colors",children:[e.jsx(q,{className:"w-4 h-4"}),"Unsuspend Seller"]}):e.jsxs("button",{onClick:()=>l(s),className:"inline-flex items-center gap-2 px-4 py-2 bg-red-500 text-white rounded-lg hover:bg-red-600 transition-colors",children:[e.jsx(X,{className:"w-4 h-4"}),"Suspend Seller"]})})]})}),e.jsxs("div",{children:[e.jsxs("h4",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center gap-2",children:[e.jsx(W,{className:"w-5 h-5 text-brand-600"}),"User Information"]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-600",children:"Full Name"}),e.jsx("p",{className:"text-gray-900",children:t?`${t.first_name} ${t.last_name}`:"N/A"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-600",children:"Email"}),e.jsx("p",{className:"text-gray-900",children:t?.email||"N/A"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-600",children:"Phone Number"}),e.jsx("p",{className:"text-gray-900",children:t?.phone_number||"N/A"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-600",children:"Roles"}),e.jsx("div",{className:"flex gap-2 mt-1",children:t?.roles?.map((o,c)=>e.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:o},c))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-600",children:"Wallet Balance"}),e.jsxs("p",{className:"text-gray-900",children:["₦",parseFloat(t?.wallet||0).toLocaleString()]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-600",children:"Account Status"}),e.jsx("p",{className:"text-gray-900 capitalize",children:t?.user_status||"N/A"})]})]})]}),e.jsxs("div",{children:[e.jsxs("h4",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center gap-2",children:[e.jsx(K,{className:"w-5 h-5 text-brand-600"}),"Store Information"]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-600",children:"Store Name"}),e.jsx("p",{className:"text-gray-900",children:s.store_name||"N/A"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-600",children:"Business Type"}),e.jsx("p",{className:"text-gray-900",children:s.business_type?.name||"N/A"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-600",children:"Gender"}),e.jsx("p",{className:"text-gray-900 capitalize",children:s.gender||"N/A"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-600",children:"Business Phone"}),e.jsx("p",{className:"text-gray-900",children:s.business_phone_number||"N/A"})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{className:"text-sm font-medium text-gray-600",children:"Business Bio"}),e.jsx("p",{className:"text-gray-900",children:s.business_bio||"N/A"})]})]})]}),e.jsxs("div",{children:[e.jsxs("h4",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center gap-2",children:[e.jsx(H,{className:"w-5 h-5 text-brand-600"}),"Location"]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{className:"text-sm font-medium text-gray-600",children:"Address"}),e.jsx("p",{className:"text-gray-900",children:s.address||"N/A"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-600",children:"City"}),e.jsx("p",{className:"text-gray-900",children:s.city||"N/A"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-600",children:"State"}),e.jsx("p",{className:"text-gray-900",children:s.state||"N/A"})]})]})]}),e.jsxs("div",{children:[e.jsxs("h4",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center gap-2",children:[e.jsx(Ce,{className:"w-5 h-5 text-brand-600"}),"Bank Details"]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-600",children:"Bank Name"}),e.jsx("p",{className:"text-gray-900",children:s.bank_name||"N/A"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-600",children:"Account Number"}),e.jsx("p",{className:"text-gray-900",children:s.bank_account_number||"N/A"})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{className:"text-sm font-medium text-gray-600",children:"Account Name"}),e.jsx("p",{className:"text-gray-900",children:s.name_on_account||"N/A"})]})]})]}),e.jsx("div",{children:e.jsx(Me,{seller:s})})]})]})})},Re=({isOpen:s,onClose:n,submission:l,onConfirm:i,isLoading:t})=>{const[r,x]=d.useState(null),[o,c]=d.useState(""),[m,u]=d.useState(null);if(console.log(l),!l)return e.jsx(A,{isOpen:s,onClose:n,title:"Review KYC Submission",size:"lg",children:e.jsx("div",{className:"text-center py-8",children:e.jsx("p",{className:"text-gray-600",children:"No KYC submission found for this seller."})})});const b=()=>{i(l.id,{status:r,admin_notes:o})};return e.jsxs(e.Fragment,{children:[e.jsx(A,{isOpen:s,onClose:n,title:"Review KYC Submission",size:"lg",children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg border border-gray-200 space-y-4",children:[e.jsxs("div",{children:[e.jsxs("h4",{className:"text-sm font-semibold text-gray-700 mb-3 flex items-center gap-2",children:[e.jsx(Q,{className:"w-4 h-4"})," Submitted Document"]}),e.jsxs("div",{className:"flex items-center justify-between bg-white p-3 rounded border border-gray-100 shadow-sm",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-900 capitalize",children:l.document_type}),e.jsxs("p",{className:"text-xs text-gray-500",children:["Submitted on ",new Date(l.submitted_at).toLocaleDateString()]})]}),e.jsxs("button",{onClick:()=>u(l.document_file),className:"text-brand-600 hover:text-brand-700 text-sm font-medium flex items-center gap-1",children:["View File ",e.jsx(P,{className:"w-3 h-3"})]})]})]}),l.cover_image&&e.jsxs("div",{children:[e.jsxs("h4",{className:"text-sm font-semibold text-gray-700 mb-3 flex items-center gap-2",children:[e.jsx(ke,{className:"w-4 h-4"})," Cover Image"]}),e.jsxs("div",{className:"flex items-center justify-between bg-white p-3 rounded border border-gray-100 shadow-sm",children:[e.jsx("div",{children:e.jsx("p",{className:"text-sm font-medium text-gray-900",children:"Cover Image"})}),e.jsxs("button",{onClick:()=>u(l.cover_image),className:"text-brand-600 hover:text-brand-700 text-sm font-medium flex items-center gap-1",children:["View Image ",e.jsx(P,{className:"w-3 h-3"})]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("button",{onClick:()=>x("approved"),className:`flex flex-col items-center justify-center p-4 rounded-xl border-2 transition-all ${r==="approved"?"border-green-600 bg-green-50":"border-gray-100 bg-white hover:border-gray-200"}`,children:[e.jsx(f,{className:`w-8 h-8 mb-2 ${r==="approved"?"text-green-600":"text-gray-400"}`}),e.jsx("span",{className:`font-semibold ${r==="approved"?"text-green-800":"text-gray-600"}`,children:"Approve"})]}),e.jsxs("button",{onClick:()=>x("rejected"),className:`flex flex-col items-center justify-center p-4 rounded-xl border-2 transition-all ${r==="rejected"?"border-red-600 bg-red-50":"border-gray-100 bg-white hover:border-gray-200"}`,children:[e.jsx(v,{className:`w-8 h-8 mb-2 ${r==="rejected"?"text-red-600":"text-gray-400"}`}),e.jsx("span",{className:`font-semibold ${r==="rejected"?"text-red-800":"text-gray-600"}`,children:"Reject"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Admin Notes / Feedback"}),e.jsx("textarea",{className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-brand-500 min-h-[100px]",placeholder:"Explain your decision (required if rejecting)...",value:o,onChange:$=>c($.target.value)})]}),e.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t",children:[e.jsx(N,{variant:"outline",onClick:n,children:"Cancel"}),e.jsx(N,{onClick:b,disabled:!r||t||r==="rejected"&&!o,className:r==="approved"?"bg-green-600 hover:bg-green-700":"bg-red-600 hover:bg-red-700",children:t?e.jsx(Z,{className:"w-4 h-4 animate-spin"}):"Confirm Decision"})]})]})}),m&&e.jsxs(A,{isOpen:!!m,onClose:()=>u(null),title:"Document Preview",size:"xl",children:[e.jsx("div",{className:"h-[70vh] w-full bg-gray-100 rounded-lg overflow-hidden flex items-center justify-center",children:e.jsx("iframe",{src:m,className:`w-full h-full border-0 \r
                scrollbar-thin \r
                scrollbar-thumb-gray-300 \r
                scrollbar-track-transparent \r
                hover:scrollbar-thumb-gray-400\r
                [&::-webkit-scrollbar]:w-2\r
                [&::-webkit-scrollbar-track]:bg-transparent\r
                [&::-webkit-scrollbar-thumb]:bg-gray-300\r
                [&::-webkit-scrollbar-thumb]:rounded-full\r
                [&::-webkit-scrollbar-thumb]:border-2\r
                [&::-webkit-scrollbar-thumb]:border-transparent\r
                [&::-webkit-scrollbar-thumb]:bg-clip-content`,title:"Document Viewer"})}),e.jsx("div",{className:"mt-4 flex justify-end",children:e.jsx(N,{variant:"outline",onClick:()=>u(null),children:"Close Viewer"})})]})]})},ys=()=>{const[s,n]=d.useState([]),[l,i]=d.useState({}),[t,r]=d.useState([]),[x,o]=d.useState(!0),[c,m]=d.useState(null),[u,b]=d.useState(!1),[$,D]=d.useState(!1),[ee,Y]=d.useState(!1),[E,S]=d.useState(!1),[se,B]=d.useState(!1),[te,M]=d.useState(!1),[y,L]=d.useState(null),[re,U]=d.useState(!1),R=a=>{console.log("Seller data:",a),console.log("Latest KYC:",a.latest_kyc),m(a),B(!0)},[h,T]=d.useState({search_global:"",status:"all",business_type:"all",sortBy:"created_at",sortOrder:"desc"}),[ae,ne]=d.useState({current_page:1,last_page:1,from:0,to:0,total:0,per_page:20});d.useEffect(()=>{C()},[h]),d.useEffect(()=>{_(),le()},[]);const C=async()=>{try{o(!0);const a=await j.getAllSellers(h.page,20,{search_global:h.search_global,status:h.status,business_type:h.business_type}),g=a.data?.data||a.data||[],p=a.meta||{};n(g),ne({current_page:p.current_page||1,last_page:p.last_page||1,from:p.from||0,to:p.to||0,total:p.total||0,per_page:p.per_page||20})}catch(a){console.error("Failed to load sellers:",a),k("Failed to load sellers"),n([])}finally{o(!1)}},_=async()=>{try{const g=(await j.getSellerStats()).data?.meta||{};i({total:g.total||0})}catch(a){console.error("Failed to load stats:",a)}},le=async()=>{try{const a=await j.getBusinessTypes();r(a.data?.data||[])}catch(a){console.error("Failed to load business types:",a)}},ie=(a,g)=>{L({submissionId:a,reviewData:g}),U(!0)},oe=async()=>{if(!y)return;const{submissionId:a,reviewData:g}=y;M(!0);try{await j.reviewKyc(a,g),F(`KYC ${g.status} successfully`),U(!1),B(!1),C(),_()}catch(p){k(p.message||"Failed to process KYC review")}finally{M(!1),L(null)}},ce=a=>{T(a)},de=a=>{T({...h,page:a})},me=a=>{m(a),b(!0)},I=a=>{m(a),D(!0)},z=a=>{m(a),Y(!0)},xe=async a=>{if(c?.user?.id)try{S(!0),await j.suspendSeller(c.user.id,a),F("Seller suspended successfully"),D(!1),b(!1),C(),_()}catch(g){console.error("Failed to suspend seller:",g),k("Failed to suspend seller")}finally{S(!1)}},ue=async()=>{if(c?.user?.id)try{S(!0),await j.unsuspendSeller(c.user.id),F("Seller unsuspended successfully"),Y(!1),b(!1),C(),_()}catch(a){console.error("Failed to unsuspend seller:",a),k("Failed to unsuspend seller")}finally{S(!1)}},ge=a=>{if(!a)return null;const g=a.user;return{...g,name:`${g?.first_name||""} ${g?.last_name||""}`.trim()||a.store_name||"Unknown"}};return e.jsxs(be,{children:[e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Seller Management"}),e.jsx("p",{className:"text-gray-600 mt-2",children:"Manage and monitor all sellers on the platform"})]}),e.jsx(Fe,{stats:l,sellers:s}),e.jsx(Pe,{filters:h,onFilterChange:ce,businessTypes:t}),e.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:x?e.jsx("div",{className:"lg:col-span-2 flex items-center justify-center py-12",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-brand-500"})}):s.length===0?e.jsxs("div",{className:"lg:col-span-2 bg-white rounded-xl shadow-xs border border-gray-100 p-12 text-center",children:[e.jsx(K,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"No sellers found"}),(h.search_global||h.status!==""||h.business_type!=="")&&e.jsx("p",{className:"text-sm text-gray-500 mt-2",children:"Try adjusting your filters"})]}):s.map(a=>e.jsx(Ee,{seller:a,onViewDetails:me,onSuspendSeller:I,onUnsuspendSeller:z,onReviewKYC:R},a.id))}),s.length>0&&e.jsx(_e,{pagination:ae,onPageChange:de})]}),u&&c&&e.jsx(Le,{seller:c,onClose:()=>b(!1),onSuspendSeller:I,onUnsuspendSeller:z,onReviewKYC:R}),e.jsx(ye,{user:ge(c),isOpen:$,onClose:()=>D(!1),onConfirm:xe,isLoading:E}),e.jsx(V,{isOpen:ee,onClose:()=>Y(!1),onConfirm:ue,title:"Unsuspend Seller",message:`Are you sure you want to unsuspend ${c?.user?`${c.user.first_name} ${c.user.last_name}`:c?.store_name}? This will restore their access to the platform.`,confirmText:"Unsuspend",confirmButtonClass:"bg-green-600 hover:bg-green-700",isLoading:E}),e.jsx(Re,{isOpen:se,onClose:()=>B(!1),submission:c?.latest_kyc,onConfirm:ie,isLoading:!1}),e.jsx(V,{isOpen:re,onClose:()=>U(!1),onConfirm:oe,title:`${y?.reviewData?.status==="approved"?"Approve":"Reject"} KYC Submission`,message:`Are you sure you want to ${y?.reviewData?.status} this KYC submission? This action cannot be undone.`,confirmText:"Confirm Decision",confirmButtonClass:y?.reviewData?.status==="approved"?"bg-green-600 hover:bg-green-700":"bg-red-600 hover:bg-red-700",isLoading:te})]})};export{ys as default};
