import{s as c}from"./index-BOLkSH9S.js";const s="https://agrimeetbackend.agrimeetconnect.com/api/v1",a=()=>({"Content-Type":"application/json",Authorization:`Bearer ${c.getAccessToken()}`,Accept:"application/json"}),o=async e=>{if(!e.ok){if(e.status===401)throw c.clearAll(),new Error("Session expired. Please login again.");const r=await e.json().catch(()=>({}));throw new Error(r.message||`HTTP error! status: ${e.status}`)}return await e.json()},l=async(e=1)=>{try{const r=new URLSearchParams({page:e.toString()}),t=await fetch(`${s}/seller/products?${r.toString()}`,{method:"GET",headers:a()});return await o(t)}catch(r){throw console.error("Failed to fetch products:",r),r}},d=async e=>{try{const r=await fetch(`${s}/seller/products/${e}`,{method:"GET",headers:a()});return await o(r)}catch(r){throw console.error("Error fetching product:",r),r}},g=async e=>{try{let r,t=a();e instanceof FormData?(r=e,delete t["Content-Type"]):r=JSON.stringify(e);const n=await fetch(`${s}/seller/products`,{method:"POST",headers:t,body:r});return await o(n)}catch(r){throw console.error("Error creating product:",r),r}},w=async(e,r)=>{try{let t,n=a();r instanceof FormData?(t=r,t.append("_method","PUT"),delete n["Content-Type"]):t=JSON.stringify(r);const i=await fetch(`${s}/seller/products/${e}`,{method:r instanceof FormData?"POST":"PUT",headers:n,body:t});return await o(i)}catch(t){throw console.error("Error updating product:",t),t}},y=async e=>{try{const r=await fetch(`${s}/seller/products/${e}`,{method:"DELETE",headers:a()});return await o(r)}catch(r){throw console.error("Error deleting product:",r),r}},u=async()=>{try{const e=await fetch(`${s}/allcategories`,{method:"GET",headers:a()});return await o(e)}catch(e){throw console.error("Error fetching categories:",e),e}},m=async()=>{try{const e=await fetch(`${s}/seller/products/allUnits`,{method:"GET",headers:a()});return await o(e)}catch(e){throw console.error("Error fetching units:",e),e}},f=async(e,r)=>{try{const t=await fetch(`${s}/seller/products/${e}/variants`,{method:"POST",headers:a(),body:JSON.stringify(r)});return await o(t)}catch(t){throw console.error("Error creating variant:",t),t}},p=async e=>{try{const r=await fetch(`${s}/seller/products/${e}/variants`,{method:"GET",headers:a()});return await o(r)}catch(r){throw console.error("Error fetching variants:",r),r}},E=async(e,r)=>{try{const t=await fetch(`${s}/seller/products/${e}/variants/${r}`,{method:"GET",headers:a()});return await o(t)}catch(t){throw console.error("Error fetching variant:",t),t}},$=async(e,r,t)=>{try{const n=await fetch(`${s}/seller/products/${e}/variants/${r}`,{method:"PUT",headers:a(),body:JSON.stringify(t)});return await o(n)}catch(n){throw console.error("Error updating variant:",n),n}},T=async(e,r)=>{try{const t=await fetch(`${s}/seller/products/${e}/variants/${r}`,{method:"DELETE",headers:a()});return await o(t)}catch(t){throw console.error("Error deleting variant:",t),t}},b=async()=>{try{const e=await fetch(`${s}/seller/product-attributes`,{method:"GET",headers:a()});return await o(e)}catch(e){throw console.error("Error fetching product attributes:",e),e}},v=e=>({id:e.id,name:e.name,description:e.description,originalPrice:parseFloat(e.base_price),price:parseFloat(e.discount_price||e.base_price),discount:e.discount_price>0?e.discount_price:"",stock:e.stock_quantity,category:e.category||"Unknown",categoryId:e.category_id,status:e.status,is_published:e.status==="active",slug:e.slug,image:e?.thumbnail,images:Array.isArray(e.images)?e.images.filter(r=>r&&r.includes("http")):[],weight:e.weight,unit:e.unit?.name||"Unit",unitSymbol:e.unit?.symbol||"",seller:e.seller.name,variants:e.variants||[],createdAt:e.created_at,updatedAt:e.updated_at});export{u as a,m as b,g as c,y as d,b as e,f,l as g,d as h,p as i,T as j,E as k,$ as l,v as t,w as u};
