import{r as o,D,j as s,k as Oe,d as re,e as ke}from"./index-BrJE6Ruv.js";import{D as Te,e as De,f as ve,a as Ie,h as Le}from"./DashboardLayout-CbQpQ2VH.js";import{C as Re}from"./clock-B8URdOLJ.js";import{T as se}from"./trending-up-D4vS7VFI.js";import{C as Me}from"./calendar-BwB5JQaw.js";import{d as w,p as V,e as Ke,i as Be,s as I,f as Fe,g as $e,h as xe,j as We,k as Ge,l as C,m as Ve,n as ye,o as ze,q as Ue,r as qe,t as Ye,u as Xe,v as Je,w as be,x as Ze,y as q,z as je,A as He,S as Qe,G as ea,D as we,E as Y,F as aa,H as X,I as R,J as ta,K as J,M as ra,N as sa,O as na,P as ne,Q as oe,U as G,V as z,W as oa,Z as ia,_ as la,$ as ca,a0 as da,a1 as ua,a2 as ma,a3 as pa,a4 as ga,a5 as fa,a6 as ha,a7 as F,a8 as ie,a9 as va,aa as xa,ab as ya,ac as ba,ad as le,ae as ja,af as wa,ag as Na,ah as Pa,ai as Aa,a as Ne,C as Sa,R as ce,b as Ca,X as Ea,Y as de,T as ue,L as me,B as _a,c as Oa}from"./CartesianChart-D0B7JeeO.js";import{C as ka}from"./circle-check-big-CzdoeDj5.js";import{C as Ta}from"./star-D0UWI2kz.js";import{B as Da}from"./Button-NP5qGopO.js";import{S as Ia}from"./save-CUv4tCeF.js";import{U as La}from"./users-Btkg261Z.js";import"./Logo-yv9J0Zw_.js";import"./x-89xIXrzd.js";import"./createLucideIcon-DTbf89oH.js";import"./house-B5NBqIRK.js";import"./file-check-BlT-5aXD.js";import"./circle-question-mark-DdVU0ul4.js";import"./message-circle-CfRGLCSX.js";import"./file-text-DhmWdPlz.js";import"./info-D8IKXDkN.js";import"./user-BoLJHLaW.js";import"./BackgroundArt-Cv4ql44m.js";var Pe=e=>e.graphicalItems.polarItems,Ra=w([V,Ke],Be),Z=w([Pe,I,Ra],Fe),Ma=w([Z],$e),H=w([Ma,xe],We),Ka=w([H,I,Z],Ge),Ba=w([H,I,Z],(e,a,r)=>r.length>0?e.flatMap(t=>r.flatMap(n=>{var i,l=C(t,(i=a.dataKey)!==null&&i!==void 0?i:n.dataKey);return{value:l,errorDomain:[]}})).filter(Boolean):a?.dataKey!=null?e.map(t=>({value:C(t,a.dataKey),errorDomain:[]})):e.map(t=>({value:t,errorDomain:[]}))),pe=()=>{},Fa=w([I,Ve,pe,Ba,pe,ye,V],ze),Ae=w([I,ye,H,Ka,Ue,V,Fa],qe),$a=w([Ae,I,Ye],Xe);w([I,Ae,$a,V],Je);function ge(e,a){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);a&&(t=t.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),r.push.apply(r,t)}return r}function fe(e){for(var a=1;a<arguments.length;a++){var r=arguments[a]!=null?arguments[a]:{};a%2?ge(Object(r),!0).forEach(function(t){Wa(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ge(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function Wa(e,a,r){return(a=Ga(a))in e?Object.defineProperty(e,a,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[a]=r,e}function Ga(e){var a=Va(e,"string");return typeof a=="symbol"?a:a+""}function Va(e,a){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var t=r.call(e,a);if(typeof t!="object")return t;throw new TypeError("@@toPrimitive must return a primitive value.")}return(a==="string"?String:Number)(e)}var za=(e,a)=>a,Q=w([Pe,za],(e,a)=>e.filter(r=>r.type==="pie").find(r=>r.id===a)),Ua=[],ee=(e,a,r)=>r?.length===0?Ua:r,Se=w([xe,Q,ee],(e,a,r)=>{var{chartData:t}=e;if(a!=null){var n;if(a?.data!=null&&a.data.length>0?n=a.data:n=t,(!n||!n.length)&&r!=null&&(n=r.map(i=>fe(fe({},a.presentationProps),i.props))),n!=null)return n}}),qa=w([Se,Q,ee],(e,a,r)=>{if(!(e==null||a==null))return e.map((t,n)=>{var i,l=C(t,a.nameKey,a.name),u;return r!=null&&(i=r[n])!==null&&i!==void 0&&(i=i.props)!==null&&i!==void 0&&i.fill?u=r[n].props.fill:typeof t=="object"&&t!=null&&"fill"in t?u=t.fill:u=a.fill,{value:be(l,a.dataKey),color:u,payload:t,type:a.legendType}})}),Ya=w([Se,Q,ee,Ze],(e,a,r,t)=>{if(!(a==null||e==null))return gt({offset:t,pieSettings:a,displayedData:e,cells:r})}),Xa=["onMouseEnter","onClick","onMouseLeave"],Ja=["id"],Za=["id"];function ae(e,a){if(e==null)return{};var r,t,n=Ha(e,a);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(t=0;t<i.length;t++)r=i[t],a.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function Ha(e,a){if(e==null)return{};var r={};for(var t in e)if({}.hasOwnProperty.call(e,t)){if(a.indexOf(t)!==-1)continue;r[t]=e[t]}return r}function he(e,a){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);a&&(t=t.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),r.push.apply(r,t)}return r}function g(e){for(var a=1;a<arguments.length;a++){var r=arguments[a]!=null?arguments[a]:{};a%2?he(Object(r),!0).forEach(function(t){Qa(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):he(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function Qa(e,a,r){return(a=et(a))in e?Object.defineProperty(e,a,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[a]=r,e}function et(e){var a=at(e,"string");return typeof a=="symbol"?a:a+""}function at(e,a){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var t=r.call(e,a);if(typeof t!="object")return t;throw new TypeError("@@toPrimitive must return a primitive value.")}return(a==="string"?String:Number)(e)}function E(){return E=Object.assign?Object.assign.bind():function(e){for(var a=1;a<arguments.length;a++){var r=arguments[a];for(var t in r)({}).hasOwnProperty.call(r,t)&&(e[t]=r[t])}return e},E.apply(null,arguments)}function tt(e){var a=o.useMemo(()=>we(e.children,J),[e.children]),r=Y(t=>qa(t,e.id,a));return r==null?null:o.createElement(aa,{legendPayload:r})}function rt(e){var{dataKey:a,nameKey:r,sectors:t,stroke:n,strokeWidth:i,fill:l,name:u,hide:p,tooltipType:m}=e;return{dataDefinedOnItem:t.map(f=>f.tooltipPayload),positions:t.map(f=>f.tooltipPosition),settings:{stroke:n,strokeWidth:i,fill:l,dataKey:a,nameKey:r,name:be(u,a),hide:p,type:m,color:l,unit:""}}}var st=(e,a)=>e>a?"start":e<a?"end":"middle",nt=(e,a,r)=>typeof a=="function"?F(a(e),r,r*.8):F(a,r,r*.8),ot=(e,a,r)=>{var{top:t,left:n,width:i,height:l}=a,u=ha(i,l),p=n+F(e.cx,i,i/2),m=t+F(e.cy,l,l/2),f=F(e.innerRadius,u,0),b=nt(r,e.outerRadius,u),c=e.maxRadius||Math.sqrt(i*i+l*l)/2;return{cx:p,cy:m,innerRadius:f,outerRadius:b,maxRadius:c}},it=(e,a)=>{var r=G(a-e),t=Math.min(Math.abs(a-e),360);return r*t};function lt(e){return e&&typeof e=="object"&&"className"in e&&typeof e.className=="string"?e.className:""}var ct=(e,a)=>{if(o.isValidElement(e))return o.cloneElement(e,a);if(typeof e=="function")return e(a);var r=X("recharts-pie-label-line",typeof e!="boolean"?e.className:"");return o.createElement(va,E({},a,{type:"linear",className:r}))},dt=(e,a,r)=>{if(o.isValidElement(e))return o.cloneElement(e,a);var t=r;if(typeof e=="function"&&(t=e(a),o.isValidElement(t)))return t;var n=X("recharts-pie-label-text",lt(e));return o.createElement(xa,E({},a,{alignmentBaseline:"middle",className:n}),t)};function ut(e){var{sectors:a,props:r,showLabels:t}=e,{label:n,labelLine:i,dataKey:l}=r;if(!t||!n||!a)return null;var u=je(r),p=ie(n,!1),m=ie(i,!1),f=typeof n=="object"&&"offsetRadius"in n&&typeof n.offsetRadius=="number"&&n.offsetRadius||20,b=a.map((c,d)=>{var h=(c.startAngle+c.endAngle)/2,v=z(c.cx,c.cy,c.outerRadius+f,h),P=g(g(g(g({},u),c),{},{stroke:"none"},p),{},{index:d,textAnchor:st(v.x,c.cx)},v),x=g(g(g(g({},u),c),{},{fill:"none",stroke:c.fill},m),{},{index:d,points:[z(c.cx,c.cy,c.outerRadius,h),v],key:"line"});return o.createElement(R,{key:"label-".concat(c.startAngle,"-").concat(c.endAngle,"-").concat(c.midAngle,"-").concat(d)},i&&ct(i,x),dt(n,P,C(c,l)))});return o.createElement(R,{className:"recharts-pie-labels"},b)}function mt(e){var{sectors:a,props:r,showLabels:t}=e,{label:n}=r;return typeof n=="object"&&n!=null&&"position"in n?o.createElement(fa,{label:n}):o.createElement(ut,{sectors:a,props:r,showLabels:t})}function pt(e){var{sectors:a,activeShape:r,inactiveShape:t,allOtherPieProps:n}=e,i=Y(ia),{onMouseEnter:l,onClick:u,onMouseLeave:p}=n,m=ae(n,Xa),f=la(l,n.dataKey),b=ca(p),c=da(u,n.dataKey);return a==null||a.length===0?null:o.createElement(o.Fragment,null,a.map((d,h)=>{if(d?.startAngle===0&&d?.endAngle===0&&a.length!==1)return null;var v=r&&String(h)===i,P=i?t:null,x=v?r:P,y=g(g({},d),{},{stroke:d.stroke,tabIndex:-1,[ma]:h,[ua]:n.dataKey});return o.createElement(R,E({tabIndex:-1,className:"recharts-pie-sector"},pa(m,d,h),{onMouseEnter:f(d,h),onMouseLeave:b(d,h),onClick:c(d,h),key:"sector-".concat(d?.startAngle,"-").concat(d?.endAngle,"-").concat(d.midAngle,"-").concat(h)}),o.createElement(ga,E({option:x,isActive:v,shapeType:"sector"},y)))}))}function gt(e){var a,{pieSettings:r,displayedData:t,cells:n,offset:i}=e,{cornerRadius:l,startAngle:u,endAngle:p,dataKey:m,nameKey:f,tooltipType:b}=r,c=Math.abs(r.minAngle),d=it(u,p),h=Math.abs(d),v=t.length<=1?0:(a=r.paddingAngle)!==null&&a!==void 0?a:0,P=t.filter(j=>C(j,m,0)!==0).length,x=(h>=360?P:P-1)*v,y=h-P*c-x,_=t.reduce((j,S)=>{var N=C(S,m,0);return j+(oe(N)?N:0)},0),L;if(_>0){var A;L=t.map((j,S)=>{var N=C(j,m,0),O=C(j,f,S),k=ot(r,i,j),M=(oe(N)?N:0)/_,T,K=g(g({},j),n&&n[S]&&n[S].props);S?T=A.endAngle+G(d)*v*(N!==0?1:0):T=u;var W=T+G(d)*((N!==0?c:0)+M*y),B=(T+W)/2,te=(k.innerRadius+k.outerRadius)/2,Ee=[{name:O,value:N,payload:K,dataKey:m,type:b}],_e=z(k.cx,k.cy,te,B);return A=g(g(g(g({},r.presentationProps),{},{percent:M,cornerRadius:l,name:O,tooltipPayload:Ee,midAngle:B,middleRadius:te,tooltipPosition:_e},K),k),{},{value:N,startAngle:T,endAngle:W,payload:K,paddingAngle:G(d)*v}),A})}return L}function ft(e){var{showLabels:a,sectors:r,children:t}=e,n=o.useMemo(()=>!a||!r?[]:r.map(i=>({value:i.value,payload:i.payload,clockWise:!1,parentViewBox:void 0,viewBox:{cx:i.cx,cy:i.cy,innerRadius:i.innerRadius,outerRadius:i.outerRadius,startAngle:i.startAngle,endAngle:i.endAngle,clockWise:!1},fill:i.fill})),[r,a]);return o.createElement(oa,{value:a?n:void 0},t)}function ht(e){var{props:a,previousSectorsRef:r}=e,{sectors:t,isAnimationActive:n,animationBegin:i,animationDuration:l,animationEasing:u,activeShape:p,inactiveShape:m,onAnimationStart:f,onAnimationEnd:b}=a,c=ra(a,"recharts-pie-"),d=r.current,[h,v]=o.useState(!1),P=o.useCallback(()=>{typeof b=="function"&&b(),v(!1)},[b]),x=o.useCallback(()=>{typeof f=="function"&&f(),v(!0)},[f]);return o.createElement(ft,{showLabels:!h,sectors:t},o.createElement(sa,{animationId:c,begin:i,duration:l,isActive:n,easing:u,onAnimationStart:x,onAnimationEnd:P,key:c},y=>{var _=[],L=t&&t[0],A=L?.startAngle;return t?.forEach((j,S)=>{var N=d&&d[S],O=S>0?na(j,"paddingAngle",0):0;if(N){var k=ne(N.endAngle-N.startAngle,j.endAngle-j.startAngle,y),M=g(g({},j),{},{startAngle:A+O,endAngle:A+k+O});_.push(M),A=M.endAngle}else{var{endAngle:T,startAngle:K}=j,W=ne(0,T-K,y),B=g(g({},j),{},{startAngle:A+O,endAngle:A+W+O});_.push(B),A=B.endAngle}}),r.current=_,o.createElement(R,null,o.createElement(pt,{sectors:_,activeShape:p,inactiveShape:m,allOtherPieProps:a}))}),o.createElement(mt,{showLabels:!h,sectors:t,props:a}),a.children)}var vt={animationBegin:400,animationDuration:1500,animationEasing:"ease",cx:"50%",cy:"50%",dataKey:"value",endAngle:360,fill:"#808080",hide:!1,innerRadius:0,isAnimationActive:!ea.isSsr,labelLine:!0,legendType:"rect",minAngle:0,nameKey:"name",outerRadius:"80%",paddingAngle:0,rootTabIndex:0,startAngle:0,stroke:"#fff"};function xt(e){var{id:a}=e,r=ae(e,Ja),{hide:t,className:n,rootTabIndex:i}=e,l=o.useMemo(()=>we(e.children,J),[e.children]),u=Y(f=>Ya(f,a,l)),p=o.useRef(null),m=X("recharts-pie",n);return t||u==null?(p.current=null,o.createElement(R,{tabIndex:i,className:m})):o.createElement(o.Fragment,null,o.createElement(ta,{fn:rt,args:g(g({},e),{},{sectors:u})}),o.createElement(R,{tabIndex:i,className:m},o.createElement(ht,{props:g(g({},r),{},{sectors:u}),previousSectorsRef:p})))}function Ce(e){var a=q(e,vt),{id:r}=a,t=ae(a,Za),n=je(t);return o.createElement(He,{id:r,type:"pie"},i=>o.createElement(o.Fragment,null,o.createElement(Qe,{type:"pie",id:i,data:t.data,dataKey:t.dataKey,hide:t.hide,angleAxisId:0,radiusAxisId:0,name:t.name,nameKey:t.nameKey,tooltipType:t.tooltipType,legendType:t.legendType,fill:t.fill,cx:t.cx,cy:t.cy,startAngle:t.startAngle,endAngle:t.endAngle,paddingAngle:t.paddingAngle,minAngle:t.minAngle,innerRadius:t.innerRadius,outerRadius:t.outerRadius,cornerRadius:t.cornerRadius,presentationProps:n,maxRadius:a.maxRadius}),o.createElement(tt,E({},t,{id:i})),o.createElement(xt,E({},t,{id:i}))))}Ce.displayName="Pie";function yt(e){var a=ya();return o.useEffect(()=>{a(ba(e))},[a,e]),null}var bt=["width","height","layout"];function U(){return U=Object.assign?Object.assign.bind():function(e){for(var a=1;a<arguments.length;a++){var r=arguments[a];for(var t in r)({}).hasOwnProperty.call(r,t)&&(e[t]=r[t])}return e},U.apply(null,arguments)}function jt(e,a){if(e==null)return{};var r,t,n=wt(e,a);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(t=0;t<i.length;t++)r=i[t],a.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function wt(e,a){if(e==null)return{};var r={};for(var t in e)if({}.hasOwnProperty.call(e,t)){if(a.indexOf(t)!==-1)continue;r[t]=e[t]}return r}var Nt={top:5,right:5,bottom:5,left:5},Pt={accessibilityLayer:!0,stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:Nt,reverseStackOrder:!1,syncMethod:"index",layout:"radial"},At=o.forwardRef(function(a,r){var t,n=q(a.categoricalChartProps,Pt),{width:i,height:l,layout:u}=n,p=jt(n,bt);if(!le(i)||!le(l))return null;var{chartName:m,defaultTooltipEventType:f,validateTooltipEventTypes:b,tooltipPayloadSearcher:c}=a,d={chartName:m,defaultTooltipEventType:f,validateTooltipEventTypes:b,tooltipPayloadSearcher:c,eventEmitter:void 0};return o.createElement(ja,{preloadedState:{options:d},reduxStoreName:(t=n.id)!==null&&t!==void 0?t:m},o.createElement(wa,{chartData:n.data}),o.createElement(Na,{width:i,height:l,layout:u,margin:n.margin}),o.createElement(Pa,{accessibilityLayer:n.accessibilityLayer,barCategoryGap:n.barCategoryGap,maxBarSize:n.maxBarSize,stackOffset:n.stackOffset,barGap:n.barGap,barSize:n.barSize,syncId:n.syncId,syncMethod:n.syncMethod,className:n.className}),o.createElement(yt,{cx:n.cx,cy:n.cy,startAngle:n.startAngle,endAngle:n.endAngle,innerRadius:n.innerRadius,outerRadius:n.outerRadius}),o.createElement(Aa,U({width:i,height:l},p,{ref:r})))}),St=["item"],Ct={layout:"centric",startAngle:0,endAngle:360,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"},Et=o.forwardRef((e,a)=>{var r=q(e,Ct);return o.createElement(At,{chartName:"PieChart",defaultTooltipEventType:"item",validateTooltipEventTypes:St,tooltipPayloadSearcher:Ne,categoricalChartProps:r,ref:a})}),_t=["axis"],Ot=o.forwardRef((e,a)=>o.createElement(Sa,{chartName:"ComposedChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:_t,tooltipPayloadSearcher:Ne,categoricalChartProps:e,ref:a}));const kt=async(e="month")=>{try{return await D.get("/admin/commissions/overview",{query:{period:e}})}catch(a){throw console.error("Error fetching commission overview:",a),a}},Tt=async(e=30)=>{try{return await D.get("/admin/commissions/daily-breakdown",{query:{days:e}})}catch(a){throw console.error("Error fetching daily breakdown:",a),a}},Dt=async(e={})=>{try{return await D.get("/admin/commissions/by-seller",{query:{period:e.period||"month",payout_status:e.payout_status}})}catch(a){throw console.error("Error fetching seller commissions:",a),a}},It=async()=>{try{return await D.get("/admin/commissions/pending-payouts")}catch(e){throw console.error("Error fetching pending payouts:",e),e}},Lt=async e=>{try{return await D.post("/admin/commissions/mark-as-paid",e)}catch(a){throw console.error("Error marking commissions as paid:",a),a}},Rt=async()=>{try{return await D.get("/admin/commissions/settings")}catch(e){throw console.error("Error fetching commission settings:",e),e}},Mt=async e=>{try{return await D.put("/admin/commissions/settings",e)}catch(a){throw console.error("Error updating commission settings:",a),a}},$={getCommissionOverview:kt,getDailyBreakdown:Tt,getCommissionBySeller:Dt,getPendingPayouts:It,markAsPaid:Lt,getCommissionSettings:Rt,updateCommissionSettings:Mt},Kt=()=>{const[e,a]=o.useState([]),[r,t]=o.useState({period:"month",payout_status:""}),[n,i]=o.useState(!0);return o.useEffect(()=>{(async()=>{i(!0);try{const u=await $.getCommissionBySeller(r);a(u.data.data||u.data||[])}catch(u){console.error("Failed to load seller data:",u)}finally{i(!1)}})()},[r]),s.jsxs("div",{className:"space-y-4",children:[s.jsx("div",{className:"bg-white p-4 rounded-xl border border-gray-100 grid grid-cols-1 md:grid-cols-3 gap-4",children:s.jsxs("select",{value:r.period,onChange:l=>t({...r,period:l.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-hidden focus:ring-2 focus:ring-brand-500",children:[s.jsx("option",{value:"today",children:"Today"}),s.jsx("option",{value:"week",children:"This Week"}),s.jsx("option",{value:"month",children:"This Month"}),s.jsx("option",{value:"year",children:"This Year"}),s.jsx("option",{value:"all",children:"All Time"})]})}),s.jsx("div",{className:"bg-white rounded-xl shadow-xs border border-gray-100 overflow-hidden",children:s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"w-full text-left",children:[s.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-6 py-3 text-xs font-medium text-gray-500 uppercase",children:"Seller"}),s.jsx("th",{className:"px-6 py-3 text-xs font-medium text-gray-500 uppercase",children:"Total Sales"}),s.jsx("th",{className:"px-6 py-3 text-xs font-medium text-gray-500 uppercase",children:"Commission"}),s.jsx("th",{className:"px-6 py-3 text-xs font-medium text-gray-500 uppercase",children:"Seller Earnings"}),s.jsx("th",{className:"px-6 py-3 text-xs font-medium text-gray-500 uppercase",children:"Orders"})]})}),s.jsx("tbody",{className:"divide-y divide-gray-200",children:n?s.jsx("tr",{children:s.jsx("td",{colSpan:"5",className:"p-8 text-center",children:"Loading..."})}):e.length===0?s.jsx("tr",{children:s.jsx("td",{colSpan:"5",className:"p-8 text-center text-gray-500",children:"No seller records found"})}):e.map((l,u)=>s.jsxs("tr",{className:"hover:bg-gray-50",children:[s.jsx("td",{className:"px-6 py-4",children:s.jsx("div",{className:"font-medium text-gray-900",children:l.seller_name})}),s.jsxs("td",{className:"px-6 py-4 text-gray-900",children:["$",l.total_sales]}),s.jsxs("td",{className:"px-6 py-4 font-medium text-green-600",children:["$",l.total_commission]}),s.jsxs("td",{className:"px-6 py-4 font-medium text-yellow-500",children:["$",l.total_seller_earnings]}),s.jsx("td",{className:"px-6 py-4 text-gray-600",children:l.order_count})]},u))})]})})})]})},Bt=()=>{const[e,a]=o.useState({total_commission_earned:0,total_seller_payouts:0,pending_payouts:0,paid_payouts:0,total_orders_with_commission:0,average_commission_per_order:0}),[r,t]=o.useState([]),[n,i]=o.useState("month"),[l,u]=o.useState(!0);o.useEffect(()=>{(async()=>{u(!0);try{const d=await $.getCommissionOverview(n);console.log(d.data);const h=await $.getDailyBreakdown(30);a(Object.fromEntries(Object.entries(d.data).map(([x,y])=>[x,typeof y=="number"?Number(y):y]))),console.log(Object.fromEntries(Object.entries(d.data).map(([x,y])=>[x,typeof y=="number"?Number(y):y])));const P=(h.data.data||h.data||[]).map(x=>({date:x.date,total_commission:parseFloat(x.total_commission||0),total_seller_payout:parseFloat(x.total_seller_payout||0),order_count:parseInt(x.order_count||0,10)}));P.sort((x,y)=>new Date(x.date)-new Date(y.date)),t(P)}catch(d){console.error("Failed to load overview data:",d)}finally{u(!1)}})()},[n]);const p=c=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:2}).format(c||0),m=[{name:"Paid",value:parseFloat(e.paid_payouts||0),color:"#3B82F6"},{name:"Pending",value:parseFloat(e.pending_payouts||0),color:"#EAB308"}].filter(c=>c.value>0),f=[{label:"Total Commission",value:p(e.total_commission_earned),icon:Te,color:"bg-green-500"},{label:"Pending Payouts",value:p(e.pending_payouts),icon:Re,color:"bg-yellow-500"},{label:"Orders",value:e.total_orders_with_commission||0,icon:De,color:"bg-purple-500"},{label:"Avg. Commission",value:p(e.average_commission_per_order),icon:se,color:"bg-blue-500"}];if(l)return s.jsx(Oe,{});const b=({active:c,payload:d,label:h})=>c&&d&&d.length?s.jsxs("div",{className:"bg-white p-4 border border-gray-100 shadow-lg rounded-xl",children:[s.jsx("p",{className:"font-semibold text-gray-900 mb-2",children:new Date(h).toLocaleDateString()}),s.jsxs("div",{className:"space-y-1 text-sm",children:[s.jsxs("p",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"w-2 h-2 rounded-full bg-green-500"}),s.jsx("span",{className:"text-gray-600",children:"Commission:"}),s.jsx("span",{className:"font-medium text-gray-900",children:p(d.find(v=>v.dataKey==="total_commission")?.value)})]}),s.jsxs("p",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"w-2 h-2 rounded-full bg-blue-500"}),s.jsx("span",{className:"text-gray-600",children:"Seller Payout:"}),s.jsx("span",{className:"font-medium text-gray-900",children:p(d[0]?.payload?.total_seller_payout)})]}),s.jsxs("p",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"w-2 h-2 rounded-full bg-orange-500"}),s.jsx("span",{className:"text-gray-600",children:"Orders:"}),s.jsx("span",{className:"font-medium text-gray-900",children:d.find(v=>v.dataKey==="order_count")?.value})]})]})]}):null;return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[s.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Performance Overview"}),s.jsxs("div",{className:"flex items-center gap-2 bg-white border border-gray-200 rounded-lg p-1 shadow-xs",children:[s.jsx(Me,{className:"w-4 h-4 text-gray-500 ml-2"}),s.jsxs("select",{value:n,onChange:c=>i(c.target.value),className:"border-none text-sm text-gray-700 focus:ring-0 cursor-pointer py-1 pr-8 bg-transparent",children:[s.jsx("option",{value:"today",children:"Today"}),s.jsx("option",{value:"week",children:"This Week"}),s.jsx("option",{value:"month",children:"This Month"}),s.jsx("option",{value:"year",children:"This Year"}),s.jsx("option",{value:"all",children:"All Time"})]})]})]}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:f.map((c,d)=>s.jsxs("div",{className:"bg-white rounded-xl shadow-xs border border-gray-100 p-6",children:[s.jsx("div",{className:`p-3 rounded-lg ${c.color} w-[25%]`,children:s.jsx(c.icon,{className:"w-6 h-6 text-white"})}),s.jsx("div",{className:"flex items-center justify-between mt-2",children:s.jsxs("div",{children:[s.jsx("p",{className:"text-xs font-medium text-gray-600",children:c.label}),s.jsx("p",{className:"text-xl font-bold text-gray-900 mt-1",children:c.value})]})})]},d))}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[s.jsxs("div",{className:"lg:col-span-2 bg-white rounded-xl shadow-xs border border-gray-100 p-6",children:[s.jsx("div",{className:"flex items-center justify-between mb-6",children:s.jsxs("h3",{className:"text-lg font-bold text-gray-900 flex items-center gap-2",children:[s.jsx(se,{className:"w-5 h-5 text-gray-500"}),"Commission & Order Trends"]})}),s.jsx("div",{className:"h-80 w-full",children:r.length>0?s.jsx(ce,{width:"100%",height:"100%",children:s.jsxs(Ot,{data:r,margin:{top:10,right:10,left:0,bottom:0},children:[s.jsx(Ca,{strokeDasharray:"3 3",vertical:!1,stroke:"#E5E7EB"}),s.jsx(Ea,{dataKey:"date",tickFormatter:c=>new Date(c).getDate(),stroke:"#9CA3AF",fontSize:12,tickLine:!1,axisLine:!1,label:{value:"Days",position:"insideBottom",offset:-10}}),s.jsx(de,{yAxisId:"left",stroke:"#9CA3AF",fontSize:12,tickLine:!1,axisLine:!1,tickFormatter:c=>`$${c/1e3}k`,label:{value:"Amount ($)",angle:-90,position:"insideLeft",offset:10}}),s.jsx(de,{yAxisId:"right",orientation:"right",stroke:"#9CA3AF",fontSize:12,tickLine:!1,axisLine:!1}),s.jsx(ue,{content:s.jsx(b,{})}),s.jsx(me,{wrapperStyle:{paddingTop:"20px"}}),s.jsx(_a,{yAxisId:"left",dataKey:"total_commission",name:"Commission ($)",fill:"#10B981",radius:[4,4,0,0],barSize:20}),s.jsx(Oa,{yAxisId:"right",type:"monotone",dataKey:"order_count",name:"Order Count",stroke:"#F97316",strokeWidth:2,dot:{r:4,fill:"#F97316"}})]})}):s.jsx("div",{className:"w-full h-full flex items-center justify-center text-gray-500 bg-gray-50 rounded-lg",children:"No trend data available"})})]}),s.jsxs("div",{className:"bg-white rounded-xl shadow-xs border border-gray-100 p-6",children:[s.jsxs("h3",{className:"text-lg font-bold text-gray-900 mb-6 flex items-center gap-2",children:[s.jsx(ka,{className:"w-5 h-5 text-gray-500"}),"Payout Status"]}),s.jsxs("div",{className:"h-60 w-full relative",children:[m.length>0?s.jsx(ce,{width:"100%",height:"100%",children:s.jsxs(Et,{children:[s.jsx(Ce,{data:m,cx:"50%",cy:"50%",innerRadius:60,outerRadius:80,paddingAngle:5,dataKey:"value",children:m.map((c,d)=>s.jsx(J,{fill:c.color},`cell-${d}`))}),s.jsx(ue,{formatter:c=>p(c),contentStyle:{borderRadius:"8px",border:"none",boxShadow:"0 4px 6px -1px rgb(0 0 0 / 0.1)"}}),s.jsx(me,{verticalAlign:"bottom",height:36})]})}):s.jsxs("div",{className:"w-full h-full flex flex-col items-center justify-center text-gray-500",children:[s.jsx(Ta,{className:"w-8 h-8 mb-2 text-gray-300"}),s.jsx("span",{className:"text-sm",children:"No payout data"})]}),m.length>0&&s.jsxs("div",{className:"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 text-center pointer-events-none pb-8",children:[s.jsx("p",{className:"text-xs text-gray-500",children:"Total Payouts"}),s.jsx("p",{className:"text-sm font-bold text-gray-900",children:p(e.total_seller_payouts)})]})]})]})]})]})},Ft=()=>{const[e,a]=o.useState(!0),[r,t]=o.useState({commission_enabled:!1,default_commission_rate:0,minimum_payout:0,payout_schedule:"weekly"});o.useEffect(()=>{n()},[]);const n=async()=>{try{a(!0);const l=await $.getCommissionSettings();t(l.data.data||l.data)}catch{re("Failed to load settings")}finally{a(!1)}},i=async l=>{l.preventDefault();try{await $.updateCommissionSettings(r),ke("Settings updated successfully")}catch{re("Failed to update settings")}};return e?s.jsx("div",{className:"p-8 text-center",children:"Loading settings..."}):s.jsxs("div",{className:"max-w-2xl mx-auto bg-white rounded-xl shadow-xs border border-gray-100 p-6",children:[s.jsxs("h3",{className:"text-xl font-bold text-gray-900 mb-6 flex items-center gap-2",children:[s.jsx(ve,{className:"w-5 h-5"}),"Commission Configuration"]}),s.jsxs("form",{onSubmit:i,className:"space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg border border-gray-200",children:[s.jsxs("div",{children:[s.jsx("label",{className:"font-medium text-gray-900 block",children:"Enable Commissions"}),s.jsx("p",{className:"text-sm text-gray-500",children:"Turn commission tracking on or off"})]}),s.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[s.jsx("input",{type:"checkbox",checked:r.commission_enabled,onChange:l=>t({...r,commission_enabled:l.target.checked}),className:"sr-only peer"}),s.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-hidden peer-focus:ring-4 peer-focus:ring-brand-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-brand-600"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Default Commission Rate (%)"}),s.jsxs("div",{className:"relative",children:[s.jsx("input",{type:"number",min:"0",max:"100",step:"0.01",value:r.default_commission_rate,onChange:l=>t({...r,default_commission_rate:parseFloat(l.target.value)}),className:"w-full pl-3 pr-10 py-2 border border-gray-300 rounded-lg focus:outline-hidden focus:ring-2 focus:ring-brand-500"}),s.jsx("div",{className:"absolute inset-y-0 right-0 pr-3 flex items-center pointer-events-none",children:s.jsx("span",{className:"text-gray-500",children:"%"})})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Minimum Payout Amount"}),s.jsxs("div",{className:"relative",children:[s.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:s.jsx("span",{className:"text-gray-500",children:"$"})}),s.jsx("input",{type:"number",min:"0",step:"1",value:r.minimum_payout,onChange:l=>t({...r,minimum_payout:parseFloat(l.target.value)}),className:"w-full pl-8 pr-4 py-2 border border-gray-300 rounded-lg focus:outline-hidden focus:ring-2 focus:ring-brand-500"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Payout Schedule"}),s.jsxs("select",{value:r.payout_schedule,onChange:l=>t({...r,payout_schedule:l.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-hidden focus:ring-2 focus:ring-brand-500",children:[s.jsx("option",{value:"weekly",children:"Weekly"}),s.jsx("option",{value:"monthly",children:"Monthly"})]})]}),s.jsx("div",{className:"pt-4 border-t border-gray-100",children:s.jsxs(Da,{type:"submit",className:"w-full flex justify-center items-center gap-2 px-4 py-2 bg-brand-500 text-white rounded-lg hover:bg-brand-600 transition-colors",children:[s.jsx(Ia,{className:"w-4 h-4"}),"Save Changes"]})})]})]})},$t=[{id:"overview",label:"Overview",icon:Le},{id:"sellers",label:"Seller Reports",icon:La},{id:"settings",label:"Settings",icon:ve}],dr=()=>{const[e,a]=o.useState("overview"),r=()=>{switch(e){case"overview":return s.jsx(Bt,{});case"sellers":return s.jsx(Kt,{});case"settings":return s.jsx(Ft,{});default:return null}};return s.jsx(Ie,{children:s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Commission Management"}),s.jsx("p",{className:"text-gray-600 mt-2",children:"Manage earnings, payouts, and platform commission rates."})]}),s.jsx("div",{className:"flex border-b border-gray-200 overflow-x-auto",children:$t.map(t=>s.jsxs("button",{onClick:()=>a(t.id),className:`relative flex items-center gap-2 px-6 py-3 text-sm font-medium transition-colors whitespace-nowrap
                                ${e===t.id?"text-brand-600":"text-gray-500 hover:text-gray-700"}`,children:[s.jsx(t.icon,{className:"w-4 h-4"}),s.jsx("span",{children:t.label}),e===t.id&&s.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-0.5 bg-brand-600"})]},t.id))}),s.jsx("div",{className:"min-h-[400px]",children:r()})]})})};export{dr as default};
